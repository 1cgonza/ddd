!function(t){function e(a){if(s[a])return s[a].exports;var i=s[a]={i:a,l:!1,exports:{}};return t[a].call(i.exports,i,i.exports,e),i.l=!0,i.exports}var s={};e.m=t,e.c=s,e.d=function(t,s,a){e.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:a})},e.n=function(t){var s=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(s,"a",s),s},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/Users/juan/lab/ddd/www/",e(e.s=0)}([function(t,e,s){"use strict";function a(t){return t&&t.__esModule?t:{default:t}}function i(t){b.innerHTML="",b.style.opacity=1,e.year=k=t,A=0,C=[],P=[],I=!1,T=0,H=Date.parse(k+"/01/01 00:00:00")/1e3,L=Date.parse(k+1+"/01/01 00:00:00")/1e3,M.ctx.clearRect(0,0,M.w,M.h),j.ctx.clearRect(0,0,j.w,j.h),R.ctx.clearRect(0,0,R.w,R.h),n(),o(),console.log(k)}function n(){x.json({url:"../../data/monitor/violencia-"+k+".json",container:D,loadingMsg:"Loading Violence Data",loadingEle:b}).then(function(t){P=t.data,I=!0}).catch(function(t){console.error(t)})}function o(){z===y.imgs.length&&I?(b.style.opacity=0,M.ctx.globalCompositeOperation="source-over",M.ctx.fillStyle="rgba(255, 255, 255, 1)",M.ctx.fillRect(0,0,M.w,M.h),l(),r()):e.animReq=Y=requestAnimationFrame(o)}function r(){A<P.length-1?(S===F&&(h(A),S=0),A++,S++,e.animReq=Y=requestAnimationFrame(r)):window.cancelAnimationFrame(Y)}function c(){B++,B>=4&&(B=1),N=1}function l(){var t=(B+1)%4,s=t%4==0?1:t,a=X["papa"+B].img,i=X["papa"+s].img;N-=.005,q.ctx.clearRect(0,0,q.w,q.h),q.ctx.globalAlpha=N,q.ctx.drawImage(a,O.w/2-f/2-200,O.h/2-p/2,f,p),_.ctx.clearRect(0,0,_.w,_.h),_.ctx.globalAlpha=1-N,_.ctx.drawImage(i,O.w/2-f/2-200,O.h/2-p/2,f,p),O.ctx.clearRect(0,0,O.w,O.h),O.ctx.drawImage(q.canvas,0,0),O.ctx.drawImage(_.canvas,0,0),N<=0&&c(),e.animReq=Y=requestAnimationFrame(l)}function h(t){var e=P[t];if(e.hasOwnProperty("vTotal")&&e.hasOwnProperty("cat")&&e.cat.indexOf("Homicidio")>=0){var s=P[t].vTotal;if("lon"in e&&"lat"in e)for(var a=E.convertCoordinates(e.lon,e.lat),i=0;i<s;i++)C.push(new v.default(R,a,i))}if(C.length>0){R.ctx.clearRect(0,0,M.w,M.h);for(var n=0;n<C.length;n++)C[n].finished||C[n].draw();M.ctx.globalCompositeOperation="source-over",M.ctx.fillStyle="rgba(255, 255, 255, 0.01)",M.ctx.fillRect(0,0,M.w,M.h),M.ctx.globalCompositeOperation="xor",M.ctx.drawImage(R.canvas,0,0)}}Object.defineProperty(e,"__esModule",{value:!0}),e.animReq=e.year=e.assets=void 0;var f,p,u=s(10),d=a(u),m=s(11),w=a(m),g=s(12),v=a(g),y=s(13),x=new DDD.DataRequest,D=document.getElementById("ddd-container"),b=document.createElement("div"),R=DDD.canvas(null),j=DDD.canvas(D),O=DDD.canvas(D),_=DDD.canvas(D),q=DDD.canvas(D),M=DDD.canvas(D);O.canvas.id="papa";var X=e.assets={};b.className="loading",R.center.y=M.center.y=R.h/1.5|0,D.appendChild(b);var k=e.year=2008,C=[],P=[],I=!1,Y=e.animReq=void 0,A=0,F=4,S=0,E=new DDD.Map({zoom:8,width:M.w,height:M.h,center:{lon:-71.999996,lat:4.000002}}),T=0,H=Date.parse(k+"/01/01 00:00:00")/1e3,L=Date.parse(k+1+"/01/01 00:00:00")/1e3,z=0,B=(new d.default(D,i,x),1),N=1;!function(){n();for(var t=0;t<y.imgs.length;t++){var e=new w.default(y.imgs[t].options);e.img.onload=function(){z++},e.img.src=e.src,X[y.imgs[t].key]=e,f=O.h-50,p=O.h-50}o()}()},,,,,,,,,,function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s(0),i=function(t,e,s){this.container=t,this.current,this.reloadStage=e,this.violenceReq=s,this.menu=DDD.yearsMenu(2008,2016,a.year,this.onClick.bind(this),this.menuReady.bind(this))};e.default=i,i.prototype.menuReady=function(t,e){this.container.appendChild(t),this.current=e},i.prototype.onClick=function(t){t.target!==this.current&&(window.cancelAnimationFrame(a.animReq),DDD.resetCurrent(this.current,t.target),this.violenceReq.abort(),this.current=t.target,this.reloadStage(t.target.textContent))}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=function(t){this.img=new Image,this.src=t.src,this.w=t.w,this.h=t.h,this.cols=t.cols,this.rows=t.rows,this.offX=t.offX,this.offY=t.offY,this.fw=this.w/this.cols|0,this.fh=this.h/this.rows|0};e.default=a},function(t,e,s){"use strict";function a(t,e,s){this.stage=t,this.x=e.x,this.y=e.y,this.frameX=0,this.finished=!1,this.r=-s,this.forward=!0,this.pushY=0,this.count=0}Object.defineProperty(e,"__esModule",{value:!0});var i=s(0);e.default=a,a.prototype.draw=function(){var t=this.stage;this.count<2*i.assets.levit.cols?(this.forward||(this.pushY+=i.assets.levit.fh/15),t.ctx.save(),t.ctx.translate(t.center.x,t.center.y),t.ctx.rotate(this.r*Math.PI/20),t.ctx.drawImage(i.assets.levit.img,this.frameX*i.assets.levit.fw,0,i.assets.levit.fw,i.assets.levit.fh,this.x-i.assets.levit.offX,this.y-i.assets.levit.offY-this.pushY,i.assets.levit.fw,i.assets.levit.fh),t.ctx.restore(),this.forward?this.frameX++:this.frameX--,this.count++,this.frameX===i.assets.levit.cols-1&&(this.forward=!1)):this.del()},a.prototype.del=function(){this.finished=!0}},function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.imgs=[{key:"lines",options:{src:"/img/assets/sprites/lines-01-small.png",w:295,h:150,cols:21,rows:1,offX:4,offY:1}},{key:"shadows",options:{src:"/img/assets/sprites/shadows-sprite.png",w:318,h:300,cols:3,rows:8,offX:55,offY:14}},{key:"levit",options:{src:"/img/assets/sprites/levit.png",w:3279,h:165,cols:30,rows:1,offX:68,offY:161}},{key:"papa1",options:{src:"/img/assets/sprites/papa1.jpg",w:1200,h:1200}},{key:"papa2",options:{src:"/img/assets/sprites/papa2.jpg",w:1200,h:1200}},{key:"papa3",options:{src:"/img/assets/sprites/papa3.jpg",w:1200,h:1200}},{key:"papa4",options:{src:"/img/assets/sprites/papa4.jpg",w:1200,h:1200}}]}]);