!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=29)}({0:function(t,e,n){"use strict";n.d(e,"e",(function(){return h})),n.d(e,"g",(function(){return u})),n.d(e,"c",(function(){return c})),n.d(e,"r",(function(){return d})),n.d(e,"t",(function(){return p})),n.d(e,"n",(function(){return v})),n.d(e,"h",(function(){return a})),n.d(e,"i",(function(){return o})),n.d(e,"l",(function(){return y})),n.d(e,"u",(function(){return m})),n.d(e,"s",(function(){return g})),n.d(e,"k",(function(){return x})),n.d(e,"q",(function(){return _})),n.d(e,"p",(function(){return w})),n.d(e,"b",(function(){return b})),n.d(e,"d",(function(){return E})),n.d(e,"o",(function(){return A})),n.d(e,"m",(function(){return T})),n.d(e,"a",(function(){return z})),n.d(e,"f",(function(){return N})),n.d(e,"j",(function(){return D}));class r{constructor(t,e){this.x=t||0,this.y=e||0}clone(){return new r(this.x,this.y)}copy(t){this.set(t.x,t.y)}equals(t){return t.x===this.x&&t.y===this.y}set(t,e){this.x=t||0,this.y=e||0!==e?this.x:0}}class i{constructor(t,e,n,r){this.x=t||0,this.y=e||0,this.width=n||0,this.height=r||0}}class s{constructor(t,e,n,r,i,s){this.a=t||1,this.b=e||0,this.c=n||0,this.d=r||1,this.tx=i||0,this.ty=s||0}toArray(t,e){this.array||(this.array=new Float32Array(9));var n=e||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(t,e){e=e||new r;var n=t.x,i=t.y;return e.x=this.a*n+this.c*i+this.tx,e.y=this.b*n+this.d*i+this.ty,e}applyInverse(t,e){e=e||new r;var n=1/(this.a*this.d+this.c*-this.b),i=t.x,s=t.y;return e.x=this.d*n*i+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,e.y=this.a*n*s+-this.b*n*i+(-this.ty*this.a+this.tx*this.b)*n,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){var e=Math.cos(t),n=Math.sin(t),r=this.a,i=this.c,s=this.tx;return this.a=r*e-this.b*n,this.b=r*n+this.b*e,this.c=i*e-this.d*n,this.d=i*n+this.d*e,this.tx=s*e-this.ty*n,this.ty=s*n+this.ty*e,this}append(t){var e=this.a,n=this.b,r=this.c,i=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*n+t.b*i,this.c=t.c*e+t.d*r,this.d=t.c*n+t.d*i,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*i+this.ty,this}setTransform(t,e,n,r,i,s,o){var a=Math.sin(o),h=Math.cos(o),u=h*i,c=a*i,l=-a*s,f=h*s;return this.a=u+l,this.b=c+f,this.c=u+l,this.d=c+f,this.tx=t+(n*u+r*l),this.ty=e+(n*c+r*f),this}prepend(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}invert(){var t=this.a,e=this.b,n=this.c,r=this.d,i=this.tx,s=t*r-e*n;return this.a=r/s,this.b=-e/s,this.c=-n/s,this.d=t/s,this.tx=(n*this.ty-r*i)/s,this.ty=-(t*this.ty-e*i)/s,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){var t=new s;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copy(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}}class o{constructor(t,e,n){this.x=t||0,this.y=e||0,this.z=n||0}set(t,e,n){return this.x=t,this.y=e,this.z=n,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return isFinite(t)?(this.x*=t,this.y*=t,this.z*=t):(this.x=0,this.y=0,this.z=0),this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}setLength(t){return this.multiplyScalar(t/this.length())}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}normalize(){return this.divideScalar(this.length())}distanceToSquared(t){var e=this.x-t.x,n=this.y-t.y,r=this.z-t.z;return e*e+n*n+r*r}limit(t){return this.lengthSq()>t*t&&(this.normalize(),this.mult(t)),this}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}}class a{constructor(){this.reset()}reset(){this.m=[1,0,0,1,0,0]}multiply(t){var e=this.m[0]*t.m[0]+this.m[2]*t.m[1],n=this.m[1]*t.m[0]+this.m[3]*t.m[1],r=this.m[0]*t.m[2]+this.m[2]*t.m[3],i=this.m[1]*t.m[2]+this.m[3]*t.m[3],s=this.m[0]*t.m[4]+this.m[2]*t.m[5]+this.m[4],o=this.m[1]*t.m[4]+this.m[3]*t.m[5]+this.m[5];this.m[0]=e,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=s,this.m[5]=o}invert(){var t=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),e=this.m[3]*t,n=-this.m[1]*t,r=-this.m[2]*t,i=this.m[0]*t,s=t*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),o=t*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);this.m[0]=e,this.m[1]=n,this.m[2]=r,this.m[3]=i,this.m[4]=s,this.m[5]=o}rotate(t){var e=Math.cos(t),n=Math.sin(t),r=this.m[0]*e+this.m[2]*n,i=this.m[1]*e+this.m[3]*n,s=this.m[0]*-n+this.m[2]*e,o=this.m[1]*-n+this.m[3]*e;this.m[0]=r,this.m[1]=i,this.m[2]=s,this.m[3]=o}translate(t,e){this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e}translateAndRotate(t,e,n){var r=Math.cos(n),i=Math.sin(n),s=this.m[0]*r+this.m[2]*i,o=this.m[1]*r+this.m[3]*i,a=this.m[0]*-i+this.m[2]*r,h=this.m[1]*-i+this.m[3]*r;this.m[4]+=this.m[0]*t+this.m[2]*e,this.m[5]+=this.m[1]*t+this.m[3]*e,this.m[0]=s,this.m[1]=o,this.m[2]=a,this.m[3]=h}scale(t,e){this.m[0]*=t,this.m[1]*=t,this.m[2]*=e,this.m[3]*=e}transformPoint(t,e){var n=t,r=e;return[t=n*this.m[0]+r*this.m[2]+this.m[4],e=n*this.m[1]+r*this.m[3]+this.m[5]]}}const h=Math.PI,u=2*h,c=h/2,l=h/4,f=h/180;function d(t,e,n){let r=Math.floor(Math.random()*(e-t))+t;return n&&(r=Math.random()*(e-t)+t),r}function p(t,e){return t/100*e}function v(t,e){return t/e*100}function y(t,e){const n=document.createElement("canvas"),r=n.getContext("2d");if(e=e||{},n.width=e.w||window.innerWidth,n.height=e.h||window.innerHeight,n.style.position=e.position||"absolute",n.style.top=e.top||0,n.style.left=e.left||0,n.style.zIndex=e.zi||9,e.css)for(var i in e.css)n.style[i]=e.css[i];return r.font=e.font||"12px Inconsolata",t&&t.appendChild(n),{container:t,canvas:n,w:n.width,h:n.height,ctx:r,center:{x:n.width/2,y:n.height/2}}}function m(t,e,n,r,i){var s=document.createElement("ul"),o="";s.id="years",s.style.zIndex=99999;for(var a=t;a<=e;a++){var h=document.createElement("li"),u=document.createTextNode(a);a===n&&(h.className="current",o=h),h.appendChild(u),s.appendChild(h),h.addEventListener("click",r,!1)}i(s,o)}function g(t,e,n){n=n||"current",t&&t.classList.remove(n),e.classList.add(n)}function x(t){for(var e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",r=0;r<t.length;){var i,s,o=255&t.charCodeAt(r++),a=255&t.charCodeAt(r++),h=255&t.charCodeAt(r++),u=o>>2,c=(3&o)<<4|a>>4;isNaN(a)?i=s=64:(i=(15&a)<<2|h>>6,s=isNaN(h)?64:63&h),n+=e.charAt(u)+e.charAt(c)+e.charAt(i)+e.charAt(s)}return n}function _(t){return(new b).json(t)}function w(t){var e=new b;return e.req.overrideMimeType("text/plain; charset=x-user-defined"),e.getD(t).then((function(t){return void 0!==t.ret?t:t.data})).catch((function(t){console.error(t)}))}class b{constructor(){this.req=new XMLHttpRequest}abort(){this.req.abort()}json(t){return this.req.overrideMimeType("application/json"),this.getD(t).then((function(t){return void 0!==t.ret?(t.data=JSON.parse(t.data),t):JSON.parse(t.data)})).catch((function(t){console.error("Error in data request, reason:",t)}))}getD(t){if("object"==typeof t){if(!t.url)return void console.error("The request did not receive a url, instead got",t.url)}else"string"==typeof t&&t.length>0&&(t={url:t});var e,n,r=!1,i=this.req,s=t.loadingMsg||"Loading",o=t.container||document.body,a=o.querySelector(".loading");a||((a=document.createElement("div")).className="loading",o.appendChild(a));var h=!!t.loadingEle,u=h?t.loadingEle:null;if(!u){var c=o.querySelector(".loading-ele");(u=document.createElement("div")).className="loadingEle",c?a.insertBefore(c,u):a.appendChild(u)}function l(){u.style.opacity=1,a.style.zIndex=9,(e=u.querySelector(".loading-msg"))||((e=document.createElement("p")).className="loading-msg",e.innerText=s,u.appendChild(e))}function f(t){if(t.lengthComputable){r||(n=u.querySelector(".progress"))||((n=document.createElement("progress")).className="progress",n.style.zIndex=0,n.max=100,n.value=0,u.insertBefore(n,e),r=!0);var o=t.loaded/t.total*100;n.value=o,e.innerText=Math.floor(o)+"%\n"+s}else i.onprogress=null}function d(){h||(u.style.display="none"),a.style.zIndex=0}return new Promise((function(e,n){i.open("GET",t.url,!0),i.onloadstart=l,i.onprogress=f,i.onloadend=d,i.onload=function(){200===i.status?e({data:i.response,ret:t.ret}):n(i.statusText)},i.onerror=function(){n("Network Error")},i.send(null)}))}}class E{constructor(t){var e=t.width||window.innerWidth,n=t.height||window.innerHeight,r=t.zoom||11;t.center?this.center={lon:t.center.lon,lat:t.center.lat}:this.center={},this.hasCenter=null,this.updateSize(e,n,r)}updateSize(t,e,n){this.stageWidth=t,this.stageCenterY=e/2,this.zoom=n||this.zoom,this.zoomX=this.stageWidth*this.zoom,this.zoomY=this.stageCenterY*this.zoom,this.zoomRad=this.zoomX/360,this.newCenter(this.center.lon,this.center.lat)}newCenter(t,e){this.hasCenter=!1,this.convertCoordinates(t,e),this.hasCenter=!0}convertCoordinates(t,e){var n=+e*f,r=Math.log(Math.tan(l+n/2)),i=(+t+180)*this.zoomRad,s=this.zoomY-this.zoomX*r/u;return this.hasCenter?(i-=this.center.x,s-=this.center.y):(this.center.x=i,this.center.y=s),{x:i,y:s}}}function A(t){t=t.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,(function(t,e,n,r){return e+e+n+n+r+r}));var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function T(t){return 1/(255/t)}class z{constructor(t,e){if(!t||"[object Object]"!==Object.prototype.toString.call(t))return console.error("The first parameter needs to be an Object.","Example:","{audio1: 'audio1.mp3', audio2: 'audio2.mp3'}");window.AudioContext=window.AudioContext||window.webkitAudioContext;var n,r,i=Object.keys(t).length,s=0,o={};for(var a in this.ctx=new AudioContext,t)n=t[a],h.bind(this),document.body,r=void 0,(r=new b).req.responseType="arraybuffer",r.getD(n).then((function(t){return t})).catch((function(t){console.error("Error fetching audio file",t)}));function h(t,n){this.ctx.decodeAudioData(t,function(t){if(!t)return void console.error("Error decoding audio file:",n);var r=this.ctx.createBufferSource();r.buffer=t,o[n]=r,++s===i&&e(o)}.bind(this),(function(t){console.error("decodeAudioData error",t)}))}}source(t){return(t=this.ctx.createBufferSource()).buffer=buffer,t.connect(this.gainNode),this.gainNode.connect(this.ctx.destination),t}}class N{constructor(t,e,n){this.children=[],this.texture={},this.data=t,this.renderer=e,this.loadImg(t.url),this.setBatchSize(n)}setBatchSize(t){t>16384&&(t=16384),t>15e3&&(t=15e3),this.batchSize=t}renderWebGL(t){t.currentRenderer.render(this)}bindTexture(){var t=this.renderer.gl,e=this.texture;return e.glTexture||(e.glTexture=t.createTexture()),t.bindTexture(t.TEXTURE_2D,e.glTexture),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),t.blendFunc(t.ONE,t.ONE_MINUS_SRC_ALPHA),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,this.img),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),e.mipmap&&e.isPowerOfTwo?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR_MIPMAP_LINEAR),t.generateMipmap(t.TEXTURE_2D)):t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),e.isPowerOfTwo?(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),!0}loadImg(t){this.img=new Image,this.img.onload=this.imgLoaded.bind(this),this.img.src=t}imgLoaded(){for(var t,e,n=this.img.naturalWidth,r=this.img.naturalHeight,i={loaded:!0,isPowerOfTwo:(t=n,e=r,t>0&&0==(t&t-1)&&e>0&&0==(e&e-1))},s=[],o=0;o<this.data.frames.length;o++){var a=this.data.frames[o];s.push({width:a.w,height:a.h,uvs:[a.x/n,a.y/r,(a.x+a.w)/n,(a.y+a.h)/r]})}this.renderer.frames=s,this.texture=i,this.bindTexture(),this.data.cb&&this.data.cb()}particle(t){return(t=t||{}).scale=t.scale||new r(1,1),t.alpha=t.alpha||1,t.rotation=t.rotation||0,t.x=t.x||0,t.y=t.y||0,t.frame=t.frame||0,this.children.push(t),this.children.length>this.batchSize&&this.setBatchSize(this.children.length),t}}class M{constructor(t,e,n){this.gl=t,this.size=new i(0,0,1,1),this.projectionMatrix=new s,this.resize(e,n)}resize(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e;var n=this.projectionMatrix.identity();n.a=2/this.size.width,n.d=-2/this.size.height,n.tx=-1,n.ty=1}}}var S=n(3),R=n.n(S),C=n(4),P=n.n(C);class k{constructor(t){this.gl=t,this.uniforms={projectionMatrix:{}},this.attributes={};var e=t.createShader(t.VERTEX_SHADER);t.shaderSource(e,R.a),t.compileShader(e);var n=t.createShader(t.FRAGMENT_SHADER);t.shaderSource(n,P.a),t.compileShader(n);var r=t.createProgram();t.attachShader(r,e),t.attachShader(r,n),t.linkProgram(r),t.deleteShader(e),t.deleteShader(n),this.program=r,t.useProgram(r),this.cacheUniformLocations(["projectionMatrix"]),this.cacheAttributeLocations(["aVertexPosition","aTextureCoord","aAlpha","aPositionCoord","aRotation"])}cacheUniformLocations(t){for(var e=0;e<t.length;++e)this.uniforms[t[e]]._location=this.gl.getUniformLocation(this.program,t[e])}cacheAttributeLocations(t){for(var e=0;e<t.length;++e)this.attributes[t[e]]=this.gl.getAttribLocation(this.program,t[e])}}class L{constructor(t,e){this.renderer=e,this.gl=t,this.start()}start(){var t=this.gl,e=new k(t);this.properties=[{attribute:e.attributes.aVertexPosition,size:2},{attribute:e.attributes.aPositionCoord,size:2},{attribute:e.attributes.aRotation,size:1},{attribute:e.attributes.aTextureCoord,size:2},{attribute:e.attributes.aAlpha,size:1}];for(var n=0;n<this.properties.length;n++)t.enableVertexAttribArray(n);var r=this.renderer.renderTarget.projectionMatrix;t.uniformMatrix3fv(e.uniforms.projectionMatrix._location,!1,r.toArray(!0))}render(t){t.texture;var e=t.children,n=e.length,r=t.maxSize;this.size=t.batchSize;var i=this.gl;if(0!==n){if(n>r&&(n=r),!this.data){this.initBuffers();for(var s=0;s<this.properties.length;s++){var o=this.properties[s];i.vertexAttribPointer(o.attribute,o.size,i.FLOAT,!1,4*this.stride,4*o.offset)}}this.updateData(e,n),i.bufferSubData(i.ARRAY_BUFFER,0,this.data),i.drawElements(i.TRIANGLES,6*n,i.UNSIGNED_SHORT,0)}}initBuffers(){var t=this.gl,e=0;this.stride=0;for(var n=0;n<this.properties.length;n++){var r=this.properties[n];r.offset=e,e+=r.size,this.stride+=r.size}this.data=new Float32Array(this.size*this.stride*4),t.bindBuffer(t.ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ARRAY_BUFFER,this.data,t.DYNAMIC_DRAW);for(var i=6*this.size,s=new Uint16Array(i),o=(n=0,0);n<i;n+=6,o+=4)s[n]=o,s[n+1]=o+1,s[n+2]=o+2,s[n+3]=o,s[n+4]=o+2,s[n+5]=o+3;t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,t.createBuffer()),t.bufferData(t.ELEMENT_ARRAY_BUFFER,s,t.STATIC_DRAW)}updateData(t,e){this.stride;for(var n=0,r=this.data,i=this.renderer.frames,s=0;s<e;s++){var o=t[s],a=i[o.frame],h=a.width*o.scale,u=a.height*o.scale,c=o.x,l=o.y,f=o.rotation,d=a.uvs,p=o.alpha;r[n]=-h,r[++n]=-u,r[++n]=c,r[++n]=l,r[++n]=f,r[++n]=d[0],r[++n]=d[1],r[++n]=p,r[++n]=h,r[++n]=-u,r[++n]=c,r[++n]=l,r[++n]=f,r[++n]=d[2],r[++n]=d[1],r[++n]=p,r[++n]=h,r[++n]=u,r[++n]=c,r[++n]=l,r[++n]=f,r[++n]=d[2],r[++n]=d[3],r[++n]=p,r[++n]=-h,r[++n]=u,r[++n]=c,r[++n]=l,r[++n]=f,r[++n]=d[0],r[++n]=d[3],r[++n]=p,n++}}}class D{constructor(t,e){this.container=t,e=e||{},this.width=e.width||window.innerWidth,this.height=e.height||window.innerHeight,this.canvas=document.createElement("canvas"),this.canvas.style.position="absolute",t.appendChild(this.canvas);var n=this.canvas.getContext("webgl")||this.canvas.getContext("experimental-webgl",ctxOptions);this.gl=n,n.disable(n.DEPTH_TEST),n.disable(n.CULL_FACE),n.enable(n.BLEND),this.renderTarget=new M(n,this.width,this.height),this.currentRenderer=new L(n,this),this.resize(this.width,this.height)}render(t){t.renderWebGL(this)}resize(t,e){this.width=this.canvas.width=t,this.height=this.canvas.height=e,this.gl.viewport(0,0,t,e)}}},1:function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},t.exports.default=t.exports,t.exports.__esModule=!0},2:function(t,e){function n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}t.exports=function(t,e,r){return e&&n(t.prototype,e),r&&n(t,r),t},t.exports.default=t.exports,t.exports.__esModule=!0},29:function(t,e,n){"use strict";n.r(e);var r=n(1),i=n.n(r),s=n(2),o=n.n(s),a=n(5),h=n.n(a);function u(){}var c=function(t){return null==t?u:function(){return this.querySelector(t)}};function l(){return[]}var f=function(t){return new Array(t.length)};function d(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}d.prototype={constructor:d,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function p(t,e,n,r,i,s){for(var o,a=0,h=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new d(t,s[a]);for(;a<h;++a)(o=e[a])&&(i[a]=o)}function v(t,e,n,r,i,s,o){var a,h,u,c={},l=e.length,f=s.length,p=new Array(l);for(a=0;a<l;++a)(h=e[a])&&(p[a]=u="$"+o.call(h,h.__data__,a,e),u in c?i[a]=h:c[u]=h);for(a=0;a<f;++a)(h=c[u="$"+o.call(t,s[a],a,s)])?(r[a]=h,h.__data__=s[a],c[u]=null):n[a]=new d(t,s[a]);for(a=0;a<l;++a)(h=e[a])&&c[p[a]]===h&&(i[a]=h)}function y(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}var m="http://www.w3.org/1999/xhtml",g={svg:"http://www.w3.org/2000/svg",xhtml:m,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},x=function(t){var e=t+="",n=e.indexOf(":");return n>=0&&"xmlns"!==(e=t.slice(0,n))&&(t=t.slice(n+1)),g.hasOwnProperty(e)?{space:g[e],local:t}:t};function _(t){return function(){this.removeAttribute(t)}}function w(t){return function(){this.removeAttributeNS(t.space,t.local)}}function b(t,e){return function(){this.setAttribute(t,e)}}function E(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function A(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttribute(t):this.setAttribute(t,n)}}function T(t,e){return function(){var n=e.apply(this,arguments);null==n?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}var z=function(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView};function N(t){return function(){this.style.removeProperty(t)}}function M(t,e,n){return function(){this.style.setProperty(t,e,n)}}function S(t,e,n){return function(){var r=e.apply(this,arguments);null==r?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function R(t,e){return t.style.getPropertyValue(e)||z(t).getComputedStyle(t,null).getPropertyValue(e)}function C(t){return function(){delete this[t]}}function P(t,e){return function(){this[t]=e}}function k(t,e){return function(){var n=e.apply(this,arguments);null==n?delete this[t]:this[t]=n}}function L(t){return t.trim().split(/^|\s+/)}function D(t){return t.classList||new I(t)}function I(t){this._node=t,this._names=L(t.getAttribute("class")||"")}function j(t,e){for(var n=D(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function q(t,e){for(var n=D(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function O(t){return function(){j(this,t)}}function U(t){return function(){q(this,t)}}function B(t,e){return function(){(e.apply(this,arguments)?j:q)(this,t)}}I.prototype={add:function(t){this._names.indexOf(t)<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function X(){this.textContent=""}function F(t){return function(){this.textContent=t}}function H(t){return function(){var e=t.apply(this,arguments);this.textContent=null==e?"":e}}function V(){this.innerHTML=""}function W(t){return function(){this.innerHTML=t}}function Y(t){return function(){var e=t.apply(this,arguments);this.innerHTML=null==e?"":e}}function G(){this.nextSibling&&this.parentNode.appendChild(this)}function $(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function J(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===m&&e.documentElement.namespaceURI===m?e.createElement(t):e.createElementNS(n,t)}}function K(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}var Z=function(t){var e=x(t);return(e.local?K:J)(e)};function Q(){return null}function tt(){var t=this.parentNode;t&&t.removeChild(this)}function et(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function nt(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}var rt={},it=null;"undefined"!=typeof document&&("onmouseenter"in document.documentElement||(rt={mouseenter:"mouseover",mouseleave:"mouseout"}));function st(t,e,n){return t=ot(t,e,n),function(e){var n=e.relatedTarget;n&&(n===this||8&n.compareDocumentPosition(this))||t.call(this,e)}}function ot(t,e,n){return function(r){var i=it;it=r;try{t.call(this,this.__data__,e,n)}finally{it=i}}}function at(t){return t.trim().split(/^|\s+/).map((function(t){var e="",n=t.indexOf(".");return n>=0&&(e=t.slice(n+1),t=t.slice(0,n)),{type:t,name:e}}))}function ht(t){return function(){var e=this.__on;if(e){for(var n,r=0,i=-1,s=e.length;r<s;++r)n=e[r],t.type&&n.type!==t.type||n.name!==t.name?e[++i]=n:this.removeEventListener(n.type,n.listener,n.capture);++i?e.length=i:delete this.__on}}}function ut(t,e,n){var r=rt.hasOwnProperty(t.type)?st:ot;return function(i,s,o){var a,h=this.__on,u=r(e,s,o);if(h)for(var c=0,l=h.length;c<l;++c)if((a=h[c]).type===t.type&&a.name===t.name)return this.removeEventListener(a.type,a.listener,a.capture),this.addEventListener(a.type,a.listener=u,a.capture=n),void(a.value=e);this.addEventListener(t.type,u,n),a={type:t.type,name:t.name,value:e,listener:u,capture:n},h?h.push(a):this.__on=[a]}}function ct(t,e,n,r){var i=it;t.sourceEvent=it,it=t;try{return e.apply(n,r)}finally{it=i}}function lt(t,e,n){var r=z(t),i=r.CustomEvent;"function"==typeof i?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function ft(t,e){return function(){return lt(this,t,e)}}function dt(t,e){return function(){return lt(this,t,e.apply(this,arguments))}}var pt=[null];function vt(t,e){this._groups=t,this._parents=e}function yt(){return new vt([[document.documentElement]],pt)}vt.prototype=yt.prototype={constructor:vt,select:function(t){"function"!=typeof t&&(t=c(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s,o,a=e[i],h=a.length,u=r[i]=new Array(h),l=0;l<h;++l)(s=a[l])&&(o=t.call(s,s.__data__,l,a))&&("__data__"in s&&(o.__data__=s.__data__),u[l]=o);return new vt(r,this._parents)},selectAll:function(t){var e;"function"!=typeof t&&(t=null==(e=t)?l:function(){return this.querySelectorAll(e)});for(var n=this._groups,r=n.length,i=[],s=[],o=0;o<r;++o)for(var a,h=n[o],u=h.length,c=0;c<u;++c)(a=h[c])&&(i.push(t.call(a,a.__data__,c,h)),s.push(a));return new vt(i,s)},filter:function(t){var e;"function"!=typeof t&&(e=t,t=function(){return this.matches(e)});for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s)for(var o,a=n[s],h=a.length,u=i[s]=[],c=0;c<h;++c)(o=a[c])&&t.call(o,o.__data__,c,a)&&u.push(o);return new vt(i,this._parents)},data:function(t,e){if(!t)return y=new Array(this.size()),c=-1,this.each((function(t){y[++c]=t})),y;var n,r=e?v:p,i=this._parents,s=this._groups;"function"!=typeof t&&(n=t,t=function(){return n});for(var o=s.length,a=new Array(o),h=new Array(o),u=new Array(o),c=0;c<o;++c){var l=i[c],f=s[c],d=f.length,y=t.call(l,l&&l.__data__,c,i),m=y.length,g=h[c]=new Array(m),x=a[c]=new Array(m);r(l,f,g,x,u[c]=new Array(d),y,e);for(var _,w,b=0,E=0;b<m;++b)if(_=g[b]){for(b>=E&&(E=b+1);!(w=x[E])&&++E<m;);_._next=w||null}}return(a=new vt(a,i))._enter=h,a._exit=u,a},enter:function(){return new vt(this._enter||this._groups.map(f),this._parents)},exit:function(){return new vt(this._exit||this._groups.map(f),this._parents)},join:function(t,e,n){var r=this.enter(),i=this,s=this.exit();return r="function"==typeof t?t(r):r.append(t+""),null!=e&&(i=e(i)),null==n?s.remove():n(s),r&&i?r.merge(i).order():i},merge:function(t){for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var h,u=e[a],c=n[a],l=u.length,f=o[a]=new Array(l),d=0;d<l;++d)(h=u[d]||c[d])&&(f[d]=h);for(;a<r;++a)o[a]=e[a];return new vt(o,this._parents)},order:function(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r,i=t[e],s=i.length-1,o=i[s];--s>=0;)(r=i[s])&&(o&&4^r.compareDocumentPosition(o)&&o.parentNode.insertBefore(r,o),o=r);return this},sort:function(t){function e(e,n){return e&&n?t(e.__data__,n.__data__):!e-!n}t||(t=y);for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o,a=n[s],h=a.length,u=i[s]=new Array(h),c=0;c<h;++c)(o=a[c])&&(u[c]=o);u.sort(e)}return new vt(i,this._parents).order()},call:function(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this},nodes:function(){var t=new Array(this.size()),e=-1;return this.each((function(){t[++e]=this})),t},node:function(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null},size:function(){var t=0;return this.each((function(){++t})),t},empty:function(){return!this.node()},each:function(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i,s=e[n],o=0,a=s.length;o<a;++o)(i=s[o])&&t.call(i,i.__data__,o,s);return this},attr:function(t,e){var n=x(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((null==e?n.local?w:_:"function"==typeof e?n.local?T:A:n.local?E:b)(n,e))},style:function(t,e,n){return arguments.length>1?this.each((null==e?N:"function"==typeof e?S:M)(t,e,null==n?"":n)):R(this.node(),t)},property:function(t,e){return arguments.length>1?this.each((null==e?C:"function"==typeof e?k:P)(t,e)):this.node()[t]},classed:function(t,e){var n=L(t+"");if(arguments.length<2){for(var r=D(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each(("function"==typeof e?B:e?O:U)(n,e))},text:function(t){return arguments.length?this.each(null==t?X:("function"==typeof t?H:F)(t)):this.node().textContent},html:function(t){return arguments.length?this.each(null==t?V:("function"==typeof t?Y:W)(t)):this.node().innerHTML},raise:function(){return this.each(G)},lower:function(){return this.each($)},append:function(t){var e="function"==typeof t?t:Z(t);return this.select((function(){return this.appendChild(e.apply(this,arguments))}))},insert:function(t,e){var n="function"==typeof t?t:Z(t),r=null==e?Q:"function"==typeof e?e:c(e);return this.select((function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)}))},remove:function(){return this.each(tt)},clone:function(t){return this.select(t?nt:et)},datum:function(t){return arguments.length?this.property("__data__",t):this.node().__data__},on:function(t,e,n){var r,i,s=at(t+""),o=s.length;if(!(arguments.length<2)){for(a=e?ut:ht,null==n&&(n=!1),r=0;r<o;++r)this.each(a(s[r],e,n));return this}var a=this.node().__on;if(a)for(var h,u=0,c=a.length;u<c;++u)for(r=0,h=a[u];r<o;++r)if((i=s[r]).type===h.type&&i.name===h.name)return h.value},dispatch:function(t,e){return this.each(("function"==typeof e?dt:ft)(t,e))}};var mt=function(t){return"string"==typeof t?new vt([[document.querySelector(t)]],[document.documentElement]):new vt([[t]],pt)},gt={value:function(){}};function xt(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r||/[\s.]/.test(t))throw new Error("illegal type: "+t);r[t]=[]}return new _t(r)}function _t(t){this._=t}function wt(t,e){return t.trim().split(/^|\s+/).map((function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}}))}function bt(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Et(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=gt,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}_t.prototype=xt.prototype={constructor:_t,on:function(t,e){var n,r=this._,i=wt(t+"",r),s=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++s<o;)if(n=(t=i[s]).type)r[n]=Et(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Et(r[n],t.name,null);return this}for(;++s<o;)if((n=(t=i[s]).type)&&(n=bt(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new _t(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),s=0;s<n;++s)i[s]=arguments[s+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=0,n=(r=this._[t]).length;s<n;++s)r[s].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};var At=xt,Tt=function(){for(var t,e=it;t=e.sourceEvent;)e=t;return e},zt=function(t,e){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,[(r=r.matrixTransform(t.getScreenCTM().inverse())).x,r.y]}var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]},Nt=function(t){var e=Tt();return e.changedTouches&&(e=e.changedTouches[0]),zt(t,e)},Mt=function(t,e,n){arguments.length<3&&(n=e,e=Tt().changedTouches);for(var r,i=0,s=e?e.length:0;i<s;++i)if((r=e[i]).identifier===n)return zt(t,r);return null};function St(){it.stopImmediatePropagation()}var Rt=function(){it.preventDefault(),it.stopImmediatePropagation()},Ct=function(t){var e=t.document.documentElement,n=mt(t).on("dragstart.drag",Rt,!0);"onselectstart"in e?n.on("selectstart.drag",Rt,!0):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")};var Pt=function(t){return function(){return t}};function kt(t,e,n,r,i,s,o,a,h,u){this.target=t,this.type=e,this.subject=n,this.identifier=r,this.active=i,this.x=s,this.y=o,this.dx=a,this.dy=h,this._=u}function Lt(){return!it.ctrlKey&&!it.button}function Dt(){return this.parentNode}function It(t){return null==t?{x:it.x,y:it.y}:t}function jt(){return navigator.maxTouchPoints||"ontouchstart"in this}kt.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};var qt=function(t){return function(){return t}},Ot=function(){return 1e-6*(Math.random()-.5)};function Ut(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s,o,a,h,u,c,l,f,d=t._root,p={data:r},v=t._x0,y=t._y0,m=t._x1,g=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((u=e>=(s=(v+m)/2))?v=s:m=s,(c=n>=(o=(y+g)/2))?y=o:g=o,i=d,!(d=d[l=c<<1|u]))return i[l]=p,t;if(a=+t._x.call(null,d.data),h=+t._y.call(null,d.data),e===a&&n===h)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(u=e>=(s=(v+m)/2))?v=s:m=s,(c=n>=(o=(y+g)/2))?y=o:g=o}while((l=c<<1|u)==(f=(h>=o)<<1|a>=s));return i[f]=d,i[l]=p,t}var Bt=function(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i};function Xt(t){return t[0]}function Ft(t){return t[1]}function Ht(t,e,n){var r=new Vt(null==e?Xt:e,null==n?Ft:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function Vt(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Wt(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Yt=Ht.prototype=Vt.prototype;Yt.copy=function(){var t,e,n=new Vt(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=Wt(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=Wt(e));return n},Yt.add=function(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return Ut(this.cover(e,n),e,n,t)},Yt.addAll=function(t){var e,n,r,i,s=t.length,o=new Array(s),a=new Array(s),h=1/0,u=1/0,c=-1/0,l=-1/0;for(n=0;n<s;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,a[n]=i,r<h&&(h=r),r>c&&(c=r),i<u&&(u=i),i>l&&(l=i));if(h>c||u>l)return this;for(this.cover(h,u).cover(c,l),n=0;n<s;++n)Ut(this,o[n],a[n],t[n]);return this},Yt.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var o,a,h=i-n,u=this._root;n>t||t>=i||r>e||e>=s;)switch(a=(e<r)<<1|t<n,(o=new Array(4))[a]=u,u=o,h*=2,a){case 0:i=n+h,s=r+h;break;case 1:n=i-h,s=r+h;break;case 2:i=n+h,r=s-h;break;case 3:n=i-h,r=s-h}this._root&&this._root.length&&(this._root=u)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this},Yt.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Yt.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Yt.find=function(t,e,n){var r,i,s,o,a,h,u,c=this._x0,l=this._y0,f=this._x1,d=this._y1,p=[],v=this._root;for(v&&p.push(new Bt(v,c,l,f,d)),null==n?n=1/0:(c=t-n,l=e-n,f=t+n,d=e+n,n*=n);h=p.pop();)if(!(!(v=h.node)||(i=h.x0)>f||(s=h.y0)>d||(o=h.x1)<c||(a=h.y1)<l))if(v.length){var y=(i+o)/2,m=(s+a)/2;p.push(new Bt(v[3],y,m,o,a),new Bt(v[2],i,m,y,a),new Bt(v[1],y,s,o,m),new Bt(v[0],i,s,y,m)),(u=(e>=m)<<1|t>=y)&&(h=p[p.length-1],p[p.length-1]=p[p.length-1-u],p[p.length-1-u]=h)}else{var g=t-+this._x.call(null,v.data),x=e-+this._y.call(null,v.data),_=g*g+x*x;if(_<n){var w=Math.sqrt(n=_);c=t-w,l=e-w,f=t+w,d=e+w,r=v.data}}return r},Yt.remove=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,s,o,a,h,u,c,l,f,d=this._root,p=this._x0,v=this._y0,y=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((u=s>=(a=(p+y)/2))?p=a:y=a,(c=o>=(h=(v+m)/2))?v=h:m=h,e=d,!(d=d[l=c<<1|u]))return this;if(!d.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,f=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[l]=i:delete e[l],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[f]=d:this._root=d),this):(this._root=i,this)},Yt.removeAll=function(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this},Yt.root=function(){return this._root},Yt.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Yt.visit=function(t){var e,n,r,i,s,o,a=[],h=this._root;for(h&&a.push(new Bt(h,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(h=e.node,r=e.x0,i=e.y0,s=e.x1,o=e.y1)&&h.length){var u=(r+s)/2,c=(i+o)/2;(n=h[3])&&a.push(new Bt(n,u,c,s,o)),(n=h[2])&&a.push(new Bt(n,r,c,u,o)),(n=h[1])&&a.push(new Bt(n,u,i,s,c)),(n=h[0])&&a.push(new Bt(n,r,i,u,c))}return this},Yt.visitAfter=function(t){var e,n=[],r=[];for(this._root&&n.push(new Bt(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var s,o=e.x0,a=e.y0,h=e.x1,u=e.y1,c=(o+h)/2,l=(a+u)/2;(s=i[0])&&n.push(new Bt(s,o,a,c,l)),(s=i[1])&&n.push(new Bt(s,c,a,h,l)),(s=i[2])&&n.push(new Bt(s,o,l,c,u)),(s=i[3])&&n.push(new Bt(s,c,l,h,u))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Yt.x=function(t){return arguments.length?(this._x=t,this):this._x},Yt.y=function(t){return arguments.length?(this._y=t,this):this._y};function Gt(){}function $t(t,e){var n=new Gt;if(t instanceof Gt)t.each((function(t,e){n.set(e,t)}));else if(Array.isArray(t)){var r,i=-1,s=t.length;if(null==e)for(;++i<s;)n.set(i,t[i]);else for(;++i<s;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}Gt.prototype=$t.prototype={constructor:Gt,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Jt=$t;function Kt(){}var Zt=Jt.prototype;function Qt(t,e){var n=new Kt;if(t instanceof Kt)t.each((function(t){n.add(t)}));else if(t){var r=-1,i=t.length;if(null==e)for(;++r<i;)n.add(t[r]);else for(;++r<i;)n.add(e(t[r],r,t))}return n}Kt.prototype=Qt.prototype={constructor:Kt,has:Zt.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Zt.remove,clear:Zt.clear,values:Zt.keys,size:Zt.size,empty:Zt.empty,each:Zt.each};function te(t){return t.index}function ee(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}var ne,re,ie=0,se=0,oe=0,ae=0,he=0,ue=0,ce="object"==typeof performance&&performance.now?performance:Date,le="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function fe(){return he||(le(de),he=ce.now()+ue)}function de(){he=0}function pe(){this._call=this._time=this._next=null}function ve(t,e,n){var r=new pe;return r.restart(t,e,n),r}function ye(){he=(ae=ce.now())+ue,ie=se=0;try{!function(){fe(),++ie;for(var t,e=ne;e;)(t=he-e._time)>=0&&e._call.call(null,t),e=e._next;--ie}()}finally{ie=0,function(){var t,e,n=ne,r=1/0;for(;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:ne=e);re=t,ge(r)}(),he=0}}function me(){var t=ce.now(),e=t-ae;e>1e3&&(ue-=e,ae=t)}function ge(t){ie||(se&&(se=clearTimeout(se)),t-he>24?(t<1/0&&(se=setTimeout(ye,t-ce.now()-ue)),oe&&(oe=clearInterval(oe))):(oe||(ae=ce.now(),oe=setInterval(me,1e3)),ie=1,le(ye)))}function xe(t){return t.x}function _e(t){return t.y}pe.prototype=ve.prototype={constructor:pe,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?fe():+n)+(null==e?0:+e),this._next||re===this||(re?re._next=this:ne=this,re=this),this._call=t,this._time=n,ge()},stop:function(){this._call&&(this._call=null,this._time=1/0,ge())}};var we=Math.PI*(3-Math.sqrt(5)),be=n(0),Ee={select:mt,event:it,drag:function(){var t,e,n,r,i=Lt,s=Dt,o=It,a=jt,h={},u=At("start","drag","end"),c=0,l=0;function f(t){t.on("mousedown.drag",d).filter(a).on("touchstart.drag",y).on("touchmove.drag",m).on("touchend.drag touchcancel.drag",g).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function d(){if(!r&&i.apply(this,arguments)){var o=x("mouse",s.apply(this,arguments),Nt,this,arguments);o&&(mt(it.view).on("mousemove.drag",p,!0).on("mouseup.drag",v,!0),Ct(it.view),St(),n=!1,t=it.clientX,e=it.clientY,o("start"))}}function p(){if(Rt(),!n){var r=it.clientX-t,i=it.clientY-e;n=r*r+i*i>l}h.mouse("drag")}function v(){var t,e,r,i;mt(it.view).on("mousemove.drag mouseup.drag",null),t=it.view,e=n,r=t.document.documentElement,i=mt(t).on("dragstart.drag",null),e&&(i.on("click.drag",Rt,!0),setTimeout((function(){i.on("click.drag",null)}),0)),"onselectstart"in r?i.on("selectstart.drag",null):(r.style.MozUserSelect=r.__noselect,delete r.__noselect),Rt(),h.mouse("end")}function y(){if(i.apply(this,arguments)){var t,e,n=it.changedTouches,r=s.apply(this,arguments),o=n.length;for(t=0;t<o;++t)(e=x(n[t].identifier,r,Mt,this,arguments))&&(St(),e("start"))}}function m(){var t,e,n=it.changedTouches,r=n.length;for(t=0;t<r;++t)(e=h[n[t].identifier])&&(Rt(),e("drag"))}function g(){var t,e,n=it.changedTouches,i=n.length;for(r&&clearTimeout(r),r=setTimeout((function(){r=null}),500),t=0;t<i;++t)(e=h[n[t].identifier])&&(St(),e("end"))}function x(t,e,n,r,i){var s,a,l,d=n(e,t),p=u.copy();if(ct(new kt(f,"beforestart",s,t,c,d[0],d[1],0,0,p),(function(){return null!=(it.subject=s=o.apply(r,i))&&(a=s.x-d[0]||0,l=s.y-d[1]||0,!0)})))return function o(u){var v,y=d;switch(u){case"start":h[t]=o,v=c++;break;case"end":delete h[t],--c;case"drag":d=n(e,t),v=c}ct(new kt(f,u,s,t,v,d[0]+a,d[1]+l,d[0]-y[0],d[1]-y[1],p),p.apply,p,[u,r,i])}}return f.filter=function(t){return arguments.length?(i="function"==typeof t?t:Pt(!!t),f):i},f.container=function(t){return arguments.length?(s="function"==typeof t?t:Pt(t),f):s},f.subject=function(t){return arguments.length?(o="function"==typeof t?t:Pt(t),f):o},f.touchable=function(t){return arguments.length?(a="function"==typeof t?t:Pt(!!t),f):a},f.on=function(){var t=u.on.apply(u,arguments);return t===u?f:t},f.clickDistance=function(t){return arguments.length?(l=(t=+t)*t,f):Math.sqrt(l)},f},forceLink:function(t){var e,n,r,i,s,o=te,a=function(t){return 1/Math.min(i[t.source.index],i[t.target.index])},h=qt(30),u=1;function c(r){for(var i=0,o=t.length;i<u;++i)for(var a,h,c,l,f,d,p,v=0;v<o;++v)h=(a=t[v]).source,l=(c=a.target).x+c.vx-h.x-h.vx||Ot(),f=c.y+c.vy-h.y-h.vy||Ot(),l*=d=((d=Math.sqrt(l*l+f*f))-n[v])/d*r*e[v],f*=d,c.vx-=l*(p=s[v]),c.vy-=f*p,h.vx+=l*(p=1-p),h.vy+=f*p}function l(){if(r){var a,h,u=r.length,c=t.length,l=Jt(r,o);for(a=0,i=new Array(u);a<c;++a)(h=t[a]).index=a,"object"!=typeof h.source&&(h.source=ee(l,h.source)),"object"!=typeof h.target&&(h.target=ee(l,h.target)),i[h.source.index]=(i[h.source.index]||0)+1,i[h.target.index]=(i[h.target.index]||0)+1;for(a=0,s=new Array(c);a<c;++a)h=t[a],s[a]=i[h.source.index]/(i[h.source.index]+i[h.target.index]);e=new Array(c),f(),n=new Array(c),d()}}function f(){if(r)for(var n=0,i=t.length;n<i;++n)e[n]=+a(t[n],n,t)}function d(){if(r)for(var e=0,i=t.length;e<i;++e)n[e]=+h(t[e],e,t)}return null==t&&(t=[]),c.initialize=function(t){r=t,l()},c.links=function(e){return arguments.length?(t=e,l(),c):t},c.id=function(t){return arguments.length?(o=t,c):o},c.iterations=function(t){return arguments.length?(u=+t,c):u},c.strength=function(t){return arguments.length?(a="function"==typeof t?t:qt(+t),f(),c):a},c.distance=function(t){return arguments.length?(h="function"==typeof t?t:qt(+t),d(),c):h},c},forceManyBody:function(){var t,e,n,r,i=qt(-30),s=1,o=1/0,a=.81;function h(r){var i,s=t.length,o=Ht(t,xe,_e).visitAfter(c);for(n=r,i=0;i<s;++i)e=t[i],o.visit(l)}function u(){if(t){var e,n,s=t.length;for(r=new Array(s),e=0;e<s;++e)n=t[e],r[n.index]=+i(n,e,t)}}function c(t){var e,n,i,s,o,a=0,h=0;if(t.length){for(i=s=o=0;o<4;++o)(e=t[o])&&(n=Math.abs(e.value))&&(a+=e.value,h+=n,i+=n*e.x,s+=n*e.y);t.x=i/h,t.y=s/h}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=r[e.data.index]}while(e=e.next)}t.value=a}function l(t,i,h,u){if(!t.value)return!0;var c=t.x-e.x,l=t.y-e.y,f=u-i,d=c*c+l*l;if(f*f/a<d)return d<o&&(0===c&&(d+=(c=Ot())*c),0===l&&(d+=(l=Ot())*l),d<s&&(d=Math.sqrt(s*d)),e.vx+=c*t.value*n/d,e.vy+=l*t.value*n/d),!0;if(!(t.length||d>=o)){(t.data!==e||t.next)&&(0===c&&(d+=(c=Ot())*c),0===l&&(d+=(l=Ot())*l),d<s&&(d=Math.sqrt(s*d)));do{t.data!==e&&(f=r[t.data.index]*n/d,e.vx+=c*f,e.vy+=l*f)}while(t=t.next)}}return h.initialize=function(e){t=e,u()},h.strength=function(t){return arguments.length?(i="function"==typeof t?t:qt(+t),u(),h):i},h.distanceMin=function(t){return arguments.length?(s=t*t,h):Math.sqrt(s)},h.distanceMax=function(t){return arguments.length?(o=t*t,h):Math.sqrt(o)},h.theta=function(t){return arguments.length?(a=t*t,h):Math.sqrt(a)},h},forceCenter:function(t,e){var n;function r(){var r,i,s=n.length,o=0,a=0;for(r=0;r<s;++r)o+=(i=n[r]).x,a+=i.y;for(o=o/s-t,a=a/s-e,r=0;r<s;++r)(i=n[r]).x-=o,i.y-=a}return null==t&&(t=0),null==e&&(e=0),r.initialize=function(t){n=t},r.x=function(e){return arguments.length?(t=+e,r):t},r.y=function(t){return arguments.length?(e=+t,r):e},r},forceSimulation:function(t){var e,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=Jt(),h=ve(c),u=At("tick","end");function c(){l(),u.call("tick",e),n<r&&(h.stop(),u.call("end",e))}function l(r){var h,u,c=t.length;void 0===r&&(r=1);for(var l=0;l<r;++l)for(n+=(s-n)*i,a.each((function(t){t(n)})),h=0;h<c;++h)null==(u=t[h]).fx?u.x+=u.vx*=o:(u.x=u.fx,u.vx=0),null==u.fy?u.y+=u.vy*=o:(u.y=u.fy,u.vy=0);return e}function f(){for(var e,n=0,r=t.length;n<r;++n){if((e=t[n]).index=n,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var i=10*Math.sqrt(n),s=n*we;e.x=i*Math.cos(s),e.y=i*Math.sin(s)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function d(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),f(),e={tick:l,restart:function(){return h.restart(c),e},stop:function(){return h.stop(),e},nodes:function(n){return arguments.length?(t=n,f(),a.each(d),e):t},alpha:function(t){return arguments.length?(n=+t,e):n},alphaMin:function(t){return arguments.length?(r=+t,e):r},alphaDecay:function(t){return arguments.length?(i=+t,e):+i},alphaTarget:function(t){return arguments.length?(s=+t,e):s},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},force:function(t,n){return arguments.length>1?(null==n?a.remove(t):a.set(t,d(n)),e):a.get(t)},find:function(e,n,r){var i,s,o,a,h,u=0,c=t.length;for(null==r?r=1/0:r*=r,u=0;u<c;++u)(o=(i=e-(a=t[u]).x)*i+(s=n-a.y)*s)<r&&(h=a,r=o);return h},on:function(t,n){return arguments.length>1?(u.on(t,n),e):u.on(t)}}}},Ae=function(){function t(e,n,r){var s=this;i()(this,t),h()(this,"drag",(function(t){t.x=Ee.event.x,t.y=Ee.event.y,s.simulation.alphaTarget(Object(be.r)(0,1,!0)),s.simulation.restart()})),this.data=e,this.wrapper=n,this.menu=r}return o()(t,[{key:"init",value:function(t,e){var n=this;this.svg=Ee.select(this.wrapper).append("svg").attr("width",t).attr("height",e),this.simulation=Ee.forceSimulation().force("link",Ee.forceLink().id((function(t){return t.index})).distance(Object(be.r)(1,e,!0)).strength(Object(be.r)(.04,.1,!0))).force("charge",Ee.forceManyBody()).force("center",Ee.forceCenter(t/2,e/2)),this.simulation.nodes(this.data.nodes),this.simulation.force("link").links(this.data.links),this.simulation.on("tick",(function(){n.nodes.attr("transform",(function(t){return"translate(".concat([t.x,t.y],")")}))})),this.nodes=this.svg.selectAll(".group-node").data(this.data.nodes).enter().append("g"),this[this.menu.current]()}},{key:"reset",value:function(){this.simulation.stop(),this.wrapper.innerHTML="",this.svg="",this.nodes=[],this.simulation="",this.init(window.innerWidth,window.innerHeight)}},{key:"appendNames",value:function(){this.nodes.append("text").attr("class","name").attr("font-size","11").attr("dx","-1em").attr("dy","-1em").attr("fill","#358a97").text((function(t){return t.name}))}},{key:"circle",value:function(){this.nodes.append("circle").attr("class","circle").attr("fill","#d9eff1").attr("stroke","#253c3e").attr("stroke-width","1.5").attr("r",(function(t){return t.weight/3})).call(Ee.drag().on("drag",this.drag))}},{key:"line",value:function(){this.nodes.append("line").attr("class","line").attr("x1","0").attr("y1","0").attr("x2",(function(t){return t.x})).attr("y2",(function(t){return t.y})).attr("stroke","#f9dd98").attr("stroke-width",(function(t){return t.weight/30})).attr("r",(function(t){return t.weight/5})).call(Ee.drag().on("drag",this.drag))}},{key:"polygon",value:function(){this.nodes.append("path").attr("d",(function(t){return"M ".concat(t.weight/5," ").concat(2*t.weight," L ").concat(t.x/4," ").concat(t.y/4," L ").concat(t.x/8," ").concat(t.weight/10," Z")})).attr("fill","rgba(255,205,85,0.7)").attr("stroke","black").attr("stroke-width",3).call(Ee.drag().on("drag",this.drag))}},{key:"rect",value:function(){this.nodes.append("rect").attr("x","0").attr("y","0").attr("width",(function(t){return t.weight/5})).attr("height",(function(t){return t.weight/2.5})).attr("fill","yellow").call(Ee.drag().on("drag",this.drag))}},{key:"heads",value:function(){this.nodes.append("image").attr("class","image").attr("xlink:href","/img/assets/sprites/head.png").attr("height",(function(t){return t.weight/2})).attr("width","100").call(Ee.drag().on("drag",this.drag))}}]),t}(),Te=new(function(){function t(){i()(this,t),this.options=["circle","line","polygon","rect","heads","randomize"],this.current=this.options[Object(be.r)(0,this.options.length-1)]}return o()(t,[{key:"init",value:function(t,e){var n=this;this.network=t;var r=document.createElement("ul");r.className="network-options",this.options.forEach((function(e){var i=document.createElement("li");i.innerHTML=e,"randomize"===e?(i.className="randomizer",i.onclick=function(){t.reset(n.current)}):n.optionsClickEvent(i,e),e===n.current&&(i.className="current",n.current=e),r.appendChild(i)})),e.appendChild(r)}},{key:"optionsClickEvent",value:function(t,e){var n=this;t.onclick=function(t){document.querySelector(".network-options").querySelector(".current").classList.remove("current"),t.target.classList.add("current"),n.current=e,n.network.reset()}}},{key:"getCurrent",value:function(){return this.current}}]),t}()),ze=document.getElementById("ddd-container"),Ne=document.createElement("section");ze.appendChild(Ne),Object(be.q)("/data/facebook/friends.json").then((function(t){t.nodes.forEach((function(t){t.weight=0})),t.links.forEach((function(e){t.nodes[e.source].weight++}));var e=new Ae(t,Ne,Te);Te.init(e,ze),e.init(window.innerWidth,window.innerHeight)})).catch((function(t){t&&console.error(t)}))},3:function(t,e){t.exports="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute float aAlpha;\n\nattribute vec2 aPositionCoord;\nattribute float aRotation;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying float vAlpha;\n\nvoid main(void){\n  float cosine = cos(aRotation);\n  float sine = sin(aRotation);\n\n  vec3 v;\n  v.x = aVertexPosition.x * cosine - aVertexPosition.y * sine;\n  v.y = aVertexPosition.x * sine + aVertexPosition.y * cosine;\n  v.z = 1.0;\n\n  // Move\n  v.xy += aPositionCoord;\n\n  gl_Position = vec4(projectionMatrix * v, 1.0);\n\n  vTextureCoord = aTextureCoord;\n  vAlpha = aAlpha;\n}"},4:function(t,e){t.exports="precision lowp float;\n\nvarying vec2 vTextureCoord;\nvarying float vAlpha;\n\nuniform sampler2D uImage;\n\nvoid main(void){\n  vec4 color = texture2D(uImage, vTextureCoord) * vAlpha;\n  if (color.a == 0.0) discard;\n  gl_FragColor = color;\n}"},5:function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t},t.exports.default=t.exports,t.exports.__esModule=!0}});