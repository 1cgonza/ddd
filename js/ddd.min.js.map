{"version":3,"sources":["webpack:///ddd.min.js","webpack:///webpack/bootstrap ed8cc56abf847508cb91","webpack:///./index.js","webpack:///./math/index.js","webpack:///./math/Point.js","webpack:///./math/Rectangle.js","webpack:///./math/Matrix.js","webpack:///./math/Vector.js","webpack:///./math/Transform.js","webpack:///./html/index.js","webpack:///./html/canvas.js","webpack:///./http/req.js","webpack:///./map/index.js","webpack:///./color.js","webpack:///./audio/index.js","webpack:///./webgl/index.js","webpack:///./webgl/Stage.js","webpack:///./webgl/Renderer.js","webpack:///./webgl/utils/RenderTarget.js","webpack:///./webgl/utils/ObjectRenderer.js","webpack:///./webgl/utils/Shader.js","webpack:///./webgl/shaders/particles.vs","webpack:///./webgl/shaders/particles.fs"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","global","_interopRequireWildcard","obj","__esModule","newObj","key","Object","prototype","hasOwnProperty","default","_math","math","_html","html","_req","req","_map","map","_color","color","_audio","audio","_webgl","webgl","DDD","assign","this","_interopRequireDefault","random","min","max","isFloat","Math","floor","sizeFromPercentage","percent","totalSize","getPercent","section","total","isPowerOfTwo","width","height","defineProperty","value","Vector","Matrix","Rectangle","Point","Transform","toRad","QUARTER_PI","TWO_PI","PI","undefined","_Point","_Point2","_Rectangle","_Rectangle2","_Matrix","_Matrix2","_Vector","_Vector2","_Transform","_Transform2","x","y","clone","copy","set","equals","a","b","d","tx","ty","toArray","transpose","out","array","Float32Array","apply","pos","newPos","applyInverse","translate","scale","rotate","angle","cos","sin","a1","c1","tx1","append","matrix","b1","d1","setTransform","pivotX","pivotY","scaleX","scaleY","rotation","sr","cr","prepend","invert","n","identity","z","setX","setY","setZ","add","v","addScalar","s","sub","subScalar","subVectors","multiply","multiplyScalar","isFinite","multiplyVectors","divide","divideScalar","lengthSq","length","sqrt","setLength","distanceTo","distanceToSquared","normalize","dx","dy","dz","limit","mult","reset","m11","m12","m21","m22","m0","m1","m2","m3","m4","m5","rad","translateAndRotate","sx","sy","transformPoint","px","py","yearsMenu","yearStart","yearEnd","current","clickEvent","callback","yearsContainer","document","createElement","currentYearBtn","style","zIndex","year","btn","label","createTextNode","className","appendChild","addEventListener","resetCurrent","old","target","classList","remove","base64","inputStr","b64","outputStr","i","enc3","enc4","byte1","charCodeAt","byte2","byte3","enc1","enc2","isNaN","charAt","canvas","_canvas","_canvas2","container","options","ctx","getContext","w","window","innerWidth","h","innerHeight","position","top","left","zi","css","font","center","json","DataRequest","image","o","overrideMimeType","getD","then","res","ret","data","catch","err","console","error","responseType","_typeof","Symbol","iterator","constructor","XMLHttpRequest","abort","JSON","parse","displayProgress","loadingEle","opacity","loadingWrapper","msg","querySelector","innerText","loadingMsg","updateProgress","event","lengthComputable","progressBar","progress","insertBefore","onprogress","hideProgress","hasLoading","display","url","body","firstLoadingEle","Promise","resolve","reject","open","onloadstart","onloadend","onload","status","response","statusText","onerror","send","Map","config","zoom","lon","lat","hasCenter","updateSize","stageWidth","stageCenterY","zoomX","zoomY","zoomRad","newCenter","convertCoordinates","latRad","mercatorN","log","tan","rgbToHex","r","g","toString","slice","hexToRgb","hex","shorthandRegex","replace","result","exec","parseInt","convertAlpha","processingAlpha","avg","cssA","getRGBA","Audio","audios","cb","finishedLoading","arrayBuffer","name","onSucess","buffer","src","createBufferSource","retAudios","checkLoaded","onError","decodeAudioData","bind","AudioContext","webkitAudioContext","keys","source","connect","gainNode","destination","Webgl","Stage","_Stage","_Stage2","_Renderer","_Renderer2","imgData","renderer","batchSize","children","texture","loadImg","setBatchSize","maxBatchSize","maxSize","renderWebGL","currentRenderer","render","bindTexture","gl","glTexture","createTexture","TEXTURE_2D","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","texImage2D","RGBA","UNSIGNED_BYTE","img","texParameteri","TEXTURE_MAG_FILTER","LINEAR","mipmap","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_LINEAR","generateMipmap","TEXTURE_WRAP_S","REPEAT","TEXTURE_WRAP_T","CLAMP_TO_EDGE","Image","imgLoaded","naturalWidth","naturalHeight","frames","frame","push","uvs","particle","alpha","_RenderTarget","_RenderTarget2","_ObjectRenderer","_ObjectRenderer2","Renderer","canvasOptions","ctxOptions","disable","DEPTH_TEST","CULL_FACE","enable","BLEND","renderTarget","resize","object","viewport","RenderTarget","size","projectionMatrix","pm","_Shader","_Shader2","ObjectRenderer","start","shader","properties","attribute","attributes","aVertexPosition","aPositionCoord","aRotation","aTextureCoord","aAlpha","enableVertexAttribArray","uniformMatrix3fv","uniforms","_location","initBuffers","property","vertexAttribPointer","FLOAT","stride","offset","updateData","bufferSubData","ARRAY_BUFFER","drawElements","TRIANGLES","UNSIGNED_SHORT","dynamicOffset","bindBuffer","createBuffer","bufferData","DYNAMIC_DRAW","numIndices","indices","Uint16Array","j","ELEMENT_ARRAY_BUFFER","STATIC_DRAW","amount","textures","_particles","_particles2","_particles3","_particles4","Shader","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","deleteShader","useProgram","cacheUniformLocations","cacheAttributeLocations","getUniformLocation","getAttribLocation"],"mappings":"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","file":"ddd.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {'use strict';\n\t\n\tvar _math = __webpack_require__(1);\n\t\n\tvar math = _interopRequireWildcard(_math);\n\t\n\tvar _html = __webpack_require__(7);\n\t\n\tvar html = _interopRequireWildcard(_html);\n\t\n\tvar _req = __webpack_require__(9);\n\t\n\tvar req = _interopRequireWildcard(_req);\n\t\n\tvar _map = __webpack_require__(10);\n\t\n\tvar map = _interopRequireWildcard(_map);\n\t\n\tvar _color = __webpack_require__(11);\n\t\n\tvar color = _interopRequireWildcard(_color);\n\t\n\tvar _audio = __webpack_require__(12);\n\t\n\tvar audio = _interopRequireWildcard(_audio);\n\t\n\tvar _webgl = __webpack_require__(13);\n\t\n\tvar webgl = _interopRequireWildcard(_webgl);\n\t\n\tfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\t\n\tglobal.DDD = Object.assign(math, html, map, req, color, audio, webgl);\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Vector = exports.Matrix = exports.Rectangle = exports.Point = exports.Transform = exports.toRad = exports.QUARTER_PI = exports.TWO_PI = exports.PI = undefined;\n\texports.random = random;\n\texports.sizeFromPercentage = sizeFromPercentage;\n\texports.getPercent = getPercent;\n\texports.isPowerOfTwo = isPowerOfTwo;\n\t\n\tvar _Point = __webpack_require__(2);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tvar _Rectangle = __webpack_require__(3);\n\t\n\tvar _Rectangle2 = _interopRequireDefault(_Rectangle);\n\t\n\tvar _Matrix = __webpack_require__(4);\n\t\n\tvar _Matrix2 = _interopRequireDefault(_Matrix);\n\t\n\tvar _Vector = __webpack_require__(5);\n\t\n\tvar _Vector2 = _interopRequireDefault(_Vector);\n\t\n\tvar _Transform = __webpack_require__(6);\n\t\n\tvar _Transform2 = _interopRequireDefault(_Transform);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar PI = exports.PI = Math.PI;\n\tvar TWO_PI = exports.TWO_PI = PI * 2;\n\tvar QUARTER_PI = exports.QUARTER_PI = PI / 4;\n\tvar toRad = exports.toRad = PI / 180;\n\t\n\tfunction random(min, max, isFloat) {\n\t  var random = Math.floor(Math.random() * (max - min)) + min;\n\t\n\t  if (isFloat) {\n\t    random = Math.random() * (max - min) + min;\n\t  }\n\t\n\t  return random;\n\t};\n\t\n\tfunction sizeFromPercentage(percent, totalSize) {\n\t  return percent / 100 * totalSize;\n\t}\n\t\n\tfunction getPercent(section, total) {\n\t  return section / total * 100;\n\t}\n\t\n\tfunction isPowerOfTwo(width, height) {\n\t  return width > 0 && (width & width - 1) === 0 && height > 0 && (height & height - 1) === 0;\n\t}\n\t\n\texports.Transform = _Transform2.default;\n\texports.Point = _Point2.default;\n\texports.Rectangle = _Rectangle2.default;\n\texports.Matrix = _Matrix2.default;\n\texports.Vector = _Vector2.default;\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar Point = function Point(x, y) {\n\t  this.x = x || 0;\n\t  this.y = y || 0;\n\t};\n\t\n\texports.default = Point;\n\t\n\t\n\tPoint.prototype.clone = function () {\n\t  return new Point(this.x, this.y);\n\t};\n\t\n\tPoint.prototype.copy = function (p) {\n\t  this.set(p.x, p.y);\n\t};\n\t\n\tPoint.prototype.equals = function (p) {\n\t  return p.x === this.x && p.y === this.y;\n\t};\n\t\n\tPoint.prototype.set = function (x, y) {\n\t  this.x = x || 0;\n\t  this.y = y || y !== 0 ? this.x : 0;\n\t};\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\tvar Rectangle = function Rectangle(x, y, width, height) {\n\t  this.x = x || 0;\n\t  this.y = y || 0;\n\t  this.width = width || 0;\n\t  this.height = height || 0;\n\t};\n\t\n\texports.default = Rectangle;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Point = __webpack_require__(2);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Matrix = function Matrix(a, b, c, d, tx, ty) {\n\t  this.a = a || 1;\n\t  this.b = b || 0;\n\t  this.c = c || 0;\n\t  this.d = d || 1;\n\t  this.tx = tx || 0;\n\t  this.ty = ty || 0;\n\t};\n\t\n\texports.default = Matrix;\n\t\n\t\n\tMatrix.prototype.toArray = function (transpose, out) {\n\t  if (!this.array) {\n\t    this.array = new Float32Array(9);\n\t  }\n\t\n\t  var array = out || this.array;\n\t\n\t  if (transpose) {\n\t    array[0] = this.a;\n\t    array[1] = this.b;\n\t    array[2] = 0;\n\t    array[3] = this.c;\n\t    array[4] = this.d;\n\t    array[5] = 0;\n\t    array[6] = this.tx;\n\t    array[7] = this.ty;\n\t    array[8] = 1;\n\t  } else {\n\t    array[0] = this.a;\n\t    array[1] = this.c;\n\t    array[2] = this.tx;\n\t    array[3] = this.b;\n\t    array[4] = this.d;\n\t    array[5] = this.ty;\n\t    array[6] = 0;\n\t    array[7] = 0;\n\t    array[8] = 1;\n\t  }\n\t\n\t  return array;\n\t};\n\t\n\tMatrix.prototype.apply = function (pos, newPos) {\n\t  newPos = newPos || new _Point2.default();\n\t\n\t  var x = pos.x;\n\t  var y = pos.y;\n\t\n\t  newPos.x = this.a * x + this.c * y + this.tx;\n\t  newPos.y = this.b * x + this.d * y + this.ty;\n\t\n\t  return newPos;\n\t};\n\t\n\tMatrix.prototype.applyInverse = function (pos, newPos) {\n\t  newPos = newPos || new _Point2.default();\n\t\n\t  var id = 1 / (this.a * this.d + this.c * -this.b);\n\t\n\t  var x = pos.x;\n\t  var y = pos.y;\n\t\n\t  newPos.x = this.d * id * x + -this.c * id * y + (this.ty * this.c - this.tx * this.d) * id;\n\t  newPos.y = this.a * id * y + -this.b * id * x + (-this.ty * this.a + this.tx * this.b) * id;\n\t\n\t  return newPos;\n\t};\n\t\n\tMatrix.prototype.translate = function (x, y) {\n\t  this.tx += x;\n\t  this.ty += y;\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.scale = function (x, y) {\n\t  this.a *= x;\n\t  this.d *= y;\n\t  this.c *= x;\n\t  this.b *= y;\n\t  this.tx *= x;\n\t  this.ty *= y;\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.rotate = function (angle) {\n\t  var cos = Math.cos(angle);\n\t  var sin = Math.sin(angle);\n\t\n\t  var a1 = this.a;\n\t  var c1 = this.c;\n\t  var tx1 = this.tx;\n\t\n\t  this.a = a1 * cos - this.b * sin;\n\t  this.b = a1 * sin + this.b * cos;\n\t  this.c = c1 * cos - this.d * sin;\n\t  this.d = c1 * sin + this.d * cos;\n\t  this.tx = tx1 * cos - this.ty * sin;\n\t  this.ty = tx1 * sin + this.ty * cos;\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.append = function (matrix) {\n\t  var a1 = this.a;\n\t  var b1 = this.b;\n\t  var c1 = this.c;\n\t  var d1 = this.d;\n\t\n\t  this.a = matrix.a * a1 + matrix.b * c1;\n\t  this.b = matrix.a * b1 + matrix.b * d1;\n\t  this.c = matrix.c * a1 + matrix.d * c1;\n\t  this.d = matrix.c * b1 + matrix.d * d1;\n\t\n\t  this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n\t  this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.setTransform = function (x, y, pivotX, pivotY, scaleX, scaleY, rotation) {\n\t  var sr = Math.sin(rotation);\n\t  var cr = Math.cos(rotation);\n\t\n\t  var a = cr * scaleX;\n\t  var b = sr * scaleX;\n\t  var c = -sr * scaleY;\n\t  var d = cr * scaleY;\n\t\n\t  this.a = a + c;\n\t  this.b = b + d;\n\t  this.c = a + c;\n\t  this.d = b + d;\n\t\n\t  this.tx = x + (pivotX * a + pivotY * c);\n\t  this.ty = y + (pivotX * b + pivotY * d);\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.prepend = function (matrix) {\n\t  var tx1 = this.tx;\n\t\n\t  if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\n\t    var a1 = this.a;\n\t    var c1 = this.c;\n\t    this.a = a1 * matrix.a + this.b * matrix.c;\n\t    this.b = a1 * matrix.b + this.b * matrix.d;\n\t    this.c = c1 * matrix.a + this.d * matrix.c;\n\t    this.d = c1 * matrix.b + this.d * matrix.d;\n\t  }\n\t\n\t  this.tx = tx1 * matrix.a + this.ty * matrix.c + matrix.tx;\n\t  this.ty = tx1 * matrix.b + this.ty * matrix.d + matrix.ty;\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.invert = function () {\n\t  var a1 = this.a;\n\t  var b1 = this.b;\n\t  var c1 = this.c;\n\t  var d1 = this.d;\n\t  var tx1 = this.tx;\n\t  var n = a1 * d1 - b1 * c1;\n\t\n\t  this.a = d1 / n;\n\t  this.b = -b1 / n;\n\t  this.c = -c1 / n;\n\t  this.d = a1 / n;\n\t  this.tx = (c1 * this.ty - d1 * tx1) / n;\n\t  this.ty = -(a1 * this.ty - b1 * tx1) / n;\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.identity = function () {\n\t  this.a = 1;\n\t  this.b = 0;\n\t  this.c = 0;\n\t  this.d = 1;\n\t  this.tx = 0;\n\t  this.ty = 0;\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.clone = function () {\n\t  var matrix = new Matrix();\n\t  matrix.a = this.a;\n\t  matrix.b = this.b;\n\t  matrix.c = this.c;\n\t  matrix.d = this.d;\n\t  matrix.tx = this.tx;\n\t  matrix.ty = this.ty;\n\t\n\t  return matrix;\n\t};\n\t\n\tMatrix.prototype.copy = function (matrix) {\n\t  matrix.a = this.a;\n\t  matrix.b = this.b;\n\t  matrix.c = this.c;\n\t  matrix.d = this.d;\n\t  matrix.tx = this.tx;\n\t  matrix.ty = this.ty;\n\t\n\t  return matrix;\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t// From Three.js Vector3\n\t// https://github.com/mrdoob/three.js/blob/cf584a60bdfd24c42eaa81d484533364742bda44/src/math/Vector3.js\n\t// All credits to them\n\t\n\tvar Vector = function Vector(x, y, z) {\n\t  this.x = x || 0;\n\t  this.y = y || 0;\n\t  this.z = z || 0;\n\t};\n\t\n\texports.default = Vector;\n\t\n\t\n\tVector.prototype.set = function (x, y, z) {\n\t  this.x = x;\n\t  this.y = y;\n\t  this.z = z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.setX = function (x) {\n\t  this.x = x;\n\t  return this;\n\t};\n\t\n\tVector.prototype.setY = function (y) {\n\t  this.y = y;\n\t  return this;\n\t};\n\t\n\tVector.prototype.setZ = function (z) {\n\t  this.z = z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.add = function (v) {\n\t  this.x += v.x;\n\t  this.y += v.y;\n\t  this.z += v.z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.addScalar = function (s) {\n\t  this.x += s;\n\t  this.y += s;\n\t  this.z += s;\n\t  return this;\n\t};\n\t\n\tVector.prototype.sub = function (v) {\n\t  this.x -= v.x;\n\t  this.y -= v.y;\n\t  this.z -= v.z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.subScalar = function (s) {\n\t  this.x -= s;\n\t  this.y -= s;\n\t  this.z -= s;\n\t  return this;\n\t};\n\t\n\tVector.prototype.subVectors = function (a, b) {\n\t  this.x = a.x - b.x;\n\t  this.y = a.y - b.y;\n\t  this.z = a.z - b.z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.multiply = function (v) {\n\t  this.x *= v.x;\n\t  this.y *= v.y;\n\t  this.z *= v.z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.multiplyScalar = function (s) {\n\t  if (isFinite(s)) {\n\t    this.x *= s;\n\t    this.y *= s;\n\t    this.z *= s;\n\t  } else {\n\t    this.x = 0;\n\t    this.y = 0;\n\t    this.z = 0;\n\t  }\n\t  return this;\n\t};\n\t\n\tVector.prototype.multiplyVectors = function (a, b) {\n\t  this.x = a.x * b.x;\n\t  this.y = a.y * b.y;\n\t  this.z = a.z * b.z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.divide = function (v) {\n\t  this.x /= v.x;\n\t  this.y /= v.y;\n\t  this.z /= v.z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.divideScalar = function (s) {\n\t  return this.multiplyScalar(1 / s);\n\t};\n\t\n\tVector.prototype.lengthSq = function () {\n\t  return this.x * this.x + this.y * this.y + this.z * this.z;\n\t};\n\t\n\tVector.prototype.length = function () {\n\t  return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n\t};\n\t\n\tVector.prototype.setLength = function (length) {\n\t  return this.multiplyScalar(length / this.length());\n\t};\n\t\n\tVector.prototype.distanceTo = function (v) {\n\t  return Math.sqrt(this.distanceToSquared(v));\n\t};\n\t\n\tVector.prototype.normalize = function () {\n\t  return this.divideScalar(this.length());\n\t};\n\t\n\tVector.prototype.distanceToSquared = function (v) {\n\t  var dx = this.x - v.x;\n\t  var dy = this.y - v.y;\n\t  var dz = this.z - v.z;\n\t  return dx * dx + dy * dy + dz * dz;\n\t};\n\t\n\tVector.prototype.limit = function (max) {\n\t  if (this.lengthSq() > max * max) {\n\t    this.normalize();\n\t    this.mult(max);\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tVector.prototype.copy = function (v) {\n\t  this.x = v.x;\n\t  this.y = v.y;\n\t  this.z = v.z;\n\t  return this;\n\t};\n\n/***/ },\n/* 6 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t// Last updated November 2011\n\t// By Simon Sarris\n\t// www.simonsarris.com\n\t// sarris@acm.org\n\t//\n\t// Free to use and distribute at will\n\t// So long as you are nice to people, etc\n\t\n\t// Simple class for keeping track of the current transformation matrix\n\t\n\t// For instance:\n\t//    var t = new Transform();\n\t//    t.rotate(5);\n\t//    var m = t.m;\n\t//    ctx.setTransform(m[0], m[1], m[2], m[3], m[4], m[5]);\n\t\n\t// Is equivalent to:\n\t//    ctx.rotate(5);\n\t\n\t// But now you can retrieve it :)\n\t\n\t// Remember that this does not account for any CSS transforms applied to the canvas\n\t\n\tvar Transform = function Transform() {\n\t  this.reset();\n\t};\n\t\n\texports.default = Transform;\n\t\n\t\n\tTransform.prototype.reset = function () {\n\t  this.m = [1, 0, 0, 1, 0, 0];\n\t};\n\t\n\tTransform.prototype.multiply = function (matrix) {\n\t  var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n\t  var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n\t\n\t  var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n\t  var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n\t\n\t  var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n\t  var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n\t\n\t  this.m[0] = m11;\n\t  this.m[1] = m12;\n\t  this.m[2] = m21;\n\t  this.m[3] = m22;\n\t  this.m[4] = dx;\n\t  this.m[5] = dy;\n\t};\n\t\n\tTransform.prototype.invert = function () {\n\t  var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n\t  var m0 = this.m[3] * d;\n\t  var m1 = -this.m[1] * d;\n\t  var m2 = -this.m[2] * d;\n\t  var m3 = this.m[0] * d;\n\t  var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n\t  var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n\t  this.m[0] = m0;\n\t  this.m[1] = m1;\n\t  this.m[2] = m2;\n\t  this.m[3] = m3;\n\t  this.m[4] = m4;\n\t  this.m[5] = m5;\n\t};\n\t\n\tTransform.prototype.rotate = function (rad) {\n\t  var c = Math.cos(rad);\n\t  var s = Math.sin(rad);\n\t  var m11 = this.m[0] * c + this.m[2] * s;\n\t  var m12 = this.m[1] * c + this.m[3] * s;\n\t  var m21 = this.m[0] * -s + this.m[2] * c;\n\t  var m22 = this.m[1] * -s + this.m[3] * c;\n\t  this.m[0] = m11;\n\t  this.m[1] = m12;\n\t  this.m[2] = m21;\n\t  this.m[3] = m22;\n\t};\n\t\n\tTransform.prototype.translate = function (x, y) {\n\t  this.m[4] += this.m[0] * x + this.m[2] * y;\n\t  this.m[5] += this.m[1] * x + this.m[3] * y;\n\t};\n\t\n\tTransform.prototype.translateAndRotate = function (x, y, rad) {\n\t  var c = Math.cos(rad);\n\t  var s = Math.sin(rad);\n\t  var m11 = this.m[0] * c + this.m[2] * s;\n\t  var m12 = this.m[1] * c + this.m[3] * s;\n\t  var m21 = this.m[0] * -s + this.m[2] * c;\n\t  var m22 = this.m[1] * -s + this.m[3] * c;\n\t  this.m[4] += this.m[0] * x + this.m[2] * y;\n\t  this.m[5] += this.m[1] * x + this.m[3] * y;\n\t  this.m[0] = m11;\n\t  this.m[1] = m12;\n\t  this.m[2] = m21;\n\t  this.m[3] = m22;\n\t};\n\t\n\tTransform.prototype.scale = function (sx, sy) {\n\t  this.m[0] *= sx;\n\t  this.m[1] *= sx;\n\t  this.m[2] *= sy;\n\t  this.m[3] *= sy;\n\t};\n\t\n\tTransform.prototype.transformPoint = function (px, py) {\n\t  var x = px;\n\t  var y = py;\n\t  px = x * this.m[0] + y * this.m[2] + this.m[4];\n\t  py = x * this.m[1] + y * this.m[3] + this.m[5];\n\t  return [px, py];\n\t};\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.canvas = undefined;\n\texports.yearsMenu = yearsMenu;\n\texports.resetCurrent = resetCurrent;\n\texports.base64 = base64;\n\t\n\tvar _canvas = __webpack_require__(8);\n\t\n\tvar _canvas2 = _interopRequireDefault(_canvas);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.canvas = _canvas2.default;\n\t\n\t/**\n\t * @param {Number}    yearStart   First menu item\n\t * @param {Number}    yearEnd     Last menu item\n\t * @param {Number}    current     Default menu item to start with 'current' class\n\t * @param {Callback}  clickEvent  Name of the function to process the click events\n\t * @param {Callback}  callback    Name of the function for when the menu is ready\n\t */\n\t\n\tfunction yearsMenu(yearStart, yearEnd, current, clickEvent, callback) {\n\t  var yearsContainer = document.createElement('ul');\n\t  var currentYearBtn = '';\n\t  yearsContainer.id = 'years';\n\t  yearsContainer.style.zIndex = 99999;\n\t\n\t  for (var year = yearStart; year <= yearEnd; year++) {\n\t    var btn = document.createElement('li');\n\t    var label = document.createTextNode(year);\n\t\n\t    if (year === current) {\n\t      btn.className = 'current';\n\t      currentYearBtn = btn;\n\t    }\n\t\n\t    btn.appendChild(label);\n\t    yearsContainer.appendChild(btn);\n\t    btn.addEventListener('click', clickEvent, false);\n\t  }\n\t  callback(yearsContainer, currentYearBtn);\n\t}\n\t\n\tfunction resetCurrent(old, target, className) {\n\t  className = className || 'current';\n\t\n\t  if (old) {\n\t    old.classList.remove(className);\n\t  }\n\t  target.classList.add(className);\n\t}\n\t\n\t// This encoding function is from Philippe Tenenhaus's example at http://www.philten.com/us-xmlhttprequest-image/\n\tfunction base64(inputStr) {\n\t  var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\t  var outputStr = '';\n\t  var i = 0;\n\t\n\t  while (i < inputStr.length) {\n\t    //all three \"& 0xff\" added below are there to fix a known bug\n\t    //with bytes returned by xhr.responseText\n\t    var byte1 = inputStr.charCodeAt(i++) & 0xff;\n\t    var byte2 = inputStr.charCodeAt(i++) & 0xff;\n\t    var byte3 = inputStr.charCodeAt(i++) & 0xff;\n\t\n\t    var enc1 = byte1 >> 2;\n\t    var enc2 = (byte1 & 3) << 4 | byte2 >> 4;\n\t\n\t    var enc3;\n\t    var enc4;\n\t    if (isNaN(byte2)) {\n\t      enc3 = enc4 = 64;\n\t    } else {\n\t      enc3 = (byte2 & 15) << 2 | byte3 >> 6;\n\t      if (isNaN(byte3)) {\n\t        enc4 = 64;\n\t      } else {\n\t        enc4 = byte3 & 63;\n\t      }\n\t    }\n\t\n\t    outputStr += b64.charAt(enc1) + b64.charAt(enc2) + b64.charAt(enc3) + b64.charAt(enc4);\n\t  }\n\t\n\t  return outputStr;\n\t}\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\texports.default = function (container, options) {\n\t  var canvas = document.createElement('canvas');\n\t  var ctx = canvas.getContext('2d');\n\t\n\t  options = options || {};\n\t\n\t  canvas.width = options.w || window.innerWidth;\n\t  canvas.height = options.h || window.innerHeight;\n\t\n\t  canvas.style.position = options.position || 'absolute';\n\t  canvas.style.top = options.top || 0;\n\t  canvas.style.left = options.left || 0;\n\t  canvas.style.zIndex = options.zi || 9;\n\t\n\t  if (options.css) {\n\t    for (var key in options.css) {\n\t      canvas.style[key] = options.css[key];\n\t    }\n\t  }\n\t\n\t  ctx.font = options.font || '12px Inconsolata';\n\t\n\t  if (container) {\n\t    container.appendChild(canvas);\n\t  }\n\t\n\t  return {\n\t    container: container,\n\t    canvas: canvas,\n\t    w: canvas.width,\n\t    h: canvas.height,\n\t    ctx: ctx,\n\t    center: {\n\t      x: canvas.width / 2,\n\t      y: canvas.height / 2\n\t    }\n\t  };\n\t};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\texports.json = json;\n\texports.image = image;\n\texports.audio = audio;\n\tfunction json(options) {\n\t  var req = new DataRequest();\n\t  return req.json(options);\n\t};\n\t\n\tfunction image(options) {\n\t  var o = new DataRequest();\n\t  o.req.overrideMimeType('text/plain; charset=x-user-defined');\n\t\n\t  return o.getD(options).then(function (res) {\n\t    if (res.ret !== undefined) {\n\t      return res;\n\t    } else {\n\t      return res.data;\n\t    }\n\t  }).catch(function (err) {\n\t    console.error(err);\n\t  });\n\t};\n\t\n\tfunction audio(options) {\n\t  var o = new DataRequest();\n\t  o.req.responseType = 'arraybuffer';\n\t\n\t  return o.getD(options).then(function (res) {\n\t    return res;\n\t  }).catch(function (err) {\n\t    console.error('Error fetching audio file', err);\n\t  });\n\t};\n\t\n\tvar DataRequest = function DataRequest() {\n\t  this.req = new XMLHttpRequest();\n\t};\n\t\n\texports.DataRequest = DataRequest;\n\t\n\t\n\tDataRequest.prototype.abort = function () {\n\t  this.req.abort();\n\t};\n\t\n\tDataRequest.prototype.json = function (options) {\n\t  this.req.overrideMimeType('application/json');\n\t\n\t  return this.getD(options).then(function (res) {\n\t    if (res.ret !== undefined) {\n\t      res.data = JSON.parse(res.data);\n\t      return res;\n\t    } else {\n\t      return JSON.parse(res.data);\n\t    }\n\t  }).catch(function (err) {\n\t    console.error('Error in data request, reason:', err);\n\t  });\n\t};\n\t\n\tDataRequest.prototype.getD = function (options) {\n\t  if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n\t    if (!options.url) {\n\t      console.error('The request did not receive a url, instead got', options.url);\n\t      return;\n\t    }\n\t  } else if (typeof options === 'string' && options.length > 0) {\n\t    options = {\n\t      url: options\n\t    };\n\t  }\n\t\n\t  var msg;\n\t  var progress;\n\t  var progressBar = false;\n\t  var req = this.req;\n\t  var loadingMsg = options.loadingMsg || 'Loading';\n\t  var container = options.container || document.body;\n\t\n\t  var loadingWrapper = container.querySelector('.loading');\n\t\n\t  if (!loadingWrapper) {\n\t    loadingWrapper = document.createElement('div');\n\t    loadingWrapper.className = 'loading';\n\t    container.appendChild(loadingWrapper);\n\t  }\n\t\n\t  var hasLoading = !!options.loadingEle;\n\t  var loadingEle = hasLoading ? options.loadingEle : null;\n\t\n\t  if (!loadingEle) {\n\t    var firstLoadingEle = container.querySelector('.loading-ele');\n\t    loadingEle = document.createElement('div');\n\t    loadingEle.className = 'loadingEle';\n\t\n\t    if (firstLoadingEle) {\n\t      loadingWrapper.insertBefore(firstLoadingEle, loadingEle);\n\t    } else {\n\t      loadingWrapper.appendChild(loadingEle);\n\t    }\n\t  }\n\t\n\t  function displayProgress() {\n\t    loadingEle.style.opacity = 1;\n\t    loadingWrapper.style.zIndex = 9;\n\t\n\t    msg = loadingEle.querySelector('.loading-msg');\n\t    if (!msg) {\n\t      msg = document.createElement('p');\n\t      msg.className = 'loading-msg';\n\t      msg.innerText = loadingMsg;\n\t      loadingEle.appendChild(msg);\n\t    };\n\t  }\n\t\n\t  function updateProgress(event) {\n\t    if (event.lengthComputable) {\n\t      if (!progressBar) {\n\t        // console.log(loadingEle)\n\t        progress = loadingEle.querySelector('.progress');\n\t\n\t        if (!progress) {\n\t          progress = document.createElement('progress');\n\t          progress.className = 'progress';\n\t          progress.style.zIndex = 0;\n\t          progress.max = 100;\n\t          progress.value = 0;\n\t          loadingEle.insertBefore(progress, msg);\n\t          progressBar = true;\n\t        }\n\t      }\n\t      var value = event.loaded / event.total * 100;\n\t      progress.value = value;\n\t      msg.innerText = Math.floor(value) + '%' + '\\n' + loadingMsg;\n\t    } else {\n\t      // progress = document.createElement('div');\n\t      // progress.className = 'no-progress';\n\t      // loading.insertBefore(progress, msg);\n\t      req.onprogress = null;\n\t    }\n\t  }\n\t\n\t  function hideProgress() {\n\t    if (!hasLoading) {\n\t      loadingEle.style.display = 'none';\n\t    }\n\t    loadingWrapper.style.zIndex = 0;\n\t  }\n\t\n\t  return new Promise(function (resolve, reject) {\n\t    req.open('GET', options.url, true);\n\t    req.onloadstart = displayProgress;\n\t    req.onprogress = updateProgress;\n\t    req.onloadend = hideProgress;\n\t\n\t    req.onload = function () {\n\t      if (req.status === 200) {\n\t        resolve({ data: req.response, ret: options.ret });\n\t      } else {\n\t        reject(req.statusText);\n\t      }\n\t    };\n\t    req.onerror = function () {\n\t      reject('Network Error');\n\t    };\n\t\n\t    req.send(null);\n\t  });\n\t};\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Map = undefined;\n\t\n\tvar _math = __webpack_require__(1);\n\t\n\t/**\n\t * Create a new map instance\n\t *\n\t * USAGE: var map = new DDD.Map({zoom: #, width: #, height: #, center: {lon: #, lat: #}});\n\t *\n\t * @param {Object} config             An object with the configuration options\n\t * @param {Number} config.zoom        The map zoom\n\t * @param {Number} config.width       The width of the map container\n\t * @param {Number} config.height      The height of the map container\n\t * @param {Object} config.center      Object with the longitude and latitude options for the center of the map\n\t * @param {Number} config.center.lon  Map center longitude\n\t * @param {Number} config.center.lat  Map center latitude\n\t */\n\tvar Map = function Map(config) {\n\t  var w = config.width || window.innerWidth;\n\t  var h = config.height || window.innerHeight;\n\t  var zoom = config.zoom || 11;\n\t\n\t  if (config.center) {\n\t    this.center = {\n\t      lon: config.center.lon,\n\t      lat: config.center.lat\n\t    };\n\t  } else {\n\t    this.center = {};\n\t  }\n\t\n\t  this.hasCenter = null;\n\t  this.updateSize(w, h, zoom);\n\t};\n\t\n\texports.Map = Map;\n\t\n\t\n\tMap.prototype.updateSize = function (w, h, zoom) {\n\t  this.stageWidth = w;\n\t  this.stageCenterY = h / 2;\n\t  this.zoom = zoom || this.zoom;\n\t  this.zoomX = this.stageWidth * this.zoom;\n\t  this.zoomY = this.stageCenterY * this.zoom;\n\t  this.zoomRad = this.zoomX / 360;\n\t\n\t  this.newCenter(this.center.lon, this.center.lat);\n\t};\n\t\n\tMap.prototype.newCenter = function (lon, lat) {\n\t  this.hasCenter = false;\n\t  this.convertCoordinates(lon, lat);\n\t  this.hasCenter = true;\n\t};\n\t\n\tMap.prototype.convertCoordinates = function (lon, lat) {\n\t  var latRad = +lat * _math.toRad;\n\t  var mercatorN = Math.log(Math.tan(_math.QUARTER_PI + latRad / 2));\n\t  var x = (+lon + 180) * this.zoomRad;\n\t  var y = this.zoomY - this.zoomX * mercatorN / _math.TWO_PI;\n\t\n\t  if (this.hasCenter) {\n\t    x -= this.center.x;\n\t    y -= this.center.y;\n\t  } else {\n\t    this.center.x = x;\n\t    this.center.y = y;\n\t  }\n\t\n\t  return { x: x, y: y };\n\t};\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.rgbToHex = rgbToHex;\n\texports.hexToRgb = hexToRgb;\n\texports.convertAlpha = convertAlpha;\n\texports.getRGBA = getRGBA;\n\tfunction rgbToHex(r, g, b) {\n\t  return '0x' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n\t}\n\t\n\t// http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\n\tfunction hexToRgb(hex) {\n\t  // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n\t  var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n\t  hex = hex.replace(shorthandRegex, function (m, r, g, b) {\n\t    return r + r + g + g + b + b;\n\t  });\n\t\n\t  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\t  return result ? {\n\t    r: parseInt(result[1], 16),\n\t    g: parseInt(result[2], 16),\n\t    b: parseInt(result[3], 16)\n\t  } : null;\n\t}\n\t\n\tfunction convertAlpha(processingAlpha) {\n\t  var avg = 255 / processingAlpha;\n\t  var cssA = 1 / avg;\n\t  return cssA;\n\t}\n\tfunction getRGBA(c, a) {\n\t  return 'rgba(' + c.r + ',' + c.g + ',' + c.b + ',' + a + ')';\n\t}\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Audio = undefined;\n\t\n\tvar _req = __webpack_require__(9);\n\t\n\tvar Audio = function Audio(audios, cb) {\n\t  if (!audios || Object.prototype.toString.call(audios) !== '[object Object]') {\n\t    return console.error('The first parameter needs to be an Object.', 'Example:', '{audio1: \\'audio1.mp3\\', audio2: \\'audio2.mp3\\'}');\n\t  }\n\t\n\t  window.AudioContext = window.AudioContext || window.webkitAudioContext;\n\t\n\t  var total = Object.keys(audios).length;\n\t  var loaded = 0;\n\t  var retAudios = {};\n\t\n\t  this.ctx = new AudioContext();\n\t\n\t  for (var name in audios) {\n\t    (0, _req.audio)(audios[name], finishedLoading.bind(this), name, document.body, 'Loading Audio');\n\t  }\n\t\n\t  function finishedLoading(arrayBuffer, name) {\n\t    var a = this;\n\t    this.ctx.decodeAudioData(arrayBuffer, onSucess.bind(a), onError);\n\t\n\t    function onSucess(buffer) {\n\t      if (!buffer) {\n\t        console.error('Error decoding audio file:', name);\n\t        return;\n\t      }\n\t      var src = this.ctx.createBufferSource();\n\t      src.buffer = buffer;\n\t      retAudios[name] = src;\n\t      checkLoaded();\n\t    }\n\t\n\t    function onError(err) {\n\t      console.error('decodeAudioData error', err);\n\t    }\n\t  };\n\t\n\t  function checkLoaded() {\n\t    loaded++;\n\t    if (loaded === total) {\n\t      cb(retAudios);\n\t    }\n\t  };\n\t};\n\t\n\texports.Audio = Audio;\n\t\n\t\n\tAudio.prototype.source = function (src) {\n\t  var src = this.ctx.createBufferSource();\n\t  src.buffer = buffer;\n\t  src.connect(this.gainNode);\n\t  this.gainNode.connect(this.ctx.destination);\n\t\n\t  return src;\n\t};\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\texports.Webgl = exports.Stage = undefined;\n\t\n\tvar _Stage = __webpack_require__(14);\n\t\n\tvar _Stage2 = _interopRequireDefault(_Stage);\n\t\n\tvar _Renderer = __webpack_require__(15);\n\t\n\tvar _Renderer2 = _interopRequireDefault(_Renderer);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\texports.Stage = _Stage2.default;\n\texports.Webgl = _Renderer2.default;\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _math = __webpack_require__(1);\n\t\n\tvar _Point = __webpack_require__(2);\n\t\n\tvar _Point2 = _interopRequireDefault(_Point);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Stage = function Stage(imgData, renderer, batchSize) {\n\t  this.children = [];\n\t  this.texture = {};\n\t  this.data = imgData;\n\t  this.renderer = renderer;\n\t\n\t  this.loadImg(imgData.url);\n\t\n\t  this.setBatchSize(batchSize);\n\t};\n\t\n\texports.default = Stage;\n\t\n\t\n\tStage.prototype.setBatchSize = function (batchSize) {\n\t  var maxBatchSize = 16384;\n\t  var maxSize = 15000;\n\t\n\t  if (batchSize > maxBatchSize) {\n\t    batchSize = maxBatchSize;\n\t  }\n\t  if (batchSize > maxSize) {\n\t    batchSize = maxSize;\n\t  }\n\t  this.batchSize = batchSize;\n\t};\n\t\n\tStage.prototype.renderWebGL = function (renderer) {\n\t  renderer.currentRenderer.render(this);\n\t};\n\t\n\tStage.prototype.bindTexture = function () {\n\t  var gl = this.renderer.gl;\n\t\n\t  var texture = this.texture;\n\t  if (!texture.glTexture) {\n\t    texture.glTexture = gl.createTexture();\n\t  }\n\t\n\t  gl.bindTexture(gl.TEXTURE_2D, texture.glTexture);\n\t\n\t  /*----------  SET ALPHA  ----------*/\n\t  gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n\t  gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\t\n\t  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.img);\n\t\n\t  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t\n\t  if (texture.mipmap && texture.isPowerOfTwo) {\n\t    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\n\t    gl.generateMipmap(gl.TEXTURE_2D);\n\t  } else {\n\t    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\t  }\n\t\n\t  if (!texture.isPowerOfTwo) {\n\t    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\t  } else {\n\t    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n\t    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n\t  }\n\t\n\t  return true;\n\t};\n\t\n\tStage.prototype.loadImg = function (url) {\n\t  this.img = new Image();\n\t  this.img.onload = this.imgLoaded.bind(this);\n\t  this.img.src = url;\n\t};\n\t\n\tStage.prototype.imgLoaded = function () {\n\t  var w = this.img.naturalWidth;\n\t  var h = this.img.naturalHeight;\n\t\n\t  var texture = {\n\t    loaded: true,\n\t    isPowerOfTwo: (0, _math.isPowerOfTwo)(w, h)\n\t  };\n\t\n\t  var frames = [];\n\t  for (var i = 0; i < this.data.frames.length; i++) {\n\t    var frame = this.data.frames[i];\n\t\n\t    frames.push({\n\t      width: frame.w,\n\t      height: frame.h,\n\t      uvs: [frame.x / w, frame.y / h, (frame.x + frame.w) / w, (frame.y + frame.h) / h]\n\t    });\n\t  }\n\t  this.renderer.frames = frames;\n\t  this.texture = texture;\n\t  this.bindTexture();\n\t\n\t  if (this.data.cb) {\n\t    this.data.cb();\n\t  }\n\t};\n\t\n\tStage.prototype.particle = function (obj) {\n\t  obj = obj || {};\n\t  obj.scale = obj.scale || new _Point2.default(1, 1);\n\t  obj.alpha = obj.alpha || 1;\n\t  obj.rotation = obj.rotation || 0;\n\t  obj.x = obj.x || 0;\n\t  obj.y = obj.y || 0;\n\t  obj.frame = obj.frame || 0;\n\t\n\t  this.children.push(obj);\n\t\n\t  if (this.children.length > this.batchSize) {\n\t    this.setBatchSize(this.children.length);\n\t  }\n\t  return obj;\n\t};\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _RenderTarget = __webpack_require__(16);\n\t\n\tvar _RenderTarget2 = _interopRequireDefault(_RenderTarget);\n\t\n\tvar _ObjectRenderer = __webpack_require__(17);\n\t\n\tvar _ObjectRenderer2 = _interopRequireDefault(_ObjectRenderer);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Renderer = function Renderer(container, canvasOptions) {\n\t  this.container = container;\n\t  canvasOptions = canvasOptions || {};\n\t\n\t  this.width = canvasOptions.width || window.innerWidth;\n\t  this.height = canvasOptions.height || window.innerHeight;\n\t  this.canvas = document.createElement('canvas');\n\t  this.canvas.style.position = 'absolute';\n\t  container.appendChild(this.canvas);\n\t\n\t  var gl = this.canvas.getContext('webgl') || this.canvas.getContext('experimental-webgl', ctxOptions);\n\t  this.gl = gl;\n\t\n\t  gl.disable(gl.DEPTH_TEST);\n\t  gl.disable(gl.CULL_FACE);\n\t  gl.enable(gl.BLEND);\n\t\n\t  this.renderTarget = new _RenderTarget2.default(gl, this.width, this.height);\n\t  this.currentRenderer = new _ObjectRenderer2.default(gl, this);\n\t\n\t  this.resize(this.width, this.height);\n\t};\n\t\n\texports.default = Renderer;\n\t\n\t\n\tRenderer.prototype.render = function (object) {\n\t  object.renderWebGL(this);\n\t};\n\t\n\tRenderer.prototype.resize = function (width, height) {\n\t  this.width = this.canvas.width = width;\n\t  this.height = this.canvas.height = height;\n\t\n\t  this.gl.viewport(0, 0, width, height);\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _math = __webpack_require__(1);\n\t\n\tvar RenderTarget = function RenderTarget(gl, width, height) {\n\t  this.gl = gl;\n\t  this.size = new _math.Rectangle(0, 0, 1, 1);\n\t  this.projectionMatrix = new _math.Matrix();\n\t\n\t  this.resize(width, height);\n\t};\n\t\n\texports.default = RenderTarget;\n\t\n\t\n\tRenderTarget.prototype.resize = function (width, height) {\n\t  width = width | 0;\n\t  height = height | 0;\n\t\n\t  if (this.size.width === width && this.size.height === height) {\n\t    return;\n\t  }\n\t\n\t  this.size.width = width;\n\t  this.size.height = height;\n\t\n\t  var pm = this.projectionMatrix.identity();\n\t\n\t  pm.a = 2 / this.size.width;\n\t  pm.d = -2 / this.size.height;\n\t  pm.tx = -1;\n\t  pm.ty = 1;\n\t};\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _Shader = __webpack_require__(18);\n\t\n\tvar _Shader2 = _interopRequireDefault(_Shader);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar ObjectRenderer = function ObjectRenderer(gl, renderer) {\n\t  this.renderer = renderer;\n\t  this.gl = gl;\n\t  this.start();\n\t};\n\t\n\texports.default = ObjectRenderer;\n\t\n\t\n\tObjectRenderer.prototype.start = function () {\n\t  var gl = this.gl;\n\t  var shader = new _Shader2.default(gl);\n\t\n\t  this.properties = [\n\t  // verticesData\n\t  {\n\t    attribute: shader.attributes.aVertexPosition,\n\t    size: 2\n\t  },\n\t  // positionData\n\t  {\n\t    attribute: shader.attributes.aPositionCoord,\n\t    size: 2\n\t  },\n\t  // rotationData\n\t  {\n\t    attribute: shader.attributes.aRotation,\n\t    size: 1\n\t  },\n\t  // uvsData\n\t  {\n\t    attribute: shader.attributes.aTextureCoord,\n\t    size: 2\n\t  },\n\t  // alphaData\n\t  {\n\t    attribute: shader.attributes.aAlpha,\n\t    size: 1\n\t  }];\n\t\n\t  for (var i = 0; i < this.properties.length; i++) {\n\t    gl.enableVertexAttribArray(i);\n\t  }\n\t\n\t  var m = this.renderer.renderTarget.projectionMatrix;\n\t  gl.uniformMatrix3fv(shader.uniforms.projectionMatrix._location, false, m.toArray(true));\n\t};\n\t\n\tObjectRenderer.prototype.render = function (container) {\n\t  var texture = container.texture;\n\t  var children = container.children;\n\t  var total = children.length;\n\t  var maxSize = container.maxSize;\n\t  this.size = container.batchSize;\n\t  var gl = this.gl;\n\t\n\t  if (total === 0) {\n\t    return;\n\t  } else if (total > maxSize) {\n\t    total = maxSize;\n\t  }\n\t\n\t  if (!this.data) {\n\t    this.initBuffers();\n\t    for (var i = 0; i < this.properties.length; i++) {\n\t      var property = this.properties[i];\n\t      gl.vertexAttribPointer(property.attribute, property.size, gl.FLOAT, false, this.stride * 4, property.offset * 4);\n\t    }\n\t  }\n\t\n\t  this.updateData(children, total);\n\t\n\t  gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.data);\n\t  gl.drawElements(gl.TRIANGLES, total * 6, gl.UNSIGNED_SHORT, 0);\n\t};\n\t\n\tObjectRenderer.prototype.initBuffers = function () {\n\t  var gl = this.gl;\n\t\n\t  var dynamicOffset = 0;\n\t  this.stride = 0;\n\t\n\t  for (var i = 0; i < this.properties.length; i++) {\n\t    var property = this.properties[i];\n\t\n\t    property.offset = dynamicOffset;\n\t    dynamicOffset += property.size;\n\t    this.stride += property.size;\n\t  }\n\t\n\t  this.data = new Float32Array(this.size * this.stride * 4);\n\t\n\t  gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer());\n\t  gl.bufferData(gl.ARRAY_BUFFER, this.data, gl.DYNAMIC_DRAW);\n\t\n\t  var numIndices = this.size * 6;\n\t  var indices = new Uint16Array(numIndices);\n\t\n\t  for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n\t    indices[i] = j;\n\t    indices[i + 1] = j + 1;\n\t    indices[i + 2] = j + 2;\n\t    indices[i + 3] = j;\n\t    indices[i + 4] = j + 2;\n\t    indices[i + 5] = j + 3;\n\t  }\n\t\n\t  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, gl.createBuffer());\n\t  gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\n\t};\n\t\n\tObjectRenderer.prototype.updateData = function (children, amount) {\n\t  var stride = this.stride;\n\t  var n = 0;\n\t  var data = this.data;\n\t  var textures = this.renderer.frames;\n\t\n\t  for (var i = 0; i < amount; i++) {\n\t    var target = children[i];\n\t    var texture = textures[target.frame];\n\t    var w = texture.width * target.scale;\n\t    var h = texture.height * target.scale;\n\t\n\t    var x = target.x;\n\t    var y = target.y;\n\t    var r = target.rotation;\n\t    var uvs = texture.uvs;\n\t    var a = target.alpha;\n\t    /*\n\t      [\n\t        vertice   pos   rot   uvs    alpha\n\t        w,h,      x,y,  r,    x,y,   a\n\t        w,h,      x,y,  r,    x,y,   a\n\t        w,h,      x,y,  r,    x,y,   a\n\t        w,h,      x,y,  r,    x,y,   a\n\t      ]\n\t    */\n\t    /*----------  Vertex 1  ----------*/\n\t    data[n] = -w;data[++n] = -h; // Size\n\t    data[++n] = x;data[++n] = y; // Pos\n\t    data[++n] = r; // Rotation\n\t    data[++n] = uvs[0];data[++n] = uvs[1]; // Uvs\n\t    data[++n] = a; // Alpha\n\t\n\t    /*----------  Vertex 2  ----------*/\n\t    data[++n] = w;data[++n] = -h;\n\t    data[++n] = x;data[++n] = y;\n\t    data[++n] = r;\n\t    data[++n] = uvs[2];data[++n] = uvs[1];\n\t    data[++n] = a;\n\t\n\t    /*----------  Vertex 3  ----------*/\n\t    data[++n] = w;data[++n] = h;\n\t    data[++n] = x;data[++n] = y;\n\t    data[++n] = r;\n\t    data[++n] = uvs[2];data[++n] = uvs[3];\n\t    data[++n] = a;\n\t\n\t    /*----------  Vertex 4  ----------*/\n\t    data[++n] = -w;data[++n] = h;\n\t    data[++n] = x;data[++n] = y;\n\t    data[++n] = r;\n\t    data[++n] = uvs[0];data[++n] = uvs[3];\n\t\n\t    data[++n] = a;\n\t    n++;\n\t  }\n\t};\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tObject.defineProperty(exports, \"__esModule\", {\n\t  value: true\n\t});\n\t\n\tvar _particles = __webpack_require__(19);\n\t\n\tvar _particles2 = _interopRequireDefault(_particles);\n\t\n\tvar _particles3 = __webpack_require__(20);\n\t\n\tvar _particles4 = _interopRequireDefault(_particles3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Shader = function Shader(gl) {\n\t  this.gl = gl;\n\t  this.uniforms = {\n\t    projectionMatrix: {}\n\t  };\n\t\n\t  this.attributes = {};\n\t\n\t  var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n\t  gl.shaderSource(vertexShader, _particles2.default);\n\t  gl.compileShader(vertexShader);\n\t\n\t  var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n\t  gl.shaderSource(fragmentShader, _particles4.default);\n\t  gl.compileShader(fragmentShader);\n\t\n\t  var program = gl.createProgram();\n\t  gl.attachShader(program, vertexShader);\n\t  gl.attachShader(program, fragmentShader);\n\t  gl.linkProgram(program);\n\t\n\t  // clear shader from memory after linking program\n\t  gl.deleteShader(vertexShader);\n\t  gl.deleteShader(fragmentShader);\n\t\n\t  this.program = program;\n\t  gl.useProgram(program);\n\t  this.cacheUniformLocations(['projectionMatrix']);\n\t  this.cacheAttributeLocations(['aVertexPosition', 'aTextureCoord', 'aAlpha', 'aPositionCoord', 'aRotation']);\n\t};\n\t\n\texports.default = Shader;\n\t\n\t\n\tShader.prototype.cacheUniformLocations = function (keys) {\n\t  for (var i = 0; i < keys.length; ++i) {\n\t    this.uniforms[keys[i]]._location = this.gl.getUniformLocation(this.program, keys[i]);\n\t  }\n\t};\n\t\n\tShader.prototype.cacheAttributeLocations = function (keys) {\n\t  for (var i = 0; i < keys.length; ++i) {\n\t    this.attributes[keys[i]] = this.gl.getAttribLocation(this.program, keys[i]);\n\t  }\n\t};\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\nattribute float aAlpha;\\n\\nattribute vec2 aPositionCoord;\\nattribute float aRotation;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\nvarying float vAlpha;\\n\\nvoid main(void){\\n  float cosine = cos(aRotation);\\n  float sine = sin(aRotation);\\n\\n  vec3 v;\\n  v.x = aVertexPosition.x * cosine - aVertexPosition.y * sine;\\n  v.y = aVertexPosition.x * sine + aVertexPosition.y * cosine;\\n  v.z = 1.0;\\n\\n  // Move\\n  v.xy += aPositionCoord;\\n\\n  gl_Position = vec4(projectionMatrix * v, 1.0);\\n\\n  vTextureCoord = aTextureCoord;\\n  vAlpha = aAlpha;\\n}\"\n\n/***/ },\n/* 20 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"precision lowp float;\\n\\nvarying vec2 vTextureCoord;\\nvarying float vAlpha;\\n\\nuniform sampler2D uImage;\\n\\nvoid main(void){\\n  vec4 color = texture2D(uImage, vTextureCoord) * vAlpha;\\n  if (color.a == 0.0) discard;\\n  gl_FragColor = color;\\n}\"\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// ddd.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap ed8cc56abf847508cb91","import * as math from './math';\nimport * as html from './html';\nimport * as req from './http/req';\nimport * as map from './map';\nimport * as color from './color';\nimport * as audio from './audio';\nimport * as webgl from './webgl';\n\nglobal.DDD = Object.assign(\n  math,\n  html,\n  map,\n  req,\n  color,\n  audio,\n  webgl\n);\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","import Point from './Point';\nimport Rectangle from './Rectangle';\nimport Matrix from './Matrix';\nimport Vector from './Vector';\nimport Transform from './Transform';\n\nexport const PI         = Math.PI;\nexport const TWO_PI     = PI * 2;\nexport const QUARTER_PI = PI / 4;\nexport const toRad      = PI / 180;\n\nexport function random(min, max, isFloat) {\n  var random = Math.floor(Math.random() * (max - min)) + min;\n\n  if (isFloat) {\n    random = Math.random() * (max - min) + min;\n  }\n\n  return random;\n};\n\nexport function sizeFromPercentage(percent, totalSize) {\n  return percent / 100 * totalSize;\n}\n\nexport function getPercent(section, total) {\n  return (section / total) * 100;\n}\n\nexport function isPowerOfTwo(width, height) {\n  return (width > 0 && (width & (width - 1)) === 0 && height > 0 && (height & (height - 1)) === 0);\n}\n\nexport {Transform, Point, Rectangle, Matrix, Vector};\n\n\n\n// WEBPACK FOOTER //\n// ./math/index.js","var Point = function(x, y) {\n  this.x = x || 0;\n  this.y = y || 0;\n};\n\nexport default Point;\n\nPoint.prototype.clone = function() {\n  return new Point(this.x, this.y);\n};\n\nPoint.prototype.copy = function(p) {\n  this.set(p.x, p.y);\n};\n\nPoint.prototype.equals = function(p) {\n  return (p.x === this.x) && (p.y === this.y);\n};\n\nPoint.prototype.set = function(x, y) {\n  this.x = x || 0;\n  this.y = y || y !== 0 ? this.x : 0;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./math/Point.js","var Rectangle = function(x, y, width, height) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.width = width || 0;\n  this.height = height || 0;\n};\n\nexport default Rectangle;\n\n\n\n// WEBPACK FOOTER //\n// ./math/Rectangle.js","import Point from './Point';\n\nvar Matrix = function(a, b, c, d, tx, ty) {\n  this.a = a || 1;\n  this.b = b || 0;\n  this.c = c || 0;\n  this.d = d || 1;\n  this.tx = tx || 0;\n  this.ty = ty || 0;\n};\n\nexport default Matrix;\n\nMatrix.prototype.toArray = function(transpose, out) {\n  if (!this.array) {\n    this.array = new Float32Array(9);\n  }\n\n  var array = out || this.array;\n\n  if (transpose) {\n    array[0] = this.a;\n    array[1] = this.b;\n    array[2] = 0;\n    array[3] = this.c;\n    array[4] = this.d;\n    array[5] = 0;\n    array[6] = this.tx;\n    array[7] = this.ty;\n    array[8] = 1;\n  } else {\n    array[0] = this.a;\n    array[1] = this.c;\n    array[2] = this.tx;\n    array[3] = this.b;\n    array[4] = this.d;\n    array[5] = this.ty;\n    array[6] = 0;\n    array[7] = 0;\n    array[8] = 1;\n  }\n\n  return array;\n};\n\nMatrix.prototype.apply = function(pos, newPos) {\n  newPos = newPos || new Point();\n\n  var x = pos.x;\n  var y = pos.y;\n\n  newPos.x = this.a * x + this.c * y + this.tx;\n  newPos.y = this.b * x + this.d * y + this.ty;\n\n  return newPos;\n};\n\nMatrix.prototype.applyInverse = function(pos, newPos) {\n  newPos = newPos || new Point();\n\n  var id = 1 / (this.a * this.d + this.c * -this.b);\n\n  var x = pos.x;\n  var y = pos.y;\n\n  newPos.x = this.d * id * x + -this.c * id * y + (this.ty * this.c - this.tx * this.d) * id;\n  newPos.y = this.a * id * y + -this.b * id * x + (-this.ty * this.a + this.tx * this.b) * id;\n\n  return newPos;\n};\n\nMatrix.prototype.translate = function(x, y) {\n  this.tx += x;\n  this.ty += y;\n\n  return this;\n};\n\nMatrix.prototype.scale = function(x, y) {\n  this.a *= x;\n  this.d *= y;\n  this.c *= x;\n  this.b *= y;\n  this.tx *= x;\n  this.ty *= y;\n\n  return this;\n};\n\nMatrix.prototype.rotate = function(angle) {\n  var cos = Math.cos(angle);\n  var sin = Math.sin(angle);\n\n  var a1 = this.a;\n  var c1 = this.c;\n  var tx1 = this.tx;\n\n  this.a = a1 * cos - this.b * sin;\n  this.b = a1 * sin + this.b * cos;\n  this.c = c1 * cos - this.d * sin;\n  this.d = c1 * sin + this.d * cos;\n  this.tx = tx1 * cos - this.ty * sin;\n  this.ty = tx1 * sin + this.ty * cos;\n\n  return this;\n};\n\nMatrix.prototype.append = function(matrix) {\n  var a1 = this.a;\n  var b1 = this.b;\n  var c1 = this.c;\n  var d1 = this.d;\n\n  this.a  = matrix.a * a1 + matrix.b * c1;\n  this.b  = matrix.a * b1 + matrix.b * d1;\n  this.c  = matrix.c * a1 + matrix.d * c1;\n  this.d  = matrix.c * b1 + matrix.d * d1;\n\n  this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n  this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n\n  return this;\n};\n\nMatrix.prototype.setTransform = function(x, y, pivotX, pivotY, scaleX, scaleY, rotation) {\n  var sr = Math.sin(rotation);\n  var cr = Math.cos(rotation);\n\n  var a =  cr * scaleX;\n  var b =  sr * scaleX;\n  var c = -sr * scaleY;\n  var d =  cr * scaleY;\n\n  this.a = a + c;\n  this.b = b + d;\n  this.c = a + c;\n  this.d = b + d;\n\n  this.tx = x + (pivotX * a + pivotY * c);\n  this.ty = y + (pivotX * b + pivotY * d);\n\n  return this;\n};\n\nMatrix.prototype.prepend = function(matrix) {\n  var tx1 = this.tx;\n\n  if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\n    var a1 = this.a;\n    var c1 = this.c;\n    this.a = a1 * matrix.a + this.b * matrix.c;\n    this.b = a1 * matrix.b + this.b * matrix.d;\n    this.c = c1 * matrix.a + this.d * matrix.c;\n    this.d = c1 * matrix.b + this.d * matrix.d;\n  }\n\n  this.tx = tx1 * matrix.a + this.ty * matrix.c + matrix.tx;\n  this.ty = tx1 * matrix.b + this.ty * matrix.d + matrix.ty;\n\n  return this;\n};\n\nMatrix.prototype.invert = function() {\n  var a1 = this.a;\n  var b1 = this.b;\n  var c1 = this.c;\n  var d1 = this.d;\n  var tx1 = this.tx;\n  var n = a1 * d1 - b1 * c1;\n\n  this.a = d1 / n;\n  this.b = -b1 / n;\n  this.c = -c1 / n;\n  this.d = a1 / n;\n  this.tx = (c1 * this.ty - d1 * tx1) / n;\n  this.ty = -(a1 * this.ty - b1 * tx1) / n;\n\n  return this;\n};\n\nMatrix.prototype.identity = function() {\n  this.a = 1;\n  this.b = 0;\n  this.c = 0;\n  this.d = 1;\n  this.tx = 0;\n  this.ty = 0;\n\n  return this;\n};\n\nMatrix.prototype.clone = function() {\n  var matrix = new Matrix();\n  matrix.a = this.a;\n  matrix.b = this.b;\n  matrix.c = this.c;\n  matrix.d = this.d;\n  matrix.tx = this.tx;\n  matrix.ty = this.ty;\n\n  return matrix;\n};\n\nMatrix.prototype.copy = function(matrix) {\n  matrix.a = this.a;\n  matrix.b = this.b;\n  matrix.c = this.c;\n  matrix.d = this.d;\n  matrix.tx = this.tx;\n  matrix.ty = this.ty;\n\n  return matrix;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./math/Matrix.js","// From Three.js Vector3\n// https://github.com/mrdoob/three.js/blob/cf584a60bdfd24c42eaa81d484533364742bda44/src/math/Vector3.js\n// All credits to them\n\nvar Vector = function(x, y, z) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n};\n\nexport default Vector;\n\nVector.prototype.set = function(x, y, z) {\n  this.x = x;\n  this.y = y;\n  this.z = z;\n  return this;\n};\n\nVector.prototype.setX = function(x) {\n  this.x = x;\n  return this;\n};\n\nVector.prototype.setY = function(y) {\n  this.y = y;\n  return this;\n};\n\nVector.prototype.setZ = function(z) {\n  this.z = z;\n  return this;\n};\n\nVector.prototype.add = function(v) {\n  this.x += v.x;\n  this.y += v.y;\n  this.z += v.z;\n  return this;\n};\n\nVector.prototype.addScalar = function(s) {\n  this.x += s;\n  this.y += s;\n  this.z += s;\n  return this;\n};\n\nVector.prototype.sub = function(v) {\n  this.x -= v.x;\n  this.y -= v.y;\n  this.z -= v.z;\n  return this;\n};\n\nVector.prototype.subScalar = function(s) {\n  this.x -= s;\n  this.y -= s;\n  this.z -= s;\n  return this;\n};\n\nVector.prototype.subVectors = function(a, b) {\n  this.x = a.x - b.x;\n  this.y = a.y - b.y;\n  this.z = a.z - b.z;\n  return this;\n};\n\nVector.prototype.multiply = function(v) {\n  this.x *= v.x;\n  this.y *= v.y;\n  this.z *= v.z;\n  return this;\n};\n\nVector.prototype.multiplyScalar = function(s) {\n  if (isFinite(s)) {\n    this.x *= s;\n    this.y *= s;\n    this.z *= s;\n  } else {\n    this.x = 0;\n    this.y = 0;\n    this.z = 0;\n  }\n  return this;\n};\n\nVector.prototype.multiplyVectors = function(a, b) {\n  this.x = a.x * b.x;\n  this.y = a.y * b.y;\n  this.z = a.z * b.z;\n  return this;\n};\n\nVector.prototype.divide = function(v) {\n  this.x /= v.x;\n  this.y /= v.y;\n  this.z /= v.z;\n  return this;\n};\n\nVector.prototype.divideScalar = function(s) {\n  return this.multiplyScalar(1 / s);\n};\n\nVector.prototype.lengthSq = function() {\n  return this.x * this.x + this.y * this.y + this.z * this.z;\n};\n\nVector.prototype.length = function() {\n  return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n};\n\nVector.prototype.setLength = function(length) {\n  return this.multiplyScalar(length / this.length());\n};\n\nVector.prototype.distanceTo = function(v) {\n  return Math.sqrt(this.distanceToSquared(v));\n};\n\nVector.prototype.normalize = function() {\n  return this.divideScalar(this.length());\n};\n\nVector.prototype.distanceToSquared = function(v) {\n  var dx = this.x - v.x;\n  var dy = this.y - v.y;\n  var dz = this.z - v.z;\n  return dx * dx + dy * dy + dz * dz;\n};\n\nVector.prototype.limit = function(max) {\n  if (this.lengthSq() > max * max) {\n    this.normalize();\n    this.mult(max);\n  }\n\n  return this;\n};\n\nVector.prototype.copy = function(v) {\n  this.x = v.x;\n  this.y = v.y;\n  this.z = v.z;\n  return this;\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./math/Vector.js","// Last updated November 2011\n// By Simon Sarris\n// www.simonsarris.com\n// sarris@acm.org\n//\n// Free to use and distribute at will\n// So long as you are nice to people, etc\n\n// Simple class for keeping track of the current transformation matrix\n\n// For instance:\n//    var t = new Transform();\n//    t.rotate(5);\n//    var m = t.m;\n//    ctx.setTransform(m[0], m[1], m[2], m[3], m[4], m[5]);\n\n// Is equivalent to:\n//    ctx.rotate(5);\n\n// But now you can retrieve it :)\n\n// Remember that this does not account for any CSS transforms applied to the canvas\n\nvar Transform = function() {\n  this.reset();\n};\n\nexport default Transform;\n\nTransform.prototype.reset = function() {\n  this.m = [1,0,0,1,0,0];\n};\n\nTransform.prototype.multiply = function(matrix) {\n  var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n  var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n\n  var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n  var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n\n  var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n  var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n\n  this.m[0] = m11;\n  this.m[1] = m12;\n  this.m[2] = m21;\n  this.m[3] = m22;\n  this.m[4] = dx;\n  this.m[5] = dy;\n};\n\nTransform.prototype.invert = function() {\n  var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n  var m0 = this.m[3] * d;\n  var m1 = -this.m[1] * d;\n  var m2 = -this.m[2] * d;\n  var m3 = this.m[0] * d;\n  var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n  var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n  this.m[0] = m0;\n  this.m[1] = m1;\n  this.m[2] = m2;\n  this.m[3] = m3;\n  this.m[4] = m4;\n  this.m[5] = m5;\n};\n\nTransform.prototype.rotate = function(rad) {\n  var c = Math.cos(rad);\n  var s = Math.sin(rad);\n  var m11 = this.m[0] * c + this.m[2] * s;\n  var m12 = this.m[1] * c + this.m[3] * s;\n  var m21 = this.m[0] * -s + this.m[2] * c;\n  var m22 = this.m[1] * -s + this.m[3] * c;\n  this.m[0] = m11;\n  this.m[1] = m12;\n  this.m[2] = m21;\n  this.m[3] = m22;\n};\n\nTransform.prototype.translate = function(x, y) {\n  this.m[4] += this.m[0] * x + this.m[2] * y;\n  this.m[5] += this.m[1] * x + this.m[3] * y;\n};\n\nTransform.prototype.translateAndRotate = function(x, y, rad) {\n  var c = Math.cos(rad);\n  var s = Math.sin(rad);\n  var m11 = this.m[0] * c + this.m[2] * s;\n  var m12 = this.m[1] * c + this.m[3] * s;\n  var m21 = this.m[0] * -s + this.m[2] * c;\n  var m22 = this.m[1] * -s + this.m[3] * c;\n  this.m[4] += this.m[0] * x + this.m[2] * y;\n  this.m[5] += this.m[1] * x + this.m[3] * y;\n  this.m[0] = m11;\n  this.m[1] = m12;\n  this.m[2] = m21;\n  this.m[3] = m22;\n};\n\nTransform.prototype.scale = function(sx, sy) {\n  this.m[0] *= sx;\n  this.m[1] *= sx;\n  this.m[2] *= sy;\n  this.m[3] *= sy;\n};\n\nTransform.prototype.transformPoint = function(px, py) {\n  var x = px;\n  var y = py;\n  px = x * this.m[0] + y * this.m[2] + this.m[4];\n  py = x * this.m[1] + y * this.m[3] + this.m[5];\n  return [px, py];\n};\n\n\n\n// WEBPACK FOOTER //\n// ./math/Transform.js","import canvas from './canvas';\n\nexport {canvas};\n\n/**\n * @param {Number}    yearStart   First menu item\n * @param {Number}    yearEnd     Last menu item\n * @param {Number}    current     Default menu item to start with 'current' class\n * @param {Callback}  clickEvent  Name of the function to process the click events\n * @param {Callback}  callback    Name of the function for when the menu is ready\n */\nexport function yearsMenu(yearStart, yearEnd, current, clickEvent, callback) {\n  var yearsContainer = document.createElement('ul');\n  var currentYearBtn = '';\n  yearsContainer.id  = 'years';\n  yearsContainer.style.zIndex = 99999;\n\n  for (var year = yearStart; year <= yearEnd; year++) {\n    var btn   = document.createElement('li');\n    var label = document.createTextNode(year);\n\n    if (year === current) {\n      btn.className = 'current';\n      currentYearBtn = btn;\n    }\n\n    btn.appendChild(label);\n    yearsContainer.appendChild(btn);\n    btn.addEventListener('click', clickEvent, false);\n  }\n  callback(yearsContainer, currentYearBtn);\n}\n\nexport function resetCurrent(old, target, className) {\n  className = className || 'current';\n\n  if (old) {\n    old.classList.remove(className);\n  }\n  target.classList.add(className);\n}\n\n// This encoding function is from Philippe Tenenhaus's example at http://www.philten.com/us-xmlhttprequest-image/\nexport function base64(inputStr) {\n  var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  var outputStr = '';\n  var i = 0;\n\n  while (i < inputStr.length) {\n    //all three \"& 0xff\" added below are there to fix a known bug\n    //with bytes returned by xhr.responseText\n    var byte1 = inputStr.charCodeAt(i++) & 0xff;\n    var byte2 = inputStr.charCodeAt(i++) & 0xff;\n    var byte3 = inputStr.charCodeAt(i++) & 0xff;\n\n    var enc1 = byte1 >> 2;\n    var enc2 = ((byte1 & 3) << 4) | (byte2 >> 4);\n\n    var enc3;\n    var enc4;\n    if (isNaN(byte2)) {\n      enc3 = enc4 = 64;\n    } else {\n      enc3 = ((byte2 & 15) << 2) | (byte3 >> 6);\n      if (isNaN(byte3)) {\n        enc4 = 64;\n      } else {\n        enc4 = byte3 & 63;\n      }\n    }\n\n    outputStr += b64.charAt(enc1) + b64.charAt(enc2) + b64.charAt(enc3) + b64.charAt(enc4);\n  }\n\n  return outputStr;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./html/index.js","/**\n * Create a canvas element, set style values and append it to the container if defined\n * Use Cases:\n * 1. DEFAULT: DDD.canvas(container);\n *\n * 2. STAGING: DDD.canvas(null, {});\n * (useful for staging canvases, render things on the side for performance optimization)\n *\n * 3. FULL:\n * DDD.canvas(container, {\n *   w: width, h: height,\n *   position: 'cssPosition',\n *   top: #css_top, left: #css_eft,\n *   zi: #css_z-index\n *   font: '12px fontName'\n * });\n *\n * @param {Element}   container          Element where canvas should be appended.\n * @param {Object}    options            Styling data:\n * @param {Number}    options.w          Width of canvas.\n * @param {Number}    options.h          Height of Canvas.\n * @param {String}    options.position   CSS position.\n * @param {Number}    options.top        CSS top.\n * @param {Number}    options.left       CSS left.\n * @param {Number}    options.zi         CSS z-index\n */\nexport default function(container, options) {\n  var canvas = document.createElement('canvas');\n  var ctx = canvas.getContext('2d');\n\n  options = options || {};\n\n  canvas.width          = options.w || window.innerWidth;\n  canvas.height         = options.h || window.innerHeight;\n\n  canvas.style.position = options.position || 'absolute';\n  canvas.style.top      = options.top || 0;\n  canvas.style.left     = options.left || 0;\n  canvas.style.zIndex   = options.zi || 9;\n\n  if (options.css) {\n    for (var key in options.css) {\n      canvas.style[key] = options.css[key];\n    }\n  }\n\n  ctx.font = options.font || '12px Inconsolata';\n\n  if (container) {\n    container.appendChild(canvas);\n  }\n\n  return {\n    container: container,\n    canvas: canvas,\n    w: canvas.width,\n    h: canvas.height,\n    ctx: ctx,\n    center: {\n      x: canvas.width / 2,\n      y: canvas.height / 2\n    }\n  };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./html/canvas.js","export function json(options) {\n  var req = new DataRequest();\n  return req.json(options);\n};\n\nexport function image(options) {\n  var o = new DataRequest();\n  o.req.overrideMimeType('text/plain; charset=x-user-defined');\n\n  return o.getD(options)\n  .then(function(res) {\n    if (res.ret !== undefined) {\n      return res;\n    } else {\n      return res.data;\n    }\n  })\n  .catch(function(err) {\n    console.error(err);\n  });\n};\n\nexport function audio(options) {\n  var o = new DataRequest();\n  o.req.responseType = 'arraybuffer';\n\n  return o.getD(options)\n  .then(function(res) {\n    return res;\n  })\n  .catch(function(err) {\n    console.error('Error fetching audio file', err);\n  });\n};\n\nvar DataRequest = function() {\n  this.req = new XMLHttpRequest();\n};\n\nexport {DataRequest};\n\nDataRequest.prototype.abort = function() {\n  this.req.abort();\n};\n\nDataRequest.prototype.json = function(options) {\n  this.req.overrideMimeType('application/json');\n\n  return this.getD(options)\n  .then(function(res) {\n    if (res.ret !== undefined) {\n      res.data = JSON.parse(res.data);\n      return res;\n    } else {\n      return JSON.parse(res.data);\n    }\n  })\n  .catch(function(err) {\n    console.error('Error in data request, reason:', err);\n  });\n};\n\nDataRequest.prototype.getD = function(options) {\n  if (typeof options === 'object') {\n    if (!options.url) {\n      console.error('The request did not receive a url, instead got', options.url);\n      return;\n    }\n  } else if (typeof options === 'string' && options.length > 0) {\n    options = {\n      url: options\n    };\n  }\n\n  var msg;\n  var progress;\n  var progressBar = false;\n  var req = this.req;\n  var loadingMsg = options.loadingMsg || 'Loading';\n  var container  = options.container || document.body;\n\n  var loadingWrapper = container.querySelector('.loading');\n\n  if (!loadingWrapper) {\n    loadingWrapper = document.createElement('div');\n    loadingWrapper.className = 'loading';\n    container.appendChild(loadingWrapper);\n  }\n\n  var hasLoading = !!options.loadingEle;\n  var loadingEle = hasLoading ? options.loadingEle : null;\n\n  if (!loadingEle) {\n    var firstLoadingEle = container.querySelector('.loading-ele');\n    loadingEle = document.createElement('div');\n    loadingEle.className = 'loadingEle';\n\n    if (firstLoadingEle) {\n      loadingWrapper.insertBefore(firstLoadingEle, loadingEle);\n    } else {\n      loadingWrapper.appendChild(loadingEle);\n    }\n  }\n\n  function displayProgress() {\n    loadingEle.style.opacity = 1;\n    loadingWrapper.style.zIndex = 9;\n\n    msg = loadingEle.querySelector('.loading-msg');\n    if (!msg) {\n      msg = document.createElement('p');\n      msg.className = 'loading-msg';\n      msg.innerText = loadingMsg;\n      loadingEle.appendChild(msg);\n    };\n  }\n\n  function updateProgress(event) {\n    if (event.lengthComputable) {\n      if (!progressBar) {\n        // console.log(loadingEle)\n        progress = loadingEle.querySelector('.progress');\n\n        if (!progress) {\n          progress              = document.createElement('progress');\n          progress.className    = 'progress';\n          progress.style.zIndex = 0;\n          progress.max          = 100;\n          progress.value        = 0;\n          loadingEle.insertBefore(progress, msg);\n          progressBar = true;\n        }\n      }\n      var value = event.loaded / event.total * 100;\n      progress.value = value;\n      msg.innerText = Math.floor(value) + '%' + '\\n' + loadingMsg;\n    } else {\n      // progress = document.createElement('div');\n      // progress.className = 'no-progress';\n      // loading.insertBefore(progress, msg);\n      req.onprogress = null;\n    }\n  }\n\n  function hideProgress() {\n    if (!hasLoading) {\n      loadingEle.style.display = 'none';\n    }\n    loadingWrapper.style.zIndex = 0;\n  }\n\n  return new Promise(function(resolve, reject) {\n    req.open('GET', options.url, true);\n    req.onloadstart = displayProgress;\n    req.onprogress  = updateProgress;\n    req.onloadend   = hideProgress;\n\n    req.onload = function() {\n      if (req.status === 200) {\n        resolve({data: req.response, ret: options.ret});\n      } else {\n        reject(req.statusText);\n      }\n    };\n    req.onerror = function() {\n      reject('Network Error');\n    };\n\n    req.send(null);\n  });\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./http/req.js","import {TWO_PI, QUARTER_PI, toRad} from '../math';\n\n/**\n * Create a new map instance\n *\n * USAGE: var map = new DDD.Map({zoom: #, width: #, height: #, center: {lon: #, lat: #}});\n *\n * @param {Object} config             An object with the configuration options\n * @param {Number} config.zoom        The map zoom\n * @param {Number} config.width       The width of the map container\n * @param {Number} config.height      The height of the map container\n * @param {Object} config.center      Object with the longitude and latitude options for the center of the map\n * @param {Number} config.center.lon  Map center longitude\n * @param {Number} config.center.lat  Map center latitude\n */\nvar Map = function(config) {\n  var w = config.width || window.innerWidth;\n  var h = config.height || window.innerHeight;\n  var zoom = config.zoom || 11;\n\n  if (config.center) {\n    this.center = {\n      lon: config.center.lon,\n      lat: config.center.lat\n    };\n  } else {\n    this.center = {};\n  }\n\n  this.hasCenter  = null;\n  this.updateSize(w, h, zoom);\n};\n\nexport {Map};\n\nMap.prototype.updateSize = function(w, h, zoom) {\n  this.stageWidth   = w;\n  this.stageCenterY = h / 2;\n  this.zoom         = zoom || this.zoom;\n  this.zoomX        = this.stageWidth * this.zoom;\n  this.zoomY        = this.stageCenterY * this.zoom;\n  this.zoomRad      = this.zoomX / 360;\n\n  this.newCenter(this.center.lon, this.center.lat);\n};\n\nMap.prototype.newCenter = function(lon, lat) {\n  this.hasCenter = false;\n  this.convertCoordinates(lon, lat);\n  this.hasCenter = true;\n};\n\nMap.prototype.convertCoordinates = function(lon, lat) {\n  var latRad = +lat * toRad;\n  var mercatorN = Math.log(Math.tan(QUARTER_PI + (latRad / 2)));\n  var x = (+lon + 180) * this.zoomRad;\n  var y = (this.zoomY - (this.zoomX * mercatorN / TWO_PI));\n\n  if (this.hasCenter) {\n    x -= this.center.x;\n    y -= this.center.y;\n  } else {\n    this.center.x = x;\n    this.center.y = y;\n  }\n\n  return {x: x, y: y};\n};\n\n\n\n// WEBPACK FOOTER //\n// ./map/index.js","export function rgbToHex(r, g, b) {\n  return '0x' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n}\n\n// http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\nexport function hexToRgb(hex) {\n  // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n  var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n  hex = hex.replace(shorthandRegex, function(m, r, g, b) {\n    return r + r + g + g + b + b;\n  });\n\n  var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n  return result ? {\n    r: parseInt(result[1], 16),\n    g: parseInt(result[2], 16),\n    b: parseInt(result[3], 16)\n  } : null;\n}\n\nexport function convertAlpha(processingAlpha) {\n  var avg = 255 / processingAlpha;\n  var cssA = 1 / avg;\n  return cssA;\n}\nexport function getRGBA(c, a) {\n  return 'rgba(' + c.r + ',' + c.g + ',' + c.b + ',' + a + ')';\n}\n\n\n\n// WEBPACK FOOTER //\n// ./color.js","import {audio} from '../http/req';\n\nvar Audio = function(audios, cb) {\n  if (!audios || Object.prototype.toString.call(audios) !== '[object Object]') {\n    return console.error('The first parameter needs to be an Object.', 'Example:', '{audio1: \\'audio1.mp3\\', audio2: \\'audio2.mp3\\'}');\n  }\n\n  window.AudioContext = window.AudioContext || window.webkitAudioContext;\n\n  var total    = Object.keys(audios).length;\n  var loaded   = 0;\n  var retAudios = {};\n\n  this.ctx = new AudioContext();\n\n  for (var name in audios) {\n    audio(\n      audios[name],\n      finishedLoading.bind(this),\n      name,\n      document.body,\n      'Loading Audio'\n    );\n  }\n\n  function finishedLoading(arrayBuffer, name) {\n    var a = this;\n    this.ctx.decodeAudioData(\n      arrayBuffer,\n      onSucess.bind(a),\n      onError\n    );\n\n    function onSucess(buffer) {\n      if (!buffer) {\n        console.error('Error decoding audio file:', name);\n        return;\n      }\n      var src = this.ctx.createBufferSource();\n      src.buffer = buffer;\n      retAudios[name] = src;\n      checkLoaded();\n    }\n\n    function onError(err) {\n      console.error('decodeAudioData error', err);\n    }\n  };\n\n  function checkLoaded() {\n    loaded++;\n    if (loaded === total) {\n      cb(retAudios);\n    }\n  };\n};\n\nexport {Audio};\n\nAudio.prototype.source = function(src) {\n  var src = this.ctx.createBufferSource();\n  src.buffer = buffer;\n  src.connect(this.gainNode);\n  this.gainNode.connect(this.ctx.destination);\n\n  return src;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./audio/index.js","import Stage from './Stage';\nimport Webgl from './Renderer';\n\nexport {Stage, Webgl};\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/index.js","import {isPowerOfTwo} from '../math';\nimport Point from '../math/Point';\n\nvar Stage = function(imgData, renderer, batchSize) {\n  this.children = [];\n  this.texture = {};\n  this.data = imgData;\n  this.renderer = renderer;\n\n  this.loadImg(imgData.url);\n\n  this.setBatchSize(batchSize);\n};\n\nexport default Stage;\n\nStage.prototype.setBatchSize = function(batchSize) {\n  var maxBatchSize = 16384;\n  var maxSize = 15000;\n\n  if (batchSize > maxBatchSize) {\n    batchSize = maxBatchSize;\n  }\n  if (batchSize > maxSize) {\n    batchSize = maxSize;\n  }\n  this.batchSize = batchSize;\n};\n\nStage.prototype.renderWebGL = function(renderer) {\n  renderer.currentRenderer.render(this);\n};\n\nStage.prototype.bindTexture = function() {\n  var gl = this.renderer.gl;\n\n  var texture = this.texture;\n  if (!texture.glTexture) {\n    texture.glTexture = gl.createTexture();\n  }\n\n  gl.bindTexture(gl.TEXTURE_2D, texture.glTexture);\n\n  /*----------  SET ALPHA  ----------*/\n  gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n  gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.img);\n\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n  if (texture.mipmap && texture.isPowerOfTwo) {\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\n    gl.generateMipmap(gl.TEXTURE_2D);\n  } else {\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n  }\n\n  if (!texture.isPowerOfTwo) {\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  } else {\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n  }\n\n  return true;\n};\n\nStage.prototype.loadImg = function(url) {\n  this.img = new Image();\n  this.img.onload = this.imgLoaded.bind(this);\n  this.img.src = url;\n};\n\nStage.prototype.imgLoaded = function() {\n  var w = this.img.naturalWidth;\n  var h = this.img.naturalHeight;\n\n  var texture = {\n    loaded: true,\n    isPowerOfTwo: isPowerOfTwo(w, h)\n  };\n\n  var frames = [];\n  for (var i = 0; i < this.data.frames.length; i++) {\n    var frame = this.data.frames[i];\n\n    frames.push({\n      width: frame.w,\n      height: frame.h,\n      uvs: [frame.x / w, frame.y / h, (frame.x + frame.w) / w, (frame.y + frame.h) / h]\n    });\n  }\n  this.renderer.frames = frames;\n  this.texture = texture;\n  this.bindTexture();\n\n  if (this.data.cb) {\n    this.data.cb();\n  }\n};\n\nStage.prototype.particle = function(obj) {\n  obj = obj || {};\n  obj.scale = obj.scale || new Point(1, 1);\n  obj.alpha = obj.alpha || 1;\n  obj.rotation = obj.rotation || 0;\n  obj.x = obj.x || 0;\n  obj.y = obj.y || 0;\n  obj.frame = obj.frame || 0;\n\n  this.children.push(obj);\n\n  if (this.children.length > this.batchSize) {\n    this.setBatchSize(this.children.length);\n  }\n  return obj;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/Stage.js","import RenderTarget from './utils/RenderTarget';\nimport ObjectRenderer from './utils/ObjectRenderer';\n\nvar Renderer = function(container, canvasOptions) {\n  this.container = container;\n  canvasOptions = canvasOptions || {};\n\n  this.width = canvasOptions.width || window.innerWidth;\n  this.height = canvasOptions.height || window.innerHeight;\n  this.canvas = document.createElement('canvas');\n  this.canvas.style.position = 'absolute';\n  container.appendChild(this.canvas);\n\n  var gl = this.canvas.getContext('webgl') || this.canvas.getContext('experimental-webgl', ctxOptions);\n  this.gl = gl;\n\n  gl.disable(gl.DEPTH_TEST);\n  gl.disable(gl.CULL_FACE);\n  gl.enable(gl.BLEND);\n\n  this.renderTarget = new RenderTarget(gl, this.width, this.height);\n  this.currentRenderer = new ObjectRenderer(gl, this);\n\n  this.resize(this.width, this.height);\n};\n\nexport default Renderer;\n\nRenderer.prototype.render = function(object) {\n  object.renderWebGL(this);\n};\n\nRenderer.prototype.resize = function(width, height) {\n  this.width = this.canvas.width = width;\n  this.height = this.canvas.height = height;\n\n  this.gl.viewport(0, 0, width, height);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/Renderer.js","import {Rectangle, Matrix} from '../../math';\n\nvar RenderTarget = function(gl, width, height) {\n  this.gl = gl;\n  this.size = new Rectangle(0, 0, 1, 1);\n  this.projectionMatrix = new Matrix();\n\n  this.resize(width, height);\n};\n\nexport default RenderTarget;\n\nRenderTarget.prototype.resize = function(width, height) {\n  width = width | 0;\n  height = height | 0;\n\n  if (this.size.width === width && this.size.height === height) {\n    return;\n  }\n\n  this.size.width = width;\n  this.size.height = height;\n\n  var pm = this.projectionMatrix.identity();\n\n  pm.a  = 2 / this.size.width;\n  pm.d  = -2 / this.size.height;\n  pm.tx = -1;\n  pm.ty = 1;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/utils/RenderTarget.js","import Shader from './Shader';\n\nvar ObjectRenderer = function(gl, renderer) {\n  this.renderer = renderer;\n  this.gl = gl;\n  this.start();\n};\n\nexport default ObjectRenderer;\n\nObjectRenderer.prototype.start = function() {\n  var gl = this.gl;\n  var shader = new Shader(gl);\n\n  this.properties = [\n    // verticesData\n    {\n      attribute: shader.attributes.aVertexPosition,\n      size: 2\n    },\n    // positionData\n    {\n      attribute: shader.attributes.aPositionCoord,\n      size: 2\n    },\n    // rotationData\n    {\n      attribute: shader.attributes.aRotation,\n      size: 1\n    },\n    // uvsData\n    {\n      attribute: shader.attributes.aTextureCoord,\n      size: 2\n    },\n    // alphaData\n    {\n      attribute: shader.attributes.aAlpha,\n      size: 1\n    }\n  ];\n\n  for (var i = 0; i < this.properties.length; i++) {\n    gl.enableVertexAttribArray(i);\n  }\n\n  var m = this.renderer.renderTarget.projectionMatrix;\n  gl.uniformMatrix3fv(shader.uniforms.projectionMatrix._location, false, m.toArray(true));\n};\n\nObjectRenderer.prototype.render = function(container) {\n  var texture = container.texture;\n  var children = container.children;\n  var total = children.length;\n  var maxSize = container.maxSize;\n  this.size = container.batchSize;\n  var gl = this.gl;\n\n  if (total === 0) {\n    return;\n  } else if (total > maxSize) {\n    total = maxSize;\n  }\n\n  if (!this.data) {\n    this.initBuffers();\n    for (var i = 0; i < this.properties.length; i++) {\n      var property = this.properties[i];\n      gl.vertexAttribPointer(property.attribute, property.size, gl.FLOAT, false, this.stride * 4, property.offset * 4);\n    }\n  }\n\n  this.updateData(children, total);\n\n  gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.data);\n  gl.drawElements(gl.TRIANGLES, total * 6, gl.UNSIGNED_SHORT, 0);\n};\n\nObjectRenderer.prototype.initBuffers = function() {\n  var gl = this.gl;\n\n  var dynamicOffset = 0;\n  this.stride = 0;\n\n  for (var i = 0; i < this.properties.length; i++) {\n    var property = this.properties[i];\n\n    property.offset = dynamicOffset;\n    dynamicOffset += property.size;\n    this.stride += property.size;\n  }\n\n  this.data = new Float32Array(this.size * this.stride * 4);\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer());\n  gl.bufferData(gl.ARRAY_BUFFER, this.data, gl.DYNAMIC_DRAW);\n\n  var numIndices = this.size * 6;\n  var indices = new Uint16Array(numIndices);\n\n  for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n    indices[i] = j;\n    indices[i + 1] = j + 1;\n    indices[i + 2] = j + 2;\n    indices[i + 3] = j;\n    indices[i + 4] = j + 2;\n    indices[i + 5] = j + 3;\n  }\n\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, gl.createBuffer());\n  gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\n};\n\nObjectRenderer.prototype.updateData = function(children, amount) {\n  var stride = this.stride;\n  var n = 0;\n  var data = this.data;\n  var textures = this.renderer.frames;\n\n  for (var i = 0; i < amount; i++) {\n    var target = children[i];\n    var texture = textures[target.frame];\n    var w = texture.width * target.scale;\n    var h = texture.height * target.scale;\n\n    var x = target.x;\n    var y = target.y;\n    var r = target.rotation;\n    var uvs = texture.uvs;\n    var a  = target.alpha;\n    /*\n      [\n        vertice   pos   rot   uvs    alpha\n        w,h,      x,y,  r,    x,y,   a\n        w,h,      x,y,  r,    x,y,   a\n        w,h,      x,y,  r,    x,y,   a\n        w,h,      x,y,  r,    x,y,   a\n      ]\n   */\n    /*----------  Vertex 1  ----------*/\n    data[n] = -w;       data[++n] = -h;       // Size\n    data[++n] = x;      data[++n] = y;        // Pos\n    data[++n] = r;                            // Rotation\n    data[++n] = uvs[0]; data[++n] = uvs[1];   // Uvs\n    data[++n] = a;                            // Alpha\n\n    /*----------  Vertex 2  ----------*/\n    data[++n] = w;      data[++n] = -h;\n    data[++n] = x;      data[++n] = y;\n    data[++n] = r;\n    data[++n] = uvs[2]; data[++n] = uvs[1];\n    data[++n] = a;\n\n    /*----------  Vertex 3  ----------*/\n    data[++n] = w;      data[++n] = h;\n    data[++n] = x;      data[++n] = y;\n    data[++n] = r;\n    data[++n] = uvs[2]; data[++n] = uvs[3];\n    data[++n] = a;\n\n    /*----------  Vertex 4  ----------*/\n    data[++n] = -w;     data[++n] = h;\n    data[++n] = x;      data[++n] = y;\n    data[++n] = r;\n    data[++n] = uvs[0]; data[++n] = uvs[3];\n\n    data[++n] = a;\n    n++;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/utils/ObjectRenderer.js","import particlesVS from '../shaders/particles.vs';\nimport particlesFS from '../shaders/particles.fs';\n\nvar Shader = function(gl) {\n  this.gl = gl;\n  this.uniforms = {\n    projectionMatrix: {}\n  };\n\n  this.attributes = {};\n\n  var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n  gl.shaderSource(vertexShader, particlesVS);\n  gl.compileShader(vertexShader);\n\n  var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n  gl.shaderSource(fragmentShader, particlesFS);\n  gl.compileShader(fragmentShader);\n\n  var program = gl.createProgram();\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  gl.linkProgram(program);\n\n  // clear shader from memory after linking program\n  gl.deleteShader(vertexShader);\n  gl.deleteShader(fragmentShader);\n\n  this.program = program;\n  gl.useProgram(program);\n  this.cacheUniformLocations(['projectionMatrix']);\n  this.cacheAttributeLocations([\n    'aVertexPosition',\n    'aTextureCoord',\n    'aAlpha',\n    'aPositionCoord',\n    'aRotation'\n  ]);\n\n};\n\nexport default Shader;\n\nShader.prototype.cacheUniformLocations = function(keys) {\n  for (var i = 0; i < keys.length; ++i) {\n    this.uniforms[keys[i]]._location = this.gl.getUniformLocation(this.program, keys[i]);\n  }\n};\n\nShader.prototype.cacheAttributeLocations = function(keys) {\n  for (var i = 0; i < keys.length; ++i) {\n    this.attributes[keys[i]] = this.gl.getAttribLocation(this.program, keys[i]);\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/utils/Shader.js","module.exports = \"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\nattribute float aAlpha;\\n\\nattribute vec2 aPositionCoord;\\nattribute float aRotation;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\nvarying float vAlpha;\\n\\nvoid main(void){\\n  float cosine = cos(aRotation);\\n  float sine = sin(aRotation);\\n\\n  vec3 v;\\n  v.x = aVertexPosition.x * cosine - aVertexPosition.y * sine;\\n  v.y = aVertexPosition.x * sine + aVertexPosition.y * cosine;\\n  v.z = 1.0;\\n\\n  // Move\\n  v.xy += aPositionCoord;\\n\\n  gl_Position = vec4(projectionMatrix * v, 1.0);\\n\\n  vTextureCoord = aTextureCoord;\\n  vAlpha = aAlpha;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./webgl/shaders/particles.vs\n// module id = 19\n// module chunks = 0","module.exports = \"precision lowp float;\\n\\nvarying vec2 vTextureCoord;\\nvarying float vAlpha;\\n\\nuniform sampler2D uImage;\\n\\nvoid main(void){\\n  vec4 color = texture2D(uImage, vTextureCoord) * vAlpha;\\n  if (color.a == 0.0) discard;\\n  gl_FragColor = color;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./webgl/shaders/particles.fs\n// module id = 20\n// module chunks = 0"],"sourceRoot":""}