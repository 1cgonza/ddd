{"version":3,"sources":["webpack:///ddd.min.js","webpack:///webpack/bootstrap c13ada285af4f302d519","webpack:///./index.js","webpack:///./math/index.js","webpack:///./math/Point.js","webpack:///./math/Rectangle.js","webpack:///./math/Matrix.js","webpack:///./math/Vector.js","webpack:///./html/index.js","webpack:///./html/canvas.js","webpack:///./Map/index.js","webpack:///./http/req.js","webpack:///./color.js","webpack:///./audio/index.js","webpack:///./webgl/index.js","webpack:///./webgl/Stage.js","webpack:///./webgl/Renderer.js","webpack:///./webgl/utils/RenderTarget.js","webpack:///./webgl/utils/ObjectRenderer.js","webpack:///./webgl/utils/Shader.js","webpack:///./webgl/shaders/particles.vs","webpack:///./webgl/shaders/particles.fs"],"names":["modules","__webpack_require__","moduleId","installedModules","exports","module","id","loaded","call","m","c","p","global","DDD","Object","assign","this","Transform","reset","math","PI","Math","TWO_PI","QUARTER_PI","toRad","random","min","max","isFloat","floor","sizeFromPercentage","percent","totalSize","getPercent","section","total","isPowerOfTwo","width","height","Point","Rectangle","Matrix","Vector","prototype","multiply","matrix","m11","m12","m21","m22","dx","dy","invert","d","m0","m1","m2","m3","m4","m5","rotate","rad","cos","s","sin","translate","x","y","translateAndRotate","scale","sx","sy","transformPoint","px","py","clone","copy","set","equals","a","b","tx","ty","toArray","transpose","out","array","Float32Array","apply","pos","newPos","applyInverse","angle","a1","c1","tx1","append","b1","d1","setTransform","pivotX","pivotY","scaleX","scaleY","rotation","sr","cr","prepend","n","identity","z","setX","setY","setZ","add","v","addScalar","sub","subScalar","subVectors","multiplyScalar","isFinite","multiplyVectors","divide","divideScalar","lengthSq","length","sqrt","setLength","distanceTo","distanceToSquared","normalize","dz","limit","mult","yearsMenu","yearStart","yearEnd","current","clickEvent","callback","yearsContainer","document","createElement","currentYearBtn","style","zIndex","year","btn","label","createTextNode","className","appendChild","addEventListener","resetCurrent","old","target","classList","remove","base64","inputStr","b64","outputStr","i","enc3","enc4","byte1","charCodeAt","byte2","byte3","enc1","enc2","isNaN","charAt","html","canvas","container","options","ctx","getContext","w","window","innerWidth","h","innerHeight","position","top","left","zi","css","key","font","center","Map","config","zoom","lon","lat","hasCenter","updateSize","stageWidth","stageCenterY","zoomX","zoomY","zoomRad","newCenter","convertCoordinates","latRad","mercatorN","log","tan","_typeof","Symbol","iterator","obj","constructor","json","req","DataRequest","image","o","overrideMimeType","getD","then","res","undefined","ret","data","catch","err","console","error","audio","responseType","XMLHttpRequest","abort","JSON","parse","displayProgress","loadingEle","opacity","loadingWrapper","msg","querySelector","innerText","loadingMsg","updateProgress","event","lengthComputable","progressBar","progress","value","insertBefore","onprogress","hideProgress","hasLoading","display","url","body","firstLoadingEle","Promise","resolve","reject","open","onloadstart","onloadend","onload","status","response","statusText","onerror","send","color","rgbToHex","r","g","toString","slice","hexToRgb","hex","shorthandRegex","replace","result","exec","parseInt","convertAlpha","processingAlpha","avg","cssA","getRGBA","Audio","audios","cb","finishedLoading","arrayBuffer","name","onSucess","buffer","src","createBufferSource","retAudios","checkLoaded","onError","decodeAudioData","bind","AudioContext","webkitAudioContext","keys","source","connect","gainNode","destination","webgl","Stage","Webgl","_math","imgData","renderer","batchSize","children","texture","loadImg","setBatchSize","maxBatchSize","maxSize","renderWebGL","currentRenderer","render","bindTexture","gl","glTexture","createTexture","TEXTURE_2D","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","blendFunc","ONE","ONE_MINUS_SRC_ALPHA","texImage2D","RGBA","UNSIGNED_BYTE","img","texParameteri","TEXTURE_MAG_FILTER","LINEAR","mipmap","TEXTURE_MIN_FILTER","LINEAR_MIPMAP_LINEAR","generateMipmap","TEXTURE_WRAP_S","REPEAT","TEXTURE_WRAP_T","CLAMP_TO_EDGE","Image","imgLoaded","naturalWidth","naturalHeight","frames","frame","push","uvs","particle","alpha","_interopRequireDefault","__esModule","default","_RenderTarget","_RenderTarget2","_ObjectRenderer","_ObjectRenderer2","Renderer","canvasOptions","ctxOptions","disable","DEPTH_TEST","CULL_FACE","enable","BLEND","renderTarget","resize","object","viewport","RenderTarget","size","projectionMatrix","pm","_Shader","_Shader2","ObjectRenderer","start","shader","properties","attribute","attributes","aVertexPosition","aPositionCoord","aRotation","aTextureCoord","aAlpha","enableVertexAttribArray","uniformMatrix3fv","uniforms","_location","initBuffers","property","vertexAttribPointer","FLOAT","stride","offset","updateData","bufferSubData","ARRAY_BUFFER","drawElements","TRIANGLES","UNSIGNED_SHORT","dynamicOffset","bindBuffer","createBuffer","bufferData","DYNAMIC_DRAW","numIndices","indices","Uint16Array","j","ELEMENT_ARRAY_BUFFER","STATIC_DRAW","amount","textures","_particles","_particles2","_particles3","_particles4","Shader","vertexShader","createShader","VERTEX_SHADER","shaderSource","compileShader","fragmentShader","FRAGMENT_SHADER","program","createProgram","attachShader","linkProgram","deleteShader","useProgram","cacheUniformLocations","cacheAttributeLocations","getUniformLocation","getAttribLocation"],"mappings":"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","file":"ddd.min.js","sourcesContent":["/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t/* WEBPACK VAR INJECTION */(function(global) {'use strict';\n\t\n\tglobal.DDD = Object.assign(__webpack_require__(1), __webpack_require__(6), __webpack_require__(8), __webpack_require__(9), __webpack_require__(10), __webpack_require__(11), __webpack_require__(12));\n\t/* WEBPACK VAR INJECTION */}.call(exports, (function() { return this; }())))\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Transform = function Transform() {\n\t  this.reset();\n\t};\n\t\n\tvar math = {\n\t  PI: Math.PI,\n\t  TWO_PI: Math.PI * 2,\n\t  QUARTER_PI: Math.PI / 4,\n\t  toRad: Math.PI / 180,\n\t\n\t  random: function random(min, max, isFloat) {\n\t    var random = Math.floor(Math.random() * (max - min)) + min;\n\t\n\t    if (isFloat) {\n\t      random = Math.random() * (max - min) + min;\n\t    }\n\t\n\t    return random;\n\t  },\n\t\n\t  sizeFromPercentage: function sizeFromPercentage(percent, totalSize) {\n\t    return percent / 100 * totalSize;\n\t  },\n\t\n\t  getPercent: function getPercent(section, total) {\n\t    return section / total * 100;\n\t  },\n\t\n\t  isPowerOfTwo: function isPowerOfTwo(width, height) {\n\t    return width > 0 && (width & width - 1) === 0 && height > 0 && (height & height - 1) === 0;\n\t  },\n\t\n\t  Transform: Transform,\n\t\n\t  // Shapes\n\t  Point: __webpack_require__(2),\n\t  Rectangle: __webpack_require__(3),\n\t  Matrix: __webpack_require__(4),\n\t  Vector: __webpack_require__(5)\n\t};\n\t\n\tmodule.exports = math;\n\t\n\t// Last updated November 2011\n\t// By Simon Sarris\n\t// www.simonsarris.com\n\t// sarris@acm.org\n\t//\n\t// Free to use and distribute at will\n\t// So long as you are nice to people, etc\n\t\n\t// Simple class for keeping track of the current transformation matrix\n\t\n\t// For instance:\n\t//    var t = new Transform();\n\t//    t.rotate(5);\n\t//    var m = t.m;\n\t//    ctx.setTransform(m[0], m[1], m[2], m[3], m[4], m[5]);\n\t\n\t// Is equivalent to:\n\t//    ctx.rotate(5);\n\t\n\t// But now you can retrieve it :)\n\t\n\t// Remember that this does not account for any CSS transforms applied to the canvas\n\t\n\tTransform.prototype.reset = function () {\n\t  this.m = [1, 0, 0, 1, 0, 0];\n\t};\n\t\n\tTransform.prototype.multiply = function (matrix) {\n\t  var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n\t  var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n\t\n\t  var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n\t  var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n\t\n\t  var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n\t  var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n\t\n\t  this.m[0] = m11;\n\t  this.m[1] = m12;\n\t  this.m[2] = m21;\n\t  this.m[3] = m22;\n\t  this.m[4] = dx;\n\t  this.m[5] = dy;\n\t};\n\t\n\tTransform.prototype.invert = function () {\n\t  var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n\t  var m0 = this.m[3] * d;\n\t  var m1 = -this.m[1] * d;\n\t  var m2 = -this.m[2] * d;\n\t  var m3 = this.m[0] * d;\n\t  var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n\t  var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n\t  this.m[0] = m0;\n\t  this.m[1] = m1;\n\t  this.m[2] = m2;\n\t  this.m[3] = m3;\n\t  this.m[4] = m4;\n\t  this.m[5] = m5;\n\t};\n\t\n\tTransform.prototype.rotate = function (rad) {\n\t  var c = Math.cos(rad);\n\t  var s = Math.sin(rad);\n\t  var m11 = this.m[0] * c + this.m[2] * s;\n\t  var m12 = this.m[1] * c + this.m[3] * s;\n\t  var m21 = this.m[0] * -s + this.m[2] * c;\n\t  var m22 = this.m[1] * -s + this.m[3] * c;\n\t  this.m[0] = m11;\n\t  this.m[1] = m12;\n\t  this.m[2] = m21;\n\t  this.m[3] = m22;\n\t};\n\t\n\tTransform.prototype.translate = function (x, y) {\n\t  this.m[4] += this.m[0] * x + this.m[2] * y;\n\t  this.m[5] += this.m[1] * x + this.m[3] * y;\n\t};\n\t\n\tTransform.prototype.translateAndRotate = function (x, y, rad) {\n\t  var c = Math.cos(rad);\n\t  var s = Math.sin(rad);\n\t  var m11 = this.m[0] * c + this.m[2] * s;\n\t  var m12 = this.m[1] * c + this.m[3] * s;\n\t  var m21 = this.m[0] * -s + this.m[2] * c;\n\t  var m22 = this.m[1] * -s + this.m[3] * c;\n\t  this.m[4] += this.m[0] * x + this.m[2] * y;\n\t  this.m[5] += this.m[1] * x + this.m[3] * y;\n\t  this.m[0] = m11;\n\t  this.m[1] = m12;\n\t  this.m[2] = m21;\n\t  this.m[3] = m22;\n\t};\n\t\n\tTransform.prototype.scale = function (sx, sy) {\n\t  this.m[0] *= sx;\n\t  this.m[1] *= sx;\n\t  this.m[2] *= sy;\n\t  this.m[3] *= sy;\n\t};\n\t\n\tTransform.prototype.transformPoint = function (px, py) {\n\t  var x = px;\n\t  var y = py;\n\t  px = x * this.m[0] + y * this.m[2] + this.m[4];\n\t  py = x * this.m[1] + y * this.m[3] + this.m[5];\n\t  return [px, py];\n\t};\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar Point = function Point(x, y) {\n\t  this.x = x || 0;\n\t  this.y = y || 0;\n\t};\n\t\n\tmodule.exports = Point;\n\t\n\tPoint.prototype.clone = function () {\n\t  return new Point(this.x, this.y);\n\t};\n\t\n\tPoint.prototype.copy = function (p) {\n\t  this.set(p.x, p.y);\n\t};\n\t\n\tPoint.prototype.equals = function (p) {\n\t  return p.x === this.x && p.y === this.y;\n\t};\n\t\n\tPoint.prototype.set = function (x, y) {\n\t  this.x = x || 0;\n\t  this.y = y || y !== 0 ? this.x : 0;\n\t};\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar Rectangle = function Rectangle(x, y, width, height) {\n\t  this.x = x || 0;\n\t  this.y = y || 0;\n\t  this.width = width || 0;\n\t  this.height = height || 0;\n\t};\n\t\n\tmodule.exports = Rectangle;\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar Point = __webpack_require__(2);\n\t\n\tvar Matrix = function Matrix(a, b, c, d, tx, ty) {\n\t  this.a = a || 1;\n\t  this.b = b || 0;\n\t  this.c = c || 0;\n\t  this.d = d || 1;\n\t  this.tx = tx || 0;\n\t  this.ty = ty || 0;\n\t};\n\t\n\tmodule.exports = Matrix;\n\t\n\tMatrix.prototype.toArray = function (transpose, out) {\n\t  if (!this.array) {\n\t    this.array = new Float32Array(9);\n\t  }\n\t\n\t  var array = out || this.array;\n\t\n\t  if (transpose) {\n\t    array[0] = this.a;\n\t    array[1] = this.b;\n\t    array[2] = 0;\n\t    array[3] = this.c;\n\t    array[4] = this.d;\n\t    array[5] = 0;\n\t    array[6] = this.tx;\n\t    array[7] = this.ty;\n\t    array[8] = 1;\n\t  } else {\n\t    array[0] = this.a;\n\t    array[1] = this.c;\n\t    array[2] = this.tx;\n\t    array[3] = this.b;\n\t    array[4] = this.d;\n\t    array[5] = this.ty;\n\t    array[6] = 0;\n\t    array[7] = 0;\n\t    array[8] = 1;\n\t  }\n\t\n\t  return array;\n\t};\n\t\n\tMatrix.prototype.apply = function (pos, newPos) {\n\t  newPos = newPos || new Point();\n\t\n\t  var x = pos.x;\n\t  var y = pos.y;\n\t\n\t  newPos.x = this.a * x + this.c * y + this.tx;\n\t  newPos.y = this.b * x + this.d * y + this.ty;\n\t\n\t  return newPos;\n\t};\n\t\n\tMatrix.prototype.applyInverse = function (pos, newPos) {\n\t  newPos = newPos || new Point();\n\t\n\t  var id = 1 / (this.a * this.d + this.c * -this.b);\n\t\n\t  var x = pos.x;\n\t  var y = pos.y;\n\t\n\t  newPos.x = this.d * id * x + -this.c * id * y + (this.ty * this.c - this.tx * this.d) * id;\n\t  newPos.y = this.a * id * y + -this.b * id * x + (-this.ty * this.a + this.tx * this.b) * id;\n\t\n\t  return newPos;\n\t};\n\t\n\tMatrix.prototype.translate = function (x, y) {\n\t  this.tx += x;\n\t  this.ty += y;\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.scale = function (x, y) {\n\t  this.a *= x;\n\t  this.d *= y;\n\t  this.c *= x;\n\t  this.b *= y;\n\t  this.tx *= x;\n\t  this.ty *= y;\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.rotate = function (angle) {\n\t  var cos = Math.cos(angle);\n\t  var sin = Math.sin(angle);\n\t\n\t  var a1 = this.a;\n\t  var c1 = this.c;\n\t  var tx1 = this.tx;\n\t\n\t  this.a = a1 * cos - this.b * sin;\n\t  this.b = a1 * sin + this.b * cos;\n\t  this.c = c1 * cos - this.d * sin;\n\t  this.d = c1 * sin + this.d * cos;\n\t  this.tx = tx1 * cos - this.ty * sin;\n\t  this.ty = tx1 * sin + this.ty * cos;\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.append = function (matrix) {\n\t  var a1 = this.a;\n\t  var b1 = this.b;\n\t  var c1 = this.c;\n\t  var d1 = this.d;\n\t\n\t  this.a = matrix.a * a1 + matrix.b * c1;\n\t  this.b = matrix.a * b1 + matrix.b * d1;\n\t  this.c = matrix.c * a1 + matrix.d * c1;\n\t  this.d = matrix.c * b1 + matrix.d * d1;\n\t\n\t  this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n\t  this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.setTransform = function (x, y, pivotX, pivotY, scaleX, scaleY, rotation) {\n\t  var sr = Math.sin(rotation);\n\t  var cr = Math.cos(rotation);\n\t\n\t  var a = cr * scaleX;\n\t  var b = sr * scaleX;\n\t  var c = -sr * scaleY;\n\t  var d = cr * scaleY;\n\t\n\t  this.a = a + c;\n\t  this.b = b + d;\n\t  this.c = a + c;\n\t  this.d = b + d;\n\t\n\t  this.tx = x + (pivotX * a + pivotY * c);\n\t  this.ty = y + (pivotX * b + pivotY * d);\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.prepend = function (matrix) {\n\t  var tx1 = this.tx;\n\t\n\t  if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\n\t    var a1 = this.a;\n\t    var c1 = this.c;\n\t    this.a = a1 * matrix.a + this.b * matrix.c;\n\t    this.b = a1 * matrix.b + this.b * matrix.d;\n\t    this.c = c1 * matrix.a + this.d * matrix.c;\n\t    this.d = c1 * matrix.b + this.d * matrix.d;\n\t  }\n\t\n\t  this.tx = tx1 * matrix.a + this.ty * matrix.c + matrix.tx;\n\t  this.ty = tx1 * matrix.b + this.ty * matrix.d + matrix.ty;\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.invert = function () {\n\t  var a1 = this.a;\n\t  var b1 = this.b;\n\t  var c1 = this.c;\n\t  var d1 = this.d;\n\t  var tx1 = this.tx;\n\t  var n = a1 * d1 - b1 * c1;\n\t\n\t  this.a = d1 / n;\n\t  this.b = -b1 / n;\n\t  this.c = -c1 / n;\n\t  this.d = a1 / n;\n\t  this.tx = (c1 * this.ty - d1 * tx1) / n;\n\t  this.ty = -(a1 * this.ty - b1 * tx1) / n;\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.identity = function () {\n\t  this.a = 1;\n\t  this.b = 0;\n\t  this.c = 0;\n\t  this.d = 1;\n\t  this.tx = 0;\n\t  this.ty = 0;\n\t\n\t  return this;\n\t};\n\t\n\tMatrix.prototype.clone = function () {\n\t  var matrix = new Matrix();\n\t  matrix.a = this.a;\n\t  matrix.b = this.b;\n\t  matrix.c = this.c;\n\t  matrix.d = this.d;\n\t  matrix.tx = this.tx;\n\t  matrix.ty = this.ty;\n\t\n\t  return matrix;\n\t};\n\t\n\tMatrix.prototype.copy = function (matrix) {\n\t  matrix.a = this.a;\n\t  matrix.b = this.b;\n\t  matrix.c = this.c;\n\t  matrix.d = this.d;\n\t  matrix.tx = this.tx;\n\t  matrix.ty = this.ty;\n\t\n\t  return matrix;\n\t};\n\n/***/ },\n/* 5 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\t// From Three.js Vector3\n\t// https://github.com/mrdoob/three.js/blob/cf584a60bdfd24c42eaa81d484533364742bda44/src/math/Vector3.js\n\t// All credits to them\n\t\n\tvar Vector = function Vector(x, y, z) {\n\t  this.x = x || 0;\n\t  this.y = y || 0;\n\t  this.z = z || 0;\n\t};\n\t\n\tmodule.exports = Vector;\n\t\n\tVector.prototype.set = function (x, y, z) {\n\t  this.x = x;\n\t  this.y = y;\n\t  this.z = z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.setX = function (x) {\n\t  this.x = x;\n\t  return this;\n\t};\n\t\n\tVector.prototype.setY = function (y) {\n\t  this.y = y;\n\t  return this;\n\t};\n\t\n\tVector.prototype.setZ = function (z) {\n\t  this.z = z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.add = function (v) {\n\t  this.x += v.x;\n\t  this.y += v.y;\n\t  this.z += v.z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.addScalar = function (s) {\n\t  this.x += s;\n\t  this.y += s;\n\t  this.z += s;\n\t  return this;\n\t};\n\t\n\tVector.prototype.sub = function (v) {\n\t  this.x -= v.x;\n\t  this.y -= v.y;\n\t  this.z -= v.z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.subScalar = function (s) {\n\t  this.x -= s;\n\t  this.y -= s;\n\t  this.z -= s;\n\t  return this;\n\t};\n\t\n\tVector.prototype.subVectors = function (a, b) {\n\t  this.x = a.x - b.x;\n\t  this.y = a.y - b.y;\n\t  this.z = a.z - b.z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.multiply = function (v) {\n\t  this.x *= v.x;\n\t  this.y *= v.y;\n\t  this.z *= v.z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.multiplyScalar = function (s) {\n\t  if (isFinite(s)) {\n\t    this.x *= s;\n\t    this.y *= s;\n\t    this.z *= s;\n\t  } else {\n\t    this.x = 0;\n\t    this.y = 0;\n\t    this.z = 0;\n\t  }\n\t  return this;\n\t};\n\t\n\tVector.prototype.multiplyVectors = function (a, b) {\n\t  this.x = a.x * b.x;\n\t  this.y = a.y * b.y;\n\t  this.z = a.z * b.z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.divide = function (v) {\n\t  this.x /= v.x;\n\t  this.y /= v.y;\n\t  this.z /= v.z;\n\t  return this;\n\t};\n\t\n\tVector.prototype.divideScalar = function (s) {\n\t  return this.multiplyScalar(1 / s);\n\t};\n\t\n\tVector.prototype.lengthSq = function () {\n\t  return this.x * this.x + this.y * this.y + this.z * this.z;\n\t};\n\t\n\tVector.prototype.length = function () {\n\t  return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n\t};\n\t\n\tVector.prototype.setLength = function (length) {\n\t  return this.multiplyScalar(length / this.length());\n\t};\n\t\n\tVector.prototype.distanceTo = function (v) {\n\t  return Math.sqrt(this.distanceToSquared(v));\n\t};\n\t\n\tVector.prototype.normalize = function () {\n\t  return this.divideScalar(this.length());\n\t};\n\t\n\tVector.prototype.distanceToSquared = function (v) {\n\t  var dx = this.x - v.x;\n\t  var dy = this.y - v.y;\n\t  var dz = this.z - v.z;\n\t  return dx * dx + dy * dy + dz * dz;\n\t};\n\t\n\tVector.prototype.limit = function (max) {\n\t  if (this.lengthSq() > max * max) {\n\t    this.normalize();\n\t    this.mult(max);\n\t  }\n\t\n\t  return this;\n\t};\n\t\n\tVector.prototype.copy = function (v) {\n\t  this.x = v.x;\n\t  this.y = v.y;\n\t  this.z = v.z;\n\t  return this;\n\t};\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar html = {\n\t  yearsMenu: yearsMenu,\n\t  resetCurrent: resetCurrent,\n\t  base64: base64,\n\t  canvas: __webpack_require__(7)\n\t};\n\t\n\tmodule.exports = html;\n\t\n\t/**\n\t * @param {Number}    yearStart   First menu item\n\t * @param {Number}    yearEnd     Last menu item\n\t * @param {Number}    current     Default menu item to start with 'current' class\n\t * @param {Callback}  clickEvent  Name of the function to process the click events\n\t * @param {Callback}  callback    Name of the function for when the menu is ready\n\t */\n\tfunction yearsMenu(yearStart, yearEnd, current, clickEvent, callback) {\n\t  var yearsContainer = document.createElement('ul');\n\t  var currentYearBtn = '';\n\t  yearsContainer.id = 'years';\n\t  yearsContainer.style.zIndex = 99999;\n\t\n\t  for (var year = yearStart; year <= yearEnd; year++) {\n\t    var btn = document.createElement('li');\n\t    var label = document.createTextNode(year);\n\t\n\t    if (year === current) {\n\t      btn.className = 'current';\n\t      currentYearBtn = btn;\n\t    }\n\t\n\t    btn.appendChild(label);\n\t    yearsContainer.appendChild(btn);\n\t    btn.addEventListener('click', clickEvent, false);\n\t  }\n\t  callback(yearsContainer, currentYearBtn);\n\t}\n\t\n\tfunction resetCurrent(old, target, className) {\n\t  className = className || 'current';\n\t\n\t  if (old) {\n\t    old.classList.remove(className);\n\t  }\n\t  target.classList.add(className);\n\t}\n\t\n\t// This encoding function is from Philippe Tenenhaus's example at http://www.philten.com/us-xmlhttprequest-image/\n\tfunction base64(inputStr) {\n\t  var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n\t  var outputStr = '';\n\t  var i = 0;\n\t\n\t  while (i < inputStr.length) {\n\t    //all three \"& 0xff\" added below are there to fix a known bug\n\t    //with bytes returned by xhr.responseText\n\t    var byte1 = inputStr.charCodeAt(i++) & 0xff;\n\t    var byte2 = inputStr.charCodeAt(i++) & 0xff;\n\t    var byte3 = inputStr.charCodeAt(i++) & 0xff;\n\t\n\t    var enc1 = byte1 >> 2;\n\t    var enc2 = (byte1 & 3) << 4 | byte2 >> 4;\n\t\n\t    var enc3;\n\t    var enc4;\n\t    if (isNaN(byte2)) {\n\t      enc3 = enc4 = 64;\n\t    } else {\n\t      enc3 = (byte2 & 15) << 2 | byte3 >> 6;\n\t      if (isNaN(byte3)) {\n\t        enc4 = 64;\n\t      } else {\n\t        enc4 = byte3 & 63;\n\t      }\n\t    }\n\t\n\t    outputStr += b64.charAt(enc1) + b64.charAt(enc2) + b64.charAt(enc3) + b64.charAt(enc4);\n\t  }\n\t\n\t  return outputStr;\n\t}\n\n/***/ },\n/* 7 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\t/**\n\t * Create a canvas element, set style values and append it to the container if defined\n\t * Use Cases:\n\t * 1. DEFAULT: DDD.canvas(container);\n\t *\n\t * 2. STAGING: DDD.canvas(null, {});\n\t * (useful for staging canvases, render things on the side for performance optimization)\n\t *\n\t * 3. FULL:\n\t * DDD.canvas(container, {\n\t *   w: width, h: height,\n\t *   position: 'cssPosition',\n\t *   top: #css_top, left: #css_eft,\n\t *   zi: #css_z-index\n\t *   font: '12px fontName'\n\t * });\n\t *\n\t * @param {Element}   container          Element where canvas should be appended.\n\t * @param {Object}    options            Styling data:\n\t * @param {Number}    options.w          Width of canvas.\n\t * @param {Number}    options.h          Height of Canvas.\n\t * @param {String}    options.position   CSS position.\n\t * @param {Number}    options.top        CSS top.\n\t * @param {Number}    options.left       CSS left.\n\t * @param {Number}    options.zi         CSS z-index\n\t */\n\tfunction canvas(container, options) {\n\t  var canvas = document.createElement('canvas');\n\t  var ctx = canvas.getContext('2d');\n\t\n\t  options = options || {};\n\t\n\t  canvas.width = options.w || window.innerWidth;\n\t  canvas.height = options.h || window.innerHeight;\n\t\n\t  canvas.style.position = options.position || 'absolute';\n\t  canvas.style.top = options.top || 0;\n\t  canvas.style.left = options.left || 0;\n\t  canvas.style.zIndex = options.zi || 9;\n\t\n\t  if (options.css) {\n\t    for (var key in options.css) {\n\t      canvas.style[key] = options.css[key];\n\t    }\n\t  }\n\t\n\t  ctx.font = options.font || '12px Inconsolata';\n\t\n\t  if (container) {\n\t    container.appendChild(canvas);\n\t  }\n\t\n\t  return {\n\t    container: container,\n\t    canvas: canvas,\n\t    w: canvas.width,\n\t    h: canvas.height,\n\t    ctx: ctx,\n\t    center: {\n\t      x: canvas.width / 2,\n\t      y: canvas.height / 2\n\t    }\n\t  };\n\t}\n\t\n\tmodule.exports = canvas;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar math = __webpack_require__(1);\n\t/**\n\t * Create a new map instance\n\t *\n\t * USAGE: var map = new DDD.Map({zoom: #, width: #, height: #, center: {lon: #, lat: #}});\n\t *\n\t * @param {Object} config             An object with the configuration options\n\t * @param {Number} config.zoom        The map zoom\n\t * @param {Number} config.width       The width of the map container\n\t * @param {Number} config.height      The height of the map container\n\t * @param {Object} config.center      Object with the longitude and latitude options for the center of the map\n\t * @param {Number} config.center.lon  Map center longitude\n\t * @param {Number} config.center.lat  Map center latitude\n\t */\n\tfunction Map(config) {\n\t  var w = config.width || window.innerWidth;\n\t  var h = config.height || window.innerHeight;\n\t  var zoom = config.zoom || 11;\n\t\n\t  if (config.center) {\n\t    this.center = {\n\t      lon: config.center.lon,\n\t      lat: config.center.lat\n\t    };\n\t  } else {\n\t    this.center = {};\n\t  }\n\t\n\t  this.hasCenter = null;\n\t  this.updateSize(w, h, zoom);\n\t}\n\t\n\tMap.prototype.updateSize = function (w, h, zoom) {\n\t  this.stageWidth = w;\n\t  this.stageCenterY = h / 2;\n\t  this.zoom = zoom || this.zoom;\n\t  this.zoomX = this.stageWidth * this.zoom;\n\t  this.zoomY = this.stageCenterY * this.zoom;\n\t  this.zoomRad = this.zoomX / 360;\n\t\n\t  this.newCenter(this.center.lon, this.center.lat);\n\t};\n\t\n\tMap.prototype.newCenter = function (lon, lat) {\n\t  this.hasCenter = false;\n\t  this.convertCoordinates(lon, lat);\n\t  this.hasCenter = true;\n\t};\n\t\n\tMap.prototype.convertCoordinates = function (lon, lat) {\n\t  var latRad = +lat * math.toRad;\n\t  var mercatorN = Math.log(Math.tan(math.QUARTER_PI + latRad / 2));\n\t  var x = (+lon + 180) * this.zoomRad;\n\t  var y = this.zoomY - this.zoomX * mercatorN / math.TWO_PI;\n\t\n\t  if (this.hasCenter) {\n\t    x -= this.center.x;\n\t    y -= this.center.y;\n\t  } else {\n\t    this.center.x = x;\n\t    this.center.y = y;\n\t  }\n\t\n\t  return { x: x, y: y };\n\t};\n\t\n\tmodule.exports = {\n\t  Map: Map\n\t};\n\n/***/ },\n/* 9 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar json = function json(options) {\n\t  var req = new DataRequest();\n\t  return req.json(options);\n\t};\n\t\n\tvar image = function image(options) {\n\t  var o = new DataRequest();\n\t  o.req.overrideMimeType('text/plain; charset=x-user-defined');\n\t\n\t  return o.getD(options).then(function (res) {\n\t    if (res.ret !== undefined) {\n\t      return res;\n\t    } else {\n\t      return res.data;\n\t    }\n\t  }).catch(function (err) {\n\t    console.error(err);\n\t  });\n\t};\n\t\n\tvar audio = function audio(options) {\n\t  var o = new DataRequest();\n\t  o.req.responseType = 'arraybuffer';\n\t\n\t  return o.getD(options).then(function (res) {\n\t    return res;\n\t  }).catch(function (err) {\n\t    console.error('Error fetching audio file', err);\n\t  });\n\t};\n\t\n\tvar DataRequest = function DataRequest() {\n\t  this.req = new XMLHttpRequest();\n\t};\n\t\n\tmodule.exports = {\n\t  json: json,\n\t  image: image,\n\t  audio: audio,\n\t  DataRequest: DataRequest\n\t};\n\t\n\tDataRequest.prototype.abort = function () {\n\t  this.req.abort();\n\t};\n\t\n\tDataRequest.prototype.json = function (options) {\n\t  this.req.overrideMimeType('application/json');\n\t\n\t  return this.getD(options).then(function (res) {\n\t    if (res.ret !== undefined) {\n\t      res.data = JSON.parse(res.data);\n\t      return res;\n\t    } else {\n\t      return JSON.parse(res.data);\n\t    }\n\t  }).catch(function (err) {\n\t    console.error('Error in data request, reason:', err);\n\t  });\n\t};\n\t\n\tDataRequest.prototype.getD = function (options) {\n\t  if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n\t    if (!options.url) {\n\t      console.error('The request did not receive a url, instead got', options.url);\n\t      return;\n\t    }\n\t  } else if (typeof options === 'string' && options.length > 0) {\n\t    options = {\n\t      url: options\n\t    };\n\t  }\n\t\n\t  var msg;\n\t  var progress;\n\t  var progressBar = false;\n\t  var req = this.req;\n\t  var loadingMsg = options.loadingMsg || 'Loading';\n\t  var container = options.container || document.body;\n\t\n\t  var loadingWrapper = container.querySelector('.loading');\n\t\n\t  if (!loadingWrapper) {\n\t    loadingWrapper = document.createElement('div');\n\t    loadingWrapper.className = 'loading';\n\t    container.appendChild(loadingWrapper);\n\t  }\n\t\n\t  var hasLoading = !!options.loadingEle;\n\t  var loadingEle = hasLoading ? options.loadingEle : null;\n\t\n\t  if (!loadingEle) {\n\t    var firstLoadingEle = container.querySelector('.loading-ele');\n\t    loadingEle = document.createElement('div');\n\t    loadingEle.className = 'loadingEle';\n\t\n\t    if (firstLoadingEle) {\n\t      loadingWrapper.insertBefore(firstLoadingEle, loadingEle);\n\t    } else {\n\t      loadingWrapper.appendChild(loadingEle);\n\t    }\n\t  }\n\t\n\t  function displayProgress() {\n\t    loadingEle.style.opacity = 1;\n\t    loadingWrapper.style.zIndex = 9;\n\t\n\t    msg = loadingEle.querySelector('.loading-msg');\n\t    if (!msg) {\n\t      msg = document.createElement('p');\n\t      msg.className = 'loading-msg';\n\t      msg.innerText = loadingMsg;\n\t      loadingEle.appendChild(msg);\n\t    };\n\t  }\n\t\n\t  function updateProgress(event) {\n\t    if (event.lengthComputable) {\n\t      if (!progressBar) {\n\t        // console.log(loadingEle)\n\t        progress = loadingEle.querySelector('.progress');\n\t\n\t        if (!progress) {\n\t          progress = document.createElement('progress');\n\t          progress.className = 'progress';\n\t          progress.style.zIndex = 0;\n\t          progress.max = 100;\n\t          progress.value = 0;\n\t          loadingEle.insertBefore(progress, msg);\n\t          progressBar = true;\n\t        }\n\t      }\n\t      var value = event.loaded / event.total * 100;\n\t      progress.value = value;\n\t      msg.innerText = Math.floor(value) + '%' + '\\n' + loadingMsg;\n\t    } else {\n\t      // progress = document.createElement('div');\n\t      // progress.className = 'no-progress';\n\t      // loading.insertBefore(progress, msg);\n\t      req.onprogress = null;\n\t    }\n\t  }\n\t\n\t  function hideProgress() {\n\t    if (!hasLoading) {\n\t      loadingEle.style.display = 'none';\n\t    }\n\t    loadingWrapper.style.zIndex = 0;\n\t  }\n\t\n\t  return new Promise(function (resolve, reject) {\n\t    req.open('GET', options.url, true);\n\t    req.onloadstart = displayProgress;\n\t    req.onprogress = updateProgress;\n\t    req.onloadend = hideProgress;\n\t\n\t    req.onload = function () {\n\t      if (req.status === 200) {\n\t        resolve({ data: req.response, ret: options.ret });\n\t      } else {\n\t        reject(req.statusText);\n\t      }\n\t    };\n\t    req.onerror = function () {\n\t      reject('Network Error');\n\t    };\n\t\n\t    req.send(null);\n\t  });\n\t};\n\n/***/ },\n/* 10 */\n/***/ function(module, exports) {\n\n\t'use strict';\n\t\n\tvar color = {\n\t  rgbToHex: function rgbToHex(r, g, b) {\n\t    return '0x' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n\t  },\n\t\n\t  // http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\n\t  hexToRgb: function hexToRgb(hex) {\n\t    // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n\t    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n\t    hex = hex.replace(shorthandRegex, function (m, r, g, b) {\n\t      return r + r + g + g + b + b;\n\t    });\n\t\n\t    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n\t    return result ? {\n\t      r: parseInt(result[1], 16),\n\t      g: parseInt(result[2], 16),\n\t      b: parseInt(result[3], 16)\n\t    } : null;\n\t  },\n\t\n\t  convertAlpha: function convertAlpha(processingAlpha) {\n\t    var avg = 255 / processingAlpha;\n\t    var cssA = 1 / avg;\n\t    return cssA;\n\t  },\n\t\n\t  getRGBA: function getRGBA(c, a) {\n\t    return 'rgba(' + c.r + ',' + c.g + ',' + c.b + ',' + a + ')';\n\t  }\n\t};\n\t\n\tmodule.exports = color;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar req = __webpack_require__(9).audio;\n\t\n\tvar Audio = function Audio(audios, cb) {\n\t  if (!audios || Object.prototype.toString.call(audios) !== '[object Object]') {\n\t    return console.error('The first parameter needs to be an Object.', 'Example:', '{audio1: \\'audio1.mp3\\', audio2: \\'audio2.mp3\\'}');\n\t  }\n\t\n\t  window.AudioContext = window.AudioContext || window.webkitAudioContext;\n\t\n\t  var total = Object.keys(audios).length;\n\t  var loaded = 0;\n\t  var retAudios = {};\n\t\n\t  this.ctx = new AudioContext();\n\t\n\t  for (var name in audios) {\n\t    req(audios[name], finishedLoading.bind(this), name, document.body, 'Loading Audio');\n\t  }\n\t\n\t  function finishedLoading(arrayBuffer, name) {\n\t    var a = this;\n\t    this.ctx.decodeAudioData(arrayBuffer, onSucess.bind(a), onError);\n\t\n\t    function onSucess(buffer) {\n\t      if (!buffer) {\n\t        console.error('Error decoding audio file:', name);\n\t        return;\n\t      }\n\t      var src = this.ctx.createBufferSource();\n\t      src.buffer = buffer;\n\t      retAudios[name] = src;\n\t      checkLoaded();\n\t    }\n\t\n\t    function onError(err) {\n\t      console.error('decodeAudioData error', err);\n\t    }\n\t  };\n\t\n\t  function checkLoaded() {\n\t    loaded++;\n\t    if (loaded === total) {\n\t      cb(retAudios);\n\t    }\n\t  };\n\t};\n\t\n\tAudio.prototype.source = function (src) {\n\t  var src = this.ctx.createBufferSource();\n\t  src.buffer = buffer;\n\t  src.connect(this.gainNode);\n\t  this.gainNode.connect(this.ctx.destination);\n\t\n\t  return src;\n\t};\n\t\n\tmodule.exports = {\n\t  Audio: Audio\n\t};\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar webgl = {\n\t  Stage: __webpack_require__(13),\n\t  Webgl: __webpack_require__(14)\n\t};\n\t\n\tmodule.exports = webgl;\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _math = __webpack_require__(1);\n\t\n\tvar Stage = function Stage(imgData, renderer, batchSize) {\n\t  this.children = [];\n\t  this.texture = {};\n\t  this.data = imgData;\n\t  this.renderer = renderer;\n\t\n\t  this.loadImg(imgData.url);\n\t\n\t  this.setBatchSize(batchSize);\n\t};\n\t\n\tmodule.exports = Stage;\n\t\n\tStage.prototype.setBatchSize = function (batchSize) {\n\t  var maxBatchSize = 16384;\n\t  var maxSize = 15000;\n\t\n\t  if (batchSize > maxBatchSize) {\n\t    batchSize = maxBatchSize;\n\t  }\n\t  if (batchSize > maxSize) {\n\t    batchSize = maxSize;\n\t  }\n\t  this.batchSize = batchSize;\n\t};\n\t\n\tStage.prototype.renderWebGL = function (renderer) {\n\t  renderer.currentRenderer.render(this);\n\t};\n\t\n\tStage.prototype.bindTexture = function () {\n\t  var gl = this.renderer.gl;\n\t\n\t  var texture = this.texture;\n\t  if (!texture.glTexture) {\n\t    texture.glTexture = gl.createTexture();\n\t  }\n\t\n\t  gl.bindTexture(gl.TEXTURE_2D, texture.glTexture);\n\t\n\t  /*----------  SET ALPHA  ----------*/\n\t  gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n\t  gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\t\n\t  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.img);\n\t\n\t  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\t\n\t  if (texture.mipmap && texture.isPowerOfTwo) {\n\t    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\n\t    gl.generateMipmap(gl.TEXTURE_2D);\n\t  } else {\n\t    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n\t  }\n\t\n\t  if (!texture.isPowerOfTwo) {\n\t    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n\t    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n\t  } else {\n\t    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n\t    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n\t  }\n\t\n\t  return true;\n\t};\n\t\n\tStage.prototype.loadImg = function (url) {\n\t  this.img = new Image();\n\t  this.img.onload = this.imgLoaded.bind(this);\n\t  this.img.src = url;\n\t};\n\t\n\tStage.prototype.imgLoaded = function () {\n\t  var w = this.img.naturalWidth;\n\t  var h = this.img.naturalHeight;\n\t\n\t  var texture = {\n\t    loaded: true,\n\t    isPowerOfTwo: (0, _math.isPowerOfTwo)(w, h)\n\t  };\n\t\n\t  var frames = [];\n\t  for (var i = 0; i < this.data.frames.length; i++) {\n\t    var frame = this.data.frames[i];\n\t\n\t    frames.push({\n\t      width: frame.w,\n\t      height: frame.h,\n\t      uvs: [frame.x / w, frame.y / h, (frame.x + frame.w) / w, (frame.y + frame.h) / h]\n\t    });\n\t  }\n\t  this.renderer.frames = frames;\n\t  this.texture = texture;\n\t  this.bindTexture();\n\t\n\t  if (this.data.cb) {\n\t    this.data.cb();\n\t  }\n\t};\n\t\n\tStage.prototype.particle = function (obj) {\n\t  obj = obj || {};\n\t  obj.scale = obj.scale || new DDD.Point(1, 1);\n\t  obj.alpha = obj.alpha || 1;\n\t  obj.rotation = obj.rotation || 0;\n\t  obj.x = obj.x || 0;\n\t  obj.y = obj.y || 0;\n\t  obj.frame = obj.frame || 0;\n\t\n\t  this.children.push(obj);\n\t\n\t  if (this.children.length > this.batchSize) {\n\t    this.setBatchSize(this.children.length);\n\t  }\n\t  return obj;\n\t};\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _RenderTarget = __webpack_require__(15);\n\t\n\tvar _RenderTarget2 = _interopRequireDefault(_RenderTarget);\n\t\n\tvar _ObjectRenderer = __webpack_require__(16);\n\t\n\tvar _ObjectRenderer2 = _interopRequireDefault(_ObjectRenderer);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Renderer = function Renderer(container, canvasOptions) {\n\t  this.container = container;\n\t  canvasOptions = canvasOptions || {};\n\t\n\t  this.width = canvasOptions.width || window.innerWidth;\n\t  this.height = canvasOptions.height || window.innerHeight;\n\t  this.canvas = document.createElement('canvas');\n\t  this.canvas.style.position = 'absolute';\n\t  container.appendChild(this.canvas);\n\t\n\t  var gl = this.canvas.getContext('webgl') || this.canvas.getContext('experimental-webgl', ctxOptions);\n\t  this.gl = gl;\n\t\n\t  gl.disable(gl.DEPTH_TEST);\n\t  gl.disable(gl.CULL_FACE);\n\t  gl.enable(gl.BLEND);\n\t\n\t  this.renderTarget = new _RenderTarget2.default(gl, this.width, this.height);\n\t  this.currentRenderer = new _ObjectRenderer2.default(gl, this);\n\t\n\t  this.resize(this.width, this.height);\n\t};\n\t\n\tmodule.exports = Renderer;\n\t\n\tRenderer.prototype.render = function (object) {\n\t  object.renderWebGL(this);\n\t};\n\t\n\tRenderer.prototype.resize = function (width, height) {\n\t  this.width = this.canvas.width = width;\n\t  this.height = this.canvas.height = height;\n\t\n\t  this.gl.viewport(0, 0, width, height);\n\t};\n\n/***/ },\n/* 15 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _math = __webpack_require__(1);\n\t\n\tvar RenderTarget = function RenderTarget(gl, width, height) {\n\t  this.gl = gl;\n\t  this.size = new _math.Rectangle(0, 0, 1, 1);\n\t  this.projectionMatrix = new _math.Matrix();\n\t\n\t  this.resize(width, height);\n\t};\n\t\n\tmodule.exports = RenderTarget;\n\t\n\tRenderTarget.prototype.resize = function (width, height) {\n\t  width = width | 0;\n\t  height = height | 0;\n\t\n\t  if (this.size.width === width && this.size.height === height) {\n\t    return;\n\t  }\n\t\n\t  this.size.width = width;\n\t  this.size.height = height;\n\t\n\t  var pm = this.projectionMatrix.identity();\n\t\n\t  pm.a = 2 / this.size.width;\n\t  pm.d = -2 / this.size.height;\n\t  pm.tx = -1;\n\t  pm.ty = 1;\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _Shader = __webpack_require__(17);\n\t\n\tvar _Shader2 = _interopRequireDefault(_Shader);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar ObjectRenderer = function ObjectRenderer(gl, renderer) {\n\t  this.renderer = renderer;\n\t  this.gl = gl;\n\t  this.start();\n\t};\n\t\n\tmodule.exports = ObjectRenderer;\n\t\n\tObjectRenderer.prototype.start = function () {\n\t  var gl = this.gl;\n\t  var shader = new _Shader2.default(gl);\n\t\n\t  this.properties = [\n\t  // verticesData\n\t  {\n\t    attribute: shader.attributes.aVertexPosition,\n\t    size: 2\n\t  },\n\t  // positionData\n\t  {\n\t    attribute: shader.attributes.aPositionCoord,\n\t    size: 2\n\t  },\n\t  // rotationData\n\t  {\n\t    attribute: shader.attributes.aRotation,\n\t    size: 1\n\t  },\n\t  // uvsData\n\t  {\n\t    attribute: shader.attributes.aTextureCoord,\n\t    size: 2\n\t  },\n\t  // alphaData\n\t  {\n\t    attribute: shader.attributes.aAlpha,\n\t    size: 1\n\t  }];\n\t\n\t  for (var i = 0; i < this.properties.length; i++) {\n\t    gl.enableVertexAttribArray(i);\n\t  }\n\t\n\t  var m = this.renderer.renderTarget.projectionMatrix;\n\t  gl.uniformMatrix3fv(shader.uniforms.projectionMatrix._location, false, m.toArray(true));\n\t};\n\t\n\tObjectRenderer.prototype.render = function (container) {\n\t  var texture = container.texture;\n\t  var children = container.children;\n\t  var total = children.length;\n\t  var maxSize = container.maxSize;\n\t  this.size = container.batchSize;\n\t  var gl = this.gl;\n\t\n\t  if (total === 0) {\n\t    return;\n\t  } else if (total > maxSize) {\n\t    total = maxSize;\n\t  }\n\t\n\t  if (!this.data) {\n\t    this.initBuffers();\n\t    for (var i = 0; i < this.properties.length; i++) {\n\t      var property = this.properties[i];\n\t      gl.vertexAttribPointer(property.attribute, property.size, gl.FLOAT, false, this.stride * 4, property.offset * 4);\n\t    }\n\t  }\n\t\n\t  this.updateData(children, total);\n\t\n\t  gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.data);\n\t  gl.drawElements(gl.TRIANGLES, total * 6, gl.UNSIGNED_SHORT, 0);\n\t};\n\t\n\tObjectRenderer.prototype.initBuffers = function () {\n\t  var gl = this.gl;\n\t\n\t  var dynamicOffset = 0;\n\t  this.stride = 0;\n\t\n\t  for (var i = 0; i < this.properties.length; i++) {\n\t    var property = this.properties[i];\n\t\n\t    property.offset = dynamicOffset;\n\t    dynamicOffset += property.size;\n\t    this.stride += property.size;\n\t  }\n\t\n\t  this.data = new Float32Array(this.size * this.stride * 4);\n\t\n\t  gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer());\n\t  gl.bufferData(gl.ARRAY_BUFFER, this.data, gl.DYNAMIC_DRAW);\n\t\n\t  var numIndices = this.size * 6;\n\t  var indices = new Uint16Array(numIndices);\n\t\n\t  for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n\t    indices[i] = j;\n\t    indices[i + 1] = j + 1;\n\t    indices[i + 2] = j + 2;\n\t    indices[i + 3] = j;\n\t    indices[i + 4] = j + 2;\n\t    indices[i + 5] = j + 3;\n\t  }\n\t\n\t  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, gl.createBuffer());\n\t  gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\n\t};\n\t\n\tObjectRenderer.prototype.updateData = function (children, amount) {\n\t  var stride = this.stride;\n\t  var n = 0;\n\t  var data = this.data;\n\t  var textures = this.renderer.frames;\n\t\n\t  for (var i = 0; i < amount; i++) {\n\t    var target = children[i];\n\t    var texture = textures[target.frame];\n\t    var w = texture.width * target.scale;\n\t    var h = texture.height * target.scale;\n\t\n\t    var x = target.x;\n\t    var y = target.y;\n\t    var r = target.rotation;\n\t    var uvs = texture.uvs;\n\t    var a = target.alpha;\n\t    /*\n\t      [\n\t        vertice   pos   rot   uvs    alpha\n\t        w,h,      x,y,  r,    x,y,   a\n\t        w,h,      x,y,  r,    x,y,   a\n\t        w,h,      x,y,  r,    x,y,   a\n\t        w,h,      x,y,  r,    x,y,   a\n\t      ]\n\t    */\n\t    /*----------  Vertex 1  ----------*/\n\t    data[n] = -w;data[++n] = -h; // Size\n\t    data[++n] = x;data[++n] = y; // Pos\n\t    data[++n] = r; // Rotation\n\t    data[++n] = uvs[0];data[++n] = uvs[1]; // Uvs\n\t    data[++n] = a; // Alpha\n\t\n\t    /*----------  Vertex 2  ----------*/\n\t    data[++n] = w;data[++n] = -h;\n\t    data[++n] = x;data[++n] = y;\n\t    data[++n] = r;\n\t    data[++n] = uvs[2];data[++n] = uvs[1];\n\t    data[++n] = a;\n\t\n\t    /*----------  Vertex 3  ----------*/\n\t    data[++n] = w;data[++n] = h;\n\t    data[++n] = x;data[++n] = y;\n\t    data[++n] = r;\n\t    data[++n] = uvs[2];data[++n] = uvs[3];\n\t    data[++n] = a;\n\t\n\t    /*----------  Vertex 4  ----------*/\n\t    data[++n] = -w;data[++n] = h;\n\t    data[++n] = x;data[++n] = y;\n\t    data[++n] = r;\n\t    data[++n] = uvs[0];data[++n] = uvs[3];\n\t\n\t    data[++n] = a;\n\t    n++;\n\t  }\n\t};\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t'use strict';\n\t\n\tvar _particles = __webpack_require__(18);\n\t\n\tvar _particles2 = _interopRequireDefault(_particles);\n\t\n\tvar _particles3 = __webpack_require__(19);\n\t\n\tvar _particles4 = _interopRequireDefault(_particles3);\n\t\n\tfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\t\n\tvar Shader = function Shader(gl) {\n\t  this.gl = gl;\n\t  this.uniforms = {\n\t    projectionMatrix: {}\n\t  };\n\t\n\t  this.attributes = {};\n\t\n\t  var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n\t  gl.shaderSource(vertexShader, _particles2.default);\n\t  gl.compileShader(vertexShader);\n\t\n\t  var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n\t  gl.shaderSource(fragmentShader, _particles4.default);\n\t  gl.compileShader(fragmentShader);\n\t\n\t  var program = gl.createProgram();\n\t  gl.attachShader(program, vertexShader);\n\t  gl.attachShader(program, fragmentShader);\n\t  gl.linkProgram(program);\n\t\n\t  // clear shader from memory after linking program\n\t  gl.deleteShader(vertexShader);\n\t  gl.deleteShader(fragmentShader);\n\t\n\t  this.program = program;\n\t  gl.useProgram(program);\n\t  this.cacheUniformLocations(['projectionMatrix']);\n\t  this.cacheAttributeLocations(['aVertexPosition', 'aTextureCoord', 'aAlpha', 'aPositionCoord', 'aRotation']);\n\t};\n\t\n\tmodule.exports = Shader;\n\t\n\tShader.prototype.cacheUniformLocations = function (keys) {\n\t  for (var i = 0; i < keys.length; ++i) {\n\t    this.uniforms[keys[i]]._location = this.gl.getUniformLocation(this.program, keys[i]);\n\t  }\n\t};\n\t\n\tShader.prototype.cacheAttributeLocations = function (keys) {\n\t  for (var i = 0; i < keys.length; ++i) {\n\t    this.attributes[keys[i]] = this.gl.getAttribLocation(this.program, keys[i]);\n\t  }\n\t};\n\n/***/ },\n/* 18 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\nattribute float aAlpha;\\n\\nattribute vec2 aPositionCoord;\\nattribute float aRotation;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\nvarying float vAlpha;\\n\\nvoid main(void){\\n  float cosine = cos(aRotation);\\n  float sine = sin(aRotation);\\n\\n  vec3 v;\\n  v.x = aVertexPosition.x * cosine - aVertexPosition.y * sine;\\n  v.y = aVertexPosition.x * sine + aVertexPosition.y * cosine;\\n  v.z = 1.0;\\n\\n  // Move\\n  v.xy += aPositionCoord;\\n\\n  gl_Position = vec4(projectionMatrix * v, 1.0);\\n\\n  vTextureCoord = aTextureCoord;\\n  vAlpha = aAlpha;\\n}\"\n\n/***/ },\n/* 19 */\n/***/ function(module, exports) {\n\n\tmodule.exports = \"precision lowp float;\\n\\nvarying vec2 vTextureCoord;\\nvarying float vAlpha;\\n\\nuniform sampler2D uImage;\\n\\nvoid main(void){\\n  vec4 color = texture2D(uImage, vTextureCoord) * vAlpha;\\n  if (color.a == 0.0) discard;\\n  gl_FragColor = color;\\n}\"\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// ddd.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c13ada285af4f302d519","global.DDD = Object.assign(\n  require('./math'),\n  require('./html'),\n  require('./Map'),\n  require('./http/req'),\n  require('./color'),\n  require('./audio'),\n  require('./webgl')\n);\n\n\n\n// WEBPACK FOOTER //\n// ./index.js","var Transform = function() {\n  this.reset();\n};\n\nconst math = {\n  PI: Math.PI,\n  TWO_PI: Math.PI * 2,\n  QUARTER_PI: Math.PI / 4,\n  toRad: Math.PI / 180,\n\n  random: function(min, max, isFloat) {\n    var random = Math.floor(Math.random() * (max - min)) + min;\n\n    if (isFloat) {\n      random = Math.random() * (max - min) + min;\n    }\n\n    return random;\n  },\n\n  sizeFromPercentage: function(percent, totalSize) {\n    return percent / 100 * totalSize;\n  },\n\n  getPercent: function(section, total) {\n    return (section / total) * 100;\n  },\n\n  isPowerOfTwo: function(width, height) {\n    return (width > 0 && (width & (width - 1)) === 0 && height > 0 && (height & (height - 1)) === 0);\n  },\n\n  Transform: Transform,\n\n  // Shapes\n  Point: require('./Point'),\n  Rectangle: require('./Rectangle'),\n  Matrix: require('./Matrix'),\n  Vector: require('./Vector')\n};\n\nmodule.exports = math;\n\n// Last updated November 2011\n// By Simon Sarris\n// www.simonsarris.com\n// sarris@acm.org\n//\n// Free to use and distribute at will\n// So long as you are nice to people, etc\n\n// Simple class for keeping track of the current transformation matrix\n\n// For instance:\n//    var t = new Transform();\n//    t.rotate(5);\n//    var m = t.m;\n//    ctx.setTransform(m[0], m[1], m[2], m[3], m[4], m[5]);\n\n// Is equivalent to:\n//    ctx.rotate(5);\n\n// But now you can retrieve it :)\n\n// Remember that this does not account for any CSS transforms applied to the canvas\n\nTransform.prototype.reset = function() {\n  this.m = [1,0,0,1,0,0];\n};\n\nTransform.prototype.multiply = function(matrix) {\n  var m11 = this.m[0] * matrix.m[0] + this.m[2] * matrix.m[1];\n  var m12 = this.m[1] * matrix.m[0] + this.m[3] * matrix.m[1];\n\n  var m21 = this.m[0] * matrix.m[2] + this.m[2] * matrix.m[3];\n  var m22 = this.m[1] * matrix.m[2] + this.m[3] * matrix.m[3];\n\n  var dx = this.m[0] * matrix.m[4] + this.m[2] * matrix.m[5] + this.m[4];\n  var dy = this.m[1] * matrix.m[4] + this.m[3] * matrix.m[5] + this.m[5];\n\n  this.m[0] = m11;\n  this.m[1] = m12;\n  this.m[2] = m21;\n  this.m[3] = m22;\n  this.m[4] = dx;\n  this.m[5] = dy;\n};\n\nTransform.prototype.invert = function() {\n  var d = 1 / (this.m[0] * this.m[3] - this.m[1] * this.m[2]);\n  var m0 = this.m[3] * d;\n  var m1 = -this.m[1] * d;\n  var m2 = -this.m[2] * d;\n  var m3 = this.m[0] * d;\n  var m4 = d * (this.m[2] * this.m[5] - this.m[3] * this.m[4]);\n  var m5 = d * (this.m[1] * this.m[4] - this.m[0] * this.m[5]);\n  this.m[0] = m0;\n  this.m[1] = m1;\n  this.m[2] = m2;\n  this.m[3] = m3;\n  this.m[4] = m4;\n  this.m[5] = m5;\n};\n\nTransform.prototype.rotate = function(rad) {\n  var c = Math.cos(rad);\n  var s = Math.sin(rad);\n  var m11 = this.m[0] * c + this.m[2] * s;\n  var m12 = this.m[1] * c + this.m[3] * s;\n  var m21 = this.m[0] * -s + this.m[2] * c;\n  var m22 = this.m[1] * -s + this.m[3] * c;\n  this.m[0] = m11;\n  this.m[1] = m12;\n  this.m[2] = m21;\n  this.m[3] = m22;\n};\n\nTransform.prototype.translate = function(x, y) {\n  this.m[4] += this.m[0] * x + this.m[2] * y;\n  this.m[5] += this.m[1] * x + this.m[3] * y;\n};\n\nTransform.prototype.translateAndRotate = function(x, y, rad) {\n  var c = Math.cos(rad);\n  var s = Math.sin(rad);\n  var m11 = this.m[0] * c + this.m[2] * s;\n  var m12 = this.m[1] * c + this.m[3] * s;\n  var m21 = this.m[0] * -s + this.m[2] * c;\n  var m22 = this.m[1] * -s + this.m[3] * c;\n  this.m[4] += this.m[0] * x + this.m[2] * y;\n  this.m[5] += this.m[1] * x + this.m[3] * y;\n  this.m[0] = m11;\n  this.m[1] = m12;\n  this.m[2] = m21;\n  this.m[3] = m22;\n};\n\nTransform.prototype.scale = function(sx, sy) {\n  this.m[0] *= sx;\n  this.m[1] *= sx;\n  this.m[2] *= sy;\n  this.m[3] *= sy;\n};\n\nTransform.prototype.transformPoint = function(px, py) {\n  var x = px;\n  var y = py;\n  px = x * this.m[0] + y * this.m[2] + this.m[4];\n  py = x * this.m[1] + y * this.m[3] + this.m[5];\n  return [px, py];\n};\n\n\n\n// WEBPACK FOOTER //\n// ./math/index.js","var Point = function(x, y) {\n  this.x = x || 0;\n  this.y = y || 0;\n};\n\nmodule.exports = Point;\n\nPoint.prototype.clone = function() {\n  return new Point(this.x, this.y);\n};\n\nPoint.prototype.copy = function(p) {\n  this.set(p.x, p.y);\n};\n\nPoint.prototype.equals = function(p) {\n  return (p.x === this.x) && (p.y === this.y);\n};\n\nPoint.prototype.set = function(x, y) {\n  this.x = x || 0;\n  this.y = y || y !== 0 ? this.x : 0;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./math/Point.js","var Rectangle = function(x, y, width, height) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.width = width || 0;\n  this.height = height || 0;\n};\n\nmodule.exports = Rectangle;\n\n\n\n// WEBPACK FOOTER //\n// ./math/Rectangle.js","var Point = require('./Point');\n\nvar Matrix = function(a, b, c, d, tx, ty) {\n  this.a = a || 1;\n  this.b = b || 0;\n  this.c = c || 0;\n  this.d = d || 1;\n  this.tx = tx || 0;\n  this.ty = ty || 0;\n};\n\nmodule.exports = Matrix;\n\nMatrix.prototype.toArray = function(transpose, out) {\n  if (!this.array) {\n    this.array = new Float32Array(9);\n  }\n\n  var array = out || this.array;\n\n  if (transpose) {\n    array[0] = this.a;\n    array[1] = this.b;\n    array[2] = 0;\n    array[3] = this.c;\n    array[4] = this.d;\n    array[5] = 0;\n    array[6] = this.tx;\n    array[7] = this.ty;\n    array[8] = 1;\n  } else {\n    array[0] = this.a;\n    array[1] = this.c;\n    array[2] = this.tx;\n    array[3] = this.b;\n    array[4] = this.d;\n    array[5] = this.ty;\n    array[6] = 0;\n    array[7] = 0;\n    array[8] = 1;\n  }\n\n  return array;\n};\n\nMatrix.prototype.apply = function(pos, newPos) {\n  newPos = newPos || new Point();\n\n  var x = pos.x;\n  var y = pos.y;\n\n  newPos.x = this.a * x + this.c * y + this.tx;\n  newPos.y = this.b * x + this.d * y + this.ty;\n\n  return newPos;\n};\n\nMatrix.prototype.applyInverse = function(pos, newPos) {\n  newPos = newPos || new Point();\n\n  var id = 1 / (this.a * this.d + this.c * -this.b);\n\n  var x = pos.x;\n  var y = pos.y;\n\n  newPos.x = this.d * id * x + -this.c * id * y + (this.ty * this.c - this.tx * this.d) * id;\n  newPos.y = this.a * id * y + -this.b * id * x + (-this.ty * this.a + this.tx * this.b) * id;\n\n  return newPos;\n};\n\nMatrix.prototype.translate = function(x, y) {\n  this.tx += x;\n  this.ty += y;\n\n  return this;\n};\n\nMatrix.prototype.scale = function(x, y) {\n  this.a *= x;\n  this.d *= y;\n  this.c *= x;\n  this.b *= y;\n  this.tx *= x;\n  this.ty *= y;\n\n  return this;\n};\n\nMatrix.prototype.rotate = function(angle) {\n  var cos = Math.cos(angle);\n  var sin = Math.sin(angle);\n\n  var a1 = this.a;\n  var c1 = this.c;\n  var tx1 = this.tx;\n\n  this.a = a1 * cos - this.b * sin;\n  this.b = a1 * sin + this.b * cos;\n  this.c = c1 * cos - this.d * sin;\n  this.d = c1 * sin + this.d * cos;\n  this.tx = tx1 * cos - this.ty * sin;\n  this.ty = tx1 * sin + this.ty * cos;\n\n  return this;\n};\n\nMatrix.prototype.append = function(matrix) {\n  var a1 = this.a;\n  var b1 = this.b;\n  var c1 = this.c;\n  var d1 = this.d;\n\n  this.a  = matrix.a * a1 + matrix.b * c1;\n  this.b  = matrix.a * b1 + matrix.b * d1;\n  this.c  = matrix.c * a1 + matrix.d * c1;\n  this.d  = matrix.c * b1 + matrix.d * d1;\n\n  this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n  this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n\n  return this;\n};\n\nMatrix.prototype.setTransform = function(x, y, pivotX, pivotY, scaleX, scaleY, rotation) {\n  var sr = Math.sin(rotation);\n  var cr = Math.cos(rotation);\n\n  var a =  cr * scaleX;\n  var b =  sr * scaleX;\n  var c = -sr * scaleY;\n  var d =  cr * scaleY;\n\n  this.a = a + c;\n  this.b = b + d;\n  this.c = a + c;\n  this.d = b + d;\n\n  this.tx = x + (pivotX * a + pivotY * c);\n  this.ty = y + (pivotX * b + pivotY * d);\n\n  return this;\n};\n\nMatrix.prototype.prepend = function(matrix) {\n  var tx1 = this.tx;\n\n  if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\n    var a1 = this.a;\n    var c1 = this.c;\n    this.a = a1 * matrix.a + this.b * matrix.c;\n    this.b = a1 * matrix.b + this.b * matrix.d;\n    this.c = c1 * matrix.a + this.d * matrix.c;\n    this.d = c1 * matrix.b + this.d * matrix.d;\n  }\n\n  this.tx = tx1 * matrix.a + this.ty * matrix.c + matrix.tx;\n  this.ty = tx1 * matrix.b + this.ty * matrix.d + matrix.ty;\n\n  return this;\n};\n\nMatrix.prototype.invert = function() {\n  var a1 = this.a;\n  var b1 = this.b;\n  var c1 = this.c;\n  var d1 = this.d;\n  var tx1 = this.tx;\n  var n = a1 * d1 - b1 * c1;\n\n  this.a = d1 / n;\n  this.b = -b1 / n;\n  this.c = -c1 / n;\n  this.d = a1 / n;\n  this.tx = (c1 * this.ty - d1 * tx1) / n;\n  this.ty = -(a1 * this.ty - b1 * tx1) / n;\n\n  return this;\n};\n\nMatrix.prototype.identity = function() {\n  this.a = 1;\n  this.b = 0;\n  this.c = 0;\n  this.d = 1;\n  this.tx = 0;\n  this.ty = 0;\n\n  return this;\n};\n\nMatrix.prototype.clone = function() {\n  var matrix = new Matrix();\n  matrix.a = this.a;\n  matrix.b = this.b;\n  matrix.c = this.c;\n  matrix.d = this.d;\n  matrix.tx = this.tx;\n  matrix.ty = this.ty;\n\n  return matrix;\n};\n\nMatrix.prototype.copy = function(matrix) {\n  matrix.a = this.a;\n  matrix.b = this.b;\n  matrix.c = this.c;\n  matrix.d = this.d;\n  matrix.tx = this.tx;\n  matrix.ty = this.ty;\n\n  return matrix;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./math/Matrix.js","// From Three.js Vector3\n// https://github.com/mrdoob/three.js/blob/cf584a60bdfd24c42eaa81d484533364742bda44/src/math/Vector3.js\n// All credits to them\n\nvar Vector = function(x, y, z) {\n  this.x = x || 0;\n  this.y = y || 0;\n  this.z = z || 0;\n};\n\nmodule.exports = Vector;\n\nVector.prototype.set = function(x, y, z) {\n  this.x = x;\n  this.y = y;\n  this.z = z;\n  return this;\n};\n\nVector.prototype.setX = function(x) {\n  this.x = x;\n  return this;\n};\n\nVector.prototype.setY = function(y) {\n  this.y = y;\n  return this;\n};\n\nVector.prototype.setZ = function(z) {\n  this.z = z;\n  return this;\n};\n\nVector.prototype.add = function(v) {\n  this.x += v.x;\n  this.y += v.y;\n  this.z += v.z;\n  return this;\n};\n\nVector.prototype.addScalar = function(s) {\n  this.x += s;\n  this.y += s;\n  this.z += s;\n  return this;\n};\n\nVector.prototype.sub = function(v) {\n  this.x -= v.x;\n  this.y -= v.y;\n  this.z -= v.z;\n  return this;\n};\n\nVector.prototype.subScalar = function(s) {\n  this.x -= s;\n  this.y -= s;\n  this.z -= s;\n  return this;\n};\n\nVector.prototype.subVectors = function(a, b) {\n  this.x = a.x - b.x;\n  this.y = a.y - b.y;\n  this.z = a.z - b.z;\n  return this;\n};\n\nVector.prototype.multiply = function(v) {\n  this.x *= v.x;\n  this.y *= v.y;\n  this.z *= v.z;\n  return this;\n};\n\nVector.prototype.multiplyScalar = function(s) {\n  if (isFinite(s)) {\n    this.x *= s;\n    this.y *= s;\n    this.z *= s;\n  } else {\n    this.x = 0;\n    this.y = 0;\n    this.z = 0;\n  }\n  return this;\n};\n\nVector.prototype.multiplyVectors = function(a, b) {\n  this.x = a.x * b.x;\n  this.y = a.y * b.y;\n  this.z = a.z * b.z;\n  return this;\n};\n\nVector.prototype.divide = function(v) {\n  this.x /= v.x;\n  this.y /= v.y;\n  this.z /= v.z;\n  return this;\n};\n\nVector.prototype.divideScalar = function(s) {\n  return this.multiplyScalar(1 / s);\n};\n\nVector.prototype.lengthSq = function() {\n  return this.x * this.x + this.y * this.y + this.z * this.z;\n};\n\nVector.prototype.length = function() {\n  return Math.sqrt(this.x * this.x + this.y * this.y + this.z * this.z);\n};\n\nVector.prototype.setLength = function(length) {\n  return this.multiplyScalar(length / this.length());\n};\n\nVector.prototype.distanceTo = function(v) {\n  return Math.sqrt(this.distanceToSquared(v));\n};\n\nVector.prototype.normalize = function() {\n  return this.divideScalar(this.length());\n};\n\nVector.prototype.distanceToSquared = function(v) {\n  var dx = this.x - v.x;\n  var dy = this.y - v.y;\n  var dz = this.z - v.z;\n  return dx * dx + dy * dy + dz * dz;\n};\n\nVector.prototype.limit = function(max) {\n  if (this.lengthSq() > max * max) {\n    this.normalize();\n    this.mult(max);\n  }\n\n  return this;\n};\n\nVector.prototype.copy = function(v) {\n  this.x = v.x;\n  this.y = v.y;\n  this.z = v.z;\n  return this;\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./math/Vector.js","var html = {\n  yearsMenu: yearsMenu,\n  resetCurrent: resetCurrent,\n  base64: base64,\n  canvas: require('./canvas')\n};\n\nmodule.exports = html;\n\n/**\n * @param {Number}    yearStart   First menu item\n * @param {Number}    yearEnd     Last menu item\n * @param {Number}    current     Default menu item to start with 'current' class\n * @param {Callback}  clickEvent  Name of the function to process the click events\n * @param {Callback}  callback    Name of the function for when the menu is ready\n */\nfunction yearsMenu(yearStart, yearEnd, current, clickEvent, callback) {\n  var yearsContainer = document.createElement('ul');\n  var currentYearBtn = '';\n  yearsContainer.id  = 'years';\n  yearsContainer.style.zIndex = 99999;\n\n  for (var year = yearStart; year <= yearEnd; year++) {\n    var btn   = document.createElement('li');\n    var label = document.createTextNode(year);\n\n    if (year === current) {\n      btn.className = 'current';\n      currentYearBtn = btn;\n    }\n\n    btn.appendChild(label);\n    yearsContainer.appendChild(btn);\n    btn.addEventListener('click', clickEvent, false);\n  }\n  callback(yearsContainer, currentYearBtn);\n}\n\nfunction resetCurrent(old, target, className) {\n  className = className || 'current';\n\n  if (old) {\n    old.classList.remove(className);\n  }\n  target.classList.add(className);\n}\n\n// This encoding function is from Philippe Tenenhaus's example at http://www.philten.com/us-xmlhttprequest-image/\nfunction base64(inputStr) {\n  var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';\n  var outputStr = '';\n  var i = 0;\n\n  while (i < inputStr.length) {\n    //all three \"& 0xff\" added below are there to fix a known bug\n    //with bytes returned by xhr.responseText\n    var byte1 = inputStr.charCodeAt(i++) & 0xff;\n    var byte2 = inputStr.charCodeAt(i++) & 0xff;\n    var byte3 = inputStr.charCodeAt(i++) & 0xff;\n\n    var enc1 = byte1 >> 2;\n    var enc2 = ((byte1 & 3) << 4) | (byte2 >> 4);\n\n    var enc3;\n    var enc4;\n    if (isNaN(byte2)) {\n      enc3 = enc4 = 64;\n    } else {\n      enc3 = ((byte2 & 15) << 2) | (byte3 >> 6);\n      if (isNaN(byte3)) {\n        enc4 = 64;\n      } else {\n        enc4 = byte3 & 63;\n      }\n    }\n\n    outputStr += b64.charAt(enc1) + b64.charAt(enc2) + b64.charAt(enc3) + b64.charAt(enc4);\n  }\n\n  return outputStr;\n}\n\n\n\n// WEBPACK FOOTER //\n// ./html/index.js","/**\n * Create a canvas element, set style values and append it to the container if defined\n * Use Cases:\n * 1. DEFAULT: DDD.canvas(container);\n *\n * 2. STAGING: DDD.canvas(null, {});\n * (useful for staging canvases, render things on the side for performance optimization)\n *\n * 3. FULL:\n * DDD.canvas(container, {\n *   w: width, h: height,\n *   position: 'cssPosition',\n *   top: #css_top, left: #css_eft,\n *   zi: #css_z-index\n *   font: '12px fontName'\n * });\n *\n * @param {Element}   container          Element where canvas should be appended.\n * @param {Object}    options            Styling data:\n * @param {Number}    options.w          Width of canvas.\n * @param {Number}    options.h          Height of Canvas.\n * @param {String}    options.position   CSS position.\n * @param {Number}    options.top        CSS top.\n * @param {Number}    options.left       CSS left.\n * @param {Number}    options.zi         CSS z-index\n */\nfunction canvas(container, options) {\n  var canvas = document.createElement('canvas');\n  var ctx = canvas.getContext('2d');\n\n  options = options || {};\n\n  canvas.width          = options.w || window.innerWidth;\n  canvas.height         = options.h || window.innerHeight;\n\n  canvas.style.position = options.position || 'absolute';\n  canvas.style.top      = options.top || 0;\n  canvas.style.left     = options.left || 0;\n  canvas.style.zIndex   = options.zi || 9;\n\n  if (options.css) {\n    for (var key in options.css) {\n      canvas.style[key] = options.css[key];\n    }\n  }\n\n  ctx.font = options.font || '12px Inconsolata';\n\n  if (container) {\n    container.appendChild(canvas);\n  }\n\n  return {\n    container: container,\n    canvas: canvas,\n    w: canvas.width,\n    h: canvas.height,\n    ctx: ctx,\n    center: {\n      x: canvas.width / 2,\n      y: canvas.height / 2\n    }\n  };\n}\n\nmodule.exports = canvas;\n\n\n\n// WEBPACK FOOTER //\n// ./html/canvas.js","var math = require('../math');\n/**\n * Create a new map instance\n *\n * USAGE: var map = new DDD.Map({zoom: #, width: #, height: #, center: {lon: #, lat: #}});\n *\n * @param {Object} config             An object with the configuration options\n * @param {Number} config.zoom        The map zoom\n * @param {Number} config.width       The width of the map container\n * @param {Number} config.height      The height of the map container\n * @param {Object} config.center      Object with the longitude and latitude options for the center of the map\n * @param {Number} config.center.lon  Map center longitude\n * @param {Number} config.center.lat  Map center latitude\n */\nfunction Map(config) {\n  var w = config.width || window.innerWidth;\n  var h = config.height || window.innerHeight;\n  var zoom = config.zoom || 11;\n\n  if (config.center) {\n    this.center = {\n      lon: config.center.lon,\n      lat: config.center.lat\n    };\n  } else {\n    this.center = {};\n  }\n\n  this.hasCenter  = null;\n  this.updateSize(w, h, zoom);\n}\n\nMap.prototype.updateSize = function(w, h, zoom) {\n  this.stageWidth   = w;\n  this.stageCenterY = h / 2;\n  this.zoom         = zoom || this.zoom;\n  this.zoomX        = this.stageWidth * this.zoom;\n  this.zoomY        = this.stageCenterY * this.zoom;\n  this.zoomRad      = this.zoomX / 360;\n\n  this.newCenter(this.center.lon, this.center.lat);\n};\n\nMap.prototype.newCenter = function(lon, lat) {\n  this.hasCenter = false;\n  this.convertCoordinates(lon, lat);\n  this.hasCenter = true;\n};\n\nMap.prototype.convertCoordinates = function(lon, lat) {\n  var latRad = +lat * math.toRad;\n  var mercatorN = Math.log(Math.tan(math.QUARTER_PI + (latRad / 2)));\n  var x = (+lon + 180) * this.zoomRad;\n  var y = (this.zoomY - (this.zoomX * mercatorN / math.TWO_PI));\n\n  if (this.hasCenter) {\n    x -= this.center.x;\n    y -= this.center.y;\n  } else {\n    this.center.x = x;\n    this.center.y = y;\n  }\n\n  return {x: x, y: y};\n};\n\nmodule.exports = {\n  Map: Map\n};\n\n\n\n// WEBPACK FOOTER //\n// ./Map/index.js","var json = function(options) {\n  var req = new DataRequest();\n  return req.json(options);\n};\n\nvar image = function(options) {\n  var o = new DataRequest();\n  o.req.overrideMimeType('text/plain; charset=x-user-defined');\n\n  return o.getD(options)\n  .then(function(res) {\n    if (res.ret !== undefined) {\n      return res;\n    } else {\n      return res.data;\n    }\n  })\n  .catch(function(err) {\n    console.error(err);\n  });\n};\n\nvar audio = function(options) {\n  var o = new DataRequest();\n  o.req.responseType = 'arraybuffer';\n\n  return o.getD(options)\n  .then(function(res) {\n    return res;\n  })\n  .catch(function(err) {\n    console.error('Error fetching audio file', err);\n  });\n};\n\nvar DataRequest = function() {\n  this.req = new XMLHttpRequest();\n};\n\nmodule.exports = {\n  json: json,\n  image: image,\n  audio: audio,\n  DataRequest: DataRequest\n};\n\nDataRequest.prototype.abort = function() {\n  this.req.abort();\n};\n\nDataRequest.prototype.json = function(options) {\n  this.req.overrideMimeType('application/json');\n\n  return this.getD(options)\n  .then(function(res) {\n    if (res.ret !== undefined) {\n      res.data = JSON.parse(res.data);\n      return res;\n    } else {\n      return JSON.parse(res.data);\n    }\n  })\n  .catch(function(err) {\n    console.error('Error in data request, reason:', err);\n  });\n};\n\nDataRequest.prototype.getD = function(options) {\n  if (typeof options === 'object') {\n    if (!options.url) {\n      console.error('The request did not receive a url, instead got', options.url);\n      return;\n    }\n  } else if (typeof options === 'string' && options.length > 0) {\n    options = {\n      url: options\n    };\n  }\n\n  var msg;\n  var progress;\n  var progressBar = false;\n  var req = this.req;\n  var loadingMsg = options.loadingMsg || 'Loading';\n  var container  = options.container || document.body;\n\n  var loadingWrapper = container.querySelector('.loading');\n\n  if (!loadingWrapper) {\n    loadingWrapper = document.createElement('div');\n    loadingWrapper.className = 'loading';\n    container.appendChild(loadingWrapper);\n  }\n\n  var hasLoading = !!options.loadingEle;\n  var loadingEle = hasLoading ? options.loadingEle : null;\n\n  if (!loadingEle) {\n    var firstLoadingEle = container.querySelector('.loading-ele');\n    loadingEle = document.createElement('div');\n    loadingEle.className = 'loadingEle';\n\n    if (firstLoadingEle) {\n      loadingWrapper.insertBefore(firstLoadingEle, loadingEle);\n    } else {\n      loadingWrapper.appendChild(loadingEle);\n    }\n  }\n\n  function displayProgress() {\n    loadingEle.style.opacity = 1;\n    loadingWrapper.style.zIndex = 9;\n\n    msg = loadingEle.querySelector('.loading-msg');\n    if (!msg) {\n      msg = document.createElement('p');\n      msg.className = 'loading-msg';\n      msg.innerText = loadingMsg;\n      loadingEle.appendChild(msg);\n    };\n  }\n\n  function updateProgress(event) {\n    if (event.lengthComputable) {\n      if (!progressBar) {\n        // console.log(loadingEle)\n        progress = loadingEle.querySelector('.progress');\n\n        if (!progress) {\n          progress              = document.createElement('progress');\n          progress.className    = 'progress';\n          progress.style.zIndex = 0;\n          progress.max          = 100;\n          progress.value        = 0;\n          loadingEle.insertBefore(progress, msg);\n          progressBar = true;\n        }\n      }\n      var value = event.loaded / event.total * 100;\n      progress.value = value;\n      msg.innerText = Math.floor(value) + '%' + '\\n' + loadingMsg;\n    } else {\n      // progress = document.createElement('div');\n      // progress.className = 'no-progress';\n      // loading.insertBefore(progress, msg);\n      req.onprogress = null;\n    }\n  }\n\n  function hideProgress() {\n    if (!hasLoading) {\n      loadingEle.style.display = 'none';\n    }\n    loadingWrapper.style.zIndex = 0;\n  }\n\n  return new Promise(function(resolve, reject) {\n    req.open('GET', options.url, true);\n    req.onloadstart = displayProgress;\n    req.onprogress  = updateProgress;\n    req.onloadend   = hideProgress;\n\n    req.onload = function() {\n      if (req.status === 200) {\n        resolve({data: req.response, ret: options.ret});\n      } else {\n        reject(req.statusText);\n      }\n    };\n    req.onerror = function() {\n      reject('Network Error');\n    };\n\n    req.send(null);\n  });\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./http/req.js","var color = {\n  rgbToHex: function(r, g, b) {\n    return '0x' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1);\n  },\n\n  // http://stackoverflow.com/questions/5623838/rgb-to-hex-and-hex-to-rgb\n  hexToRgb: function(hex) {\n    // Expand shorthand form (e.g. \"03F\") to full form (e.g. \"0033FF\")\n    var shorthandRegex = /^#?([a-f\\d])([a-f\\d])([a-f\\d])$/i;\n    hex = hex.replace(shorthandRegex, function(m, r, g, b) {\n      return r + r + g + g + b + b;\n    });\n\n    var result = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex);\n    return result ? {\n      r: parseInt(result[1], 16),\n      g: parseInt(result[2], 16),\n      b: parseInt(result[3], 16)\n    } : null;\n  },\n\n  convertAlpha: function(processingAlpha) {\n    var avg = 255 / processingAlpha;\n    var cssA = 1 / avg;\n    return cssA;\n  },\n\n  getRGBA: function(c, a) {\n    return 'rgba(' + c.r + ',' + c.g + ',' + c.b + ',' + a + ')';\n  }\n};\n\nmodule.exports = color;\n\n\n\n// WEBPACK FOOTER //\n// ./color.js","var req = require('../http/req').audio;\n\nvar Audio = function(audios, cb) {\n  if (!audios || Object.prototype.toString.call(audios) !== '[object Object]') {\n    return console.error('The first parameter needs to be an Object.', 'Example:', '{audio1: \\'audio1.mp3\\', audio2: \\'audio2.mp3\\'}');\n  }\n\n  window.AudioContext = window.AudioContext || window.webkitAudioContext;\n\n  var total    = Object.keys(audios).length;\n  var loaded   = 0;\n  var retAudios = {};\n\n  this.ctx = new AudioContext();\n\n  for (var name in audios) {\n    req(\n      audios[name],\n      finishedLoading.bind(this),\n      name,\n      document.body,\n      'Loading Audio'\n    );\n  }\n\n  function finishedLoading(arrayBuffer, name) {\n    var a = this;\n    this.ctx.decodeAudioData(\n      arrayBuffer,\n      onSucess.bind(a),\n      onError\n    );\n\n    function onSucess(buffer) {\n      if (!buffer) {\n        console.error('Error decoding audio file:', name);\n        return;\n      }\n      var src = this.ctx.createBufferSource();\n      src.buffer = buffer;\n      retAudios[name] = src;\n      checkLoaded();\n    }\n\n    function onError(err) {\n      console.error('decodeAudioData error', err);\n    }\n  };\n\n  function checkLoaded() {\n    loaded++;\n    if (loaded === total) {\n      cb(retAudios);\n    }\n  };\n};\n\nAudio.prototype.source = function(src) {\n  var src = this.ctx.createBufferSource();\n  src.buffer = buffer;\n  src.connect(this.gainNode);\n  this.gainNode.connect(this.ctx.destination);\n\n  return src;\n};\n\nmodule.exports = {\n  Audio: Audio\n};\n\n\n\n// WEBPACK FOOTER //\n// ./audio/index.js","var webgl = {\n  Stage: require('./Stage'),\n  Webgl: require('./Renderer')\n};\n\nmodule.exports = webgl;\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/index.js","import {isPowerOfTwo} from '../math';\n\nvar Stage = function(imgData, renderer, batchSize) {\n  this.children = [];\n  this.texture = {};\n  this.data = imgData;\n  this.renderer = renderer;\n\n  this.loadImg(imgData.url);\n\n  this.setBatchSize(batchSize);\n};\n\nmodule.exports = Stage;\n\nStage.prototype.setBatchSize = function(batchSize) {\n  var maxBatchSize = 16384;\n  var maxSize = 15000;\n\n  if (batchSize > maxBatchSize) {\n    batchSize = maxBatchSize;\n  }\n  if (batchSize > maxSize) {\n    batchSize = maxSize;\n  }\n  this.batchSize = batchSize;\n};\n\nStage.prototype.renderWebGL = function(renderer) {\n  renderer.currentRenderer.render(this);\n};\n\nStage.prototype.bindTexture = function() {\n  var gl = this.renderer.gl;\n\n  var texture = this.texture;\n  if (!texture.glTexture) {\n    texture.glTexture = gl.createTexture();\n  }\n\n  gl.bindTexture(gl.TEXTURE_2D, texture.glTexture);\n\n  /*----------  SET ALPHA  ----------*/\n  gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, true);\n  gl.blendFunc(gl.ONE, gl.ONE_MINUS_SRC_ALPHA);\n\n  gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, this.img);\n\n  gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MAG_FILTER, gl.LINEAR);\n\n  if (texture.mipmap && texture.isPowerOfTwo) {\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR_MIPMAP_LINEAR);\n    gl.generateMipmap(gl.TEXTURE_2D);\n  } else {\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_MIN_FILTER, gl.LINEAR);\n  }\n\n  if (!texture.isPowerOfTwo) {\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.CLAMP_TO_EDGE);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.CLAMP_TO_EDGE);\n  } else {\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_S, gl.REPEAT);\n    gl.texParameteri(gl.TEXTURE_2D, gl.TEXTURE_WRAP_T, gl.REPEAT);\n  }\n\n  return true;\n};\n\nStage.prototype.loadImg = function(url) {\n  this.img = new Image();\n  this.img.onload = this.imgLoaded.bind(this);\n  this.img.src = url;\n};\n\nStage.prototype.imgLoaded = function() {\n  var w = this.img.naturalWidth;\n  var h = this.img.naturalHeight;\n\n  var texture = {\n    loaded: true,\n    isPowerOfTwo: isPowerOfTwo(w, h)\n  };\n\n  var frames = [];\n  for (var i = 0; i < this.data.frames.length; i++) {\n    var frame = this.data.frames[i];\n\n    frames.push({\n      width: frame.w,\n      height: frame.h,\n      uvs: [frame.x / w, frame.y / h, (frame.x + frame.w) / w, (frame.y + frame.h) / h]\n    });\n  }\n  this.renderer.frames = frames;\n  this.texture = texture;\n  this.bindTexture();\n\n  if (this.data.cb) {\n    this.data.cb();\n  }\n};\n\nStage.prototype.particle = function(obj) {\n  obj = obj || {};\n  obj.scale = obj.scale || new DDD.Point(1, 1);\n  obj.alpha = obj.alpha || 1;\n  obj.rotation = obj.rotation || 0;\n  obj.x = obj.x || 0;\n  obj.y = obj.y || 0;\n  obj.frame = obj.frame || 0;\n\n  this.children.push(obj);\n\n  if (this.children.length > this.batchSize) {\n    this.setBatchSize(this.children.length);\n  }\n  return obj;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/Stage.js","import RenderTarget from './utils/RenderTarget';\nimport ObjectRenderer from './utils/ObjectRenderer';\n\nvar Renderer = function(container, canvasOptions) {\n  this.container = container;\n  canvasOptions = canvasOptions || {};\n\n  this.width = canvasOptions.width || window.innerWidth;\n  this.height = canvasOptions.height || window.innerHeight;\n  this.canvas = document.createElement('canvas');\n  this.canvas.style.position = 'absolute';\n  container.appendChild(this.canvas);\n\n  var gl = this.canvas.getContext('webgl') || this.canvas.getContext('experimental-webgl', ctxOptions);\n  this.gl = gl;\n\n  gl.disable(gl.DEPTH_TEST);\n  gl.disable(gl.CULL_FACE);\n  gl.enable(gl.BLEND);\n\n  this.renderTarget = new RenderTarget(gl, this.width, this.height);\n  this.currentRenderer = new ObjectRenderer(gl, this);\n\n  this.resize(this.width, this.height);\n};\n\nmodule.exports = Renderer;\n\nRenderer.prototype.render = function(object) {\n  object.renderWebGL(this);\n};\n\nRenderer.prototype.resize = function(width, height) {\n  this.width = this.canvas.width = width;\n  this.height = this.canvas.height = height;\n\n  this.gl.viewport(0, 0, width, height);\n};\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/Renderer.js","import {Rectangle, Matrix} from '../../math';\n\nvar RenderTarget = function(gl, width, height) {\n  this.gl = gl;\n  this.size = new Rectangle(0, 0, 1, 1);\n  this.projectionMatrix = new Matrix();\n\n  this.resize(width, height);\n};\n\nmodule.exports = RenderTarget;\n\nRenderTarget.prototype.resize = function(width, height) {\n  width = width | 0;\n  height = height | 0;\n\n  if (this.size.width === width && this.size.height === height) {\n    return;\n  }\n\n  this.size.width = width;\n  this.size.height = height;\n\n  var pm = this.projectionMatrix.identity();\n\n  pm.a  = 2 / this.size.width;\n  pm.d  = -2 / this.size.height;\n  pm.tx = -1;\n  pm.ty = 1;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/utils/RenderTarget.js","import Shader from './Shader';\n\nvar ObjectRenderer = function(gl, renderer) {\n  this.renderer = renderer;\n  this.gl = gl;\n  this.start();\n};\n\nmodule.exports = ObjectRenderer;\n\nObjectRenderer.prototype.start = function() {\n  var gl = this.gl;\n  var shader = new Shader(gl);\n\n  this.properties = [\n    // verticesData\n    {\n      attribute: shader.attributes.aVertexPosition,\n      size: 2\n    },\n    // positionData\n    {\n      attribute: shader.attributes.aPositionCoord,\n      size: 2\n    },\n    // rotationData\n    {\n      attribute: shader.attributes.aRotation,\n      size: 1\n    },\n    // uvsData\n    {\n      attribute: shader.attributes.aTextureCoord,\n      size: 2\n    },\n    // alphaData\n    {\n      attribute: shader.attributes.aAlpha,\n      size: 1\n    }\n  ];\n\n  for (var i = 0; i < this.properties.length; i++) {\n    gl.enableVertexAttribArray(i);\n  }\n\n  var m = this.renderer.renderTarget.projectionMatrix;\n  gl.uniformMatrix3fv(shader.uniforms.projectionMatrix._location, false, m.toArray(true));\n};\n\nObjectRenderer.prototype.render = function(container) {\n  var texture = container.texture;\n  var children = container.children;\n  var total = children.length;\n  var maxSize = container.maxSize;\n  this.size = container.batchSize;\n  var gl = this.gl;\n\n  if (total === 0) {\n    return;\n  } else if (total > maxSize) {\n    total = maxSize;\n  }\n\n  if (!this.data) {\n    this.initBuffers();\n    for (var i = 0; i < this.properties.length; i++) {\n      var property = this.properties[i];\n      gl.vertexAttribPointer(property.attribute, property.size, gl.FLOAT, false, this.stride * 4, property.offset * 4);\n    }\n  }\n\n  this.updateData(children, total);\n\n  gl.bufferSubData(gl.ARRAY_BUFFER, 0, this.data);\n  gl.drawElements(gl.TRIANGLES, total * 6, gl.UNSIGNED_SHORT, 0);\n};\n\nObjectRenderer.prototype.initBuffers = function() {\n  var gl = this.gl;\n\n  var dynamicOffset = 0;\n  this.stride = 0;\n\n  for (var i = 0; i < this.properties.length; i++) {\n    var property = this.properties[i];\n\n    property.offset = dynamicOffset;\n    dynamicOffset += property.size;\n    this.stride += property.size;\n  }\n\n  this.data = new Float32Array(this.size * this.stride * 4);\n\n  gl.bindBuffer(gl.ARRAY_BUFFER, gl.createBuffer());\n  gl.bufferData(gl.ARRAY_BUFFER, this.data, gl.DYNAMIC_DRAW);\n\n  var numIndices = this.size * 6;\n  var indices = new Uint16Array(numIndices);\n\n  for (var i = 0, j = 0; i < numIndices; i += 6, j += 4) {\n    indices[i] = j;\n    indices[i + 1] = j + 1;\n    indices[i + 2] = j + 2;\n    indices[i + 3] = j;\n    indices[i + 4] = j + 2;\n    indices[i + 5] = j + 3;\n  }\n\n  gl.bindBuffer(gl.ELEMENT_ARRAY_BUFFER, gl.createBuffer());\n  gl.bufferData(gl.ELEMENT_ARRAY_BUFFER, indices, gl.STATIC_DRAW);\n};\n\nObjectRenderer.prototype.updateData = function(children, amount) {\n  var stride = this.stride;\n  var n = 0;\n  var data = this.data;\n  var textures = this.renderer.frames;\n\n  for (var i = 0; i < amount; i++) {\n    var target = children[i];\n    var texture = textures[target.frame];\n    var w = texture.width * target.scale;\n    var h = texture.height * target.scale;\n\n    var x = target.x;\n    var y = target.y;\n    var r = target.rotation;\n    var uvs = texture.uvs;\n    var a  = target.alpha;\n    /*\n      [\n        vertice   pos   rot   uvs    alpha\n        w,h,      x,y,  r,    x,y,   a\n        w,h,      x,y,  r,    x,y,   a\n        w,h,      x,y,  r,    x,y,   a\n        w,h,      x,y,  r,    x,y,   a\n      ]\n   */\n    /*----------  Vertex 1  ----------*/\n    data[n] = -w;       data[++n] = -h;       // Size\n    data[++n] = x;      data[++n] = y;        // Pos\n    data[++n] = r;                            // Rotation\n    data[++n] = uvs[0]; data[++n] = uvs[1];   // Uvs\n    data[++n] = a;                            // Alpha\n\n    /*----------  Vertex 2  ----------*/\n    data[++n] = w;      data[++n] = -h;\n    data[++n] = x;      data[++n] = y;\n    data[++n] = r;\n    data[++n] = uvs[2]; data[++n] = uvs[1];\n    data[++n] = a;\n\n    /*----------  Vertex 3  ----------*/\n    data[++n] = w;      data[++n] = h;\n    data[++n] = x;      data[++n] = y;\n    data[++n] = r;\n    data[++n] = uvs[2]; data[++n] = uvs[3];\n    data[++n] = a;\n\n    /*----------  Vertex 4  ----------*/\n    data[++n] = -w;     data[++n] = h;\n    data[++n] = x;      data[++n] = y;\n    data[++n] = r;\n    data[++n] = uvs[0]; data[++n] = uvs[3];\n\n    data[++n] = a;\n    n++;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/utils/ObjectRenderer.js","import particlesVS from '../shaders/particles.vs';\nimport particlesFS from '../shaders/particles.fs';\n\nvar Shader = function(gl) {\n  this.gl = gl;\n  this.uniforms = {\n    projectionMatrix: {}\n  };\n\n  this.attributes = {};\n\n  var vertexShader = gl.createShader(gl.VERTEX_SHADER);\n  gl.shaderSource(vertexShader, particlesVS);\n  gl.compileShader(vertexShader);\n\n  var fragmentShader = gl.createShader(gl.FRAGMENT_SHADER);\n  gl.shaderSource(fragmentShader, particlesFS);\n  gl.compileShader(fragmentShader);\n\n  var program = gl.createProgram();\n  gl.attachShader(program, vertexShader);\n  gl.attachShader(program, fragmentShader);\n  gl.linkProgram(program);\n\n  // clear shader from memory after linking program\n  gl.deleteShader(vertexShader);\n  gl.deleteShader(fragmentShader);\n\n  this.program = program;\n  gl.useProgram(program);\n  this.cacheUniformLocations(['projectionMatrix']);\n  this.cacheAttributeLocations([\n    'aVertexPosition',\n    'aTextureCoord',\n    'aAlpha',\n    'aPositionCoord',\n    'aRotation'\n  ]);\n\n};\n\nmodule.exports = Shader;\n\nShader.prototype.cacheUniformLocations = function(keys) {\n  for (var i = 0; i < keys.length; ++i) {\n    this.uniforms[keys[i]]._location = this.gl.getUniformLocation(this.program, keys[i]);\n  }\n};\n\nShader.prototype.cacheAttributeLocations = function(keys) {\n  for (var i = 0; i < keys.length; ++i) {\n    this.attributes[keys[i]] = this.gl.getAttribLocation(this.program, keys[i]);\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./webgl/utils/Shader.js","module.exports = \"attribute vec2 aVertexPosition;\\nattribute vec2 aTextureCoord;\\nattribute float aAlpha;\\n\\nattribute vec2 aPositionCoord;\\nattribute float aRotation;\\n\\nuniform mat3 projectionMatrix;\\n\\nvarying vec2 vTextureCoord;\\nvarying float vAlpha;\\n\\nvoid main(void){\\n  float cosine = cos(aRotation);\\n  float sine = sin(aRotation);\\n\\n  vec3 v;\\n  v.x = aVertexPosition.x * cosine - aVertexPosition.y * sine;\\n  v.y = aVertexPosition.x * sine + aVertexPosition.y * cosine;\\n  v.z = 1.0;\\n\\n  // Move\\n  v.xy += aPositionCoord;\\n\\n  gl_Position = vec4(projectionMatrix * v, 1.0);\\n\\n  vTextureCoord = aTextureCoord;\\n  vAlpha = aAlpha;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./webgl/shaders/particles.vs\n// module id = 18\n// module chunks = 0","module.exports = \"precision lowp float;\\n\\nvarying vec2 vTextureCoord;\\nvarying float vAlpha;\\n\\nuniform sampler2D uImage;\\n\\nvoid main(void){\\n  vec4 color = texture2D(uImage, vTextureCoord) * vAlpha;\\n  if (color.a == 0.0) discard;\\n  gl_FragColor = color;\\n}\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./webgl/shaders/particles.fs\n// module id = 19\n// module chunks = 0"],"sourceRoot":""}