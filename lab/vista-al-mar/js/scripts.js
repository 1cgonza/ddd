!function(t){function e(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return t[i].call(o.exports,o,o.exports,e),o.l=!0,o.exports}var n={};e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="/Users/juan/lab/ddd/www/",e(e.s=3)}([,,,function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function o(){if(P<x){var t=b[P];v.layer.style.opacity=(L-t-j/3)*O,y.update(P),P++}else window.cancelAnimationFrame(a);a=requestAnimationFrame(o)}var a,s=n(4),r=i(s),l=n(5),c=i(l),d=n(6),u=i(d),h=n(8),p=i(h),g=n(9),f=(i(g),document.getElementById("ddd-container")),y=new r.default(f),m=new c.default(f),v=new u.default(f);new p.default;window.init=function(){v.init()};var b=[],w=!1,x=0,P=0,L=563,j=L-462,O=1/j;DDD.json("/data/pulse/heart.2.json").then(function(t){for(var e=0;e<t.beats.length;e++){var n=t.beats[e];"S"===n.charAt(0)&&b.push(+n.substr(1))}w=!0,x=b.length,y.bindData(b),y.init(),o()}).catch(function(t){console.error(t)});y.stage.canvas.onclick=function(t){return P=y.getNewI(t.clientX),!1},window.onresize=function(t){m.resize()}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){this.stage=DDD.canvas(t,{h:60}),this.stage.canvas.style.zIndex=9999};e.default=i,i.prototype.bindData=function(t){this.data=t,this.stepX=this.stage.w/t.length},i.prototype.init=function(){function t(){if(i<a){for(var r=i;r<i+o;r++)s.update(r);i+=o,e=requestAnimationFrame(t)}else n.strokeStyle="rgba(255, 0, 0, 0.01)"}var e,n=this.stage.ctx,i=0,o=3e3,a=this.data.length;n.strokeStyle="rgba(0, 0, 0, 0.01)";var s=this;t()},i.prototype.update=function(t){var e=this.stage.ctx,n=this.data[t],i=t*this.stepX;e.beginPath(),e.moveTo(i,0),e.lineTo(i,-500+n),e.stroke()},i.prototype.getNewI=function(t){return t/this.stepX|0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(t){this.layer=DDD.canvas(t),this.layer.canvas.id="mask",this.layer.canvas.style.pointerEvents="none",this.layer.canvas.style.zIndex=99,this.draw()};e.default=i,i.prototype.resize=function(){this.draw()},i.prototype.draw=function(){var t=this.layer.ctx,e=this.layer.canvas.width=window.innerWidth,n=this.layer.canvas.height=window.innerHeight;t.fillStyle="white",t.fillRect(0,0,e,n),t.globalCompositeOperation="destination-out",t.filter="blur(70px)",t.beginPath(),t.ellipse(e/2,n/2,e/2.5,n/2.5,0,0,2*Math.PI),t.fill(),t.globalCompositeOperation="source-over"}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(7),o=function(t){this.container=t,this.animReq,this.mapLoaded=!1,this.imgLoaded=!1,this.layer=document.createElement("div"),this.layer.id="googleMap",this.layer.style.position="absolute",this.layer.style.left=0,this.layer.style.top=0,this.layer.style.width="100%",this.layer.style.height="100%",this.layer.style.transition="none",this.container.appendChild(this.layer)};e.default=o,o.prototype.init=function(){this.map=new google.maps.Map(this.layer,{center:{lat:10.398683,lng:-75.475911},scrollwheel:!1,zoom:17,disableDefaultUI:!0}),this.waitMapToLoad(),this.gallo=new Image,this.gallo.onload=this.onImageLoaded.bind(this),this.gallo.src="/img/assets/backgrounds/elGallo.png"},o.prototype.onImageLoaded=function(){this.mapOver=DDD.canvas(this.container,{w:this.gallo.naturalWidth,h:this.gallo.naturalHeight,left:window.innerWidth/2-this.gallo.naturalWidth/2-40+"px",top:window.innerHeight/2-this.gallo.naturalHeight/2+24+"px",css:{opacity:0,transition:"5s opacity ease-in-out",zIndex:999}}),this.mapOver.canvas.id="galloMap",this.mapOver.ctx.drawImage(this.gallo,0,0),this.imgLoaded=!0},o.prototype.checkAssetsLoaded=function(){this.imgLoaded?(this.render(),window.cancelAnimationFrame(this.animReq)):this.animReq=requestAnimationFrame(this.checkAssetsLoaded.bind(this))},o.prototype.waitMapToLoad=function(t){google.maps.event.addListenerOnce(this.map,"idle",this.checkAssetsLoaded.bind(this))},o.prototype.render=function(){var t=this;this.mapOver.canvas.style.opacity=1,this.mapOver.canvas.onclick=function(e){var n={x:e.clientX,y:e.clientY},o=(0,i.point2Coords)(n,t.map),a=t.map.getStreetView();return a.setPosition({lat:o.lat,lng:o.lng}),a.setPov(),a.setVisible(!0),t.mapOver.canvas.style.display="none",t.layer.style.zIndex=90,!1}}},function(t,e,n){"use strict";function i(t,e){var n=e.getProjection().fromLatLngToPoint(e.getBounds().getNorthEast()),i=e.getProjection().fromLatLngToPoint(e.getBounds().getSouthWest()),o=Math.pow(2,e.getZoom()),a=e.getProjection().fromLatLngToPoint(t);return new google.maps.Point((a.x-i.x)*o,(a.y-n.y)*o)}function o(t,e){var n=e.getProjection().fromLatLngToPoint(e.getBounds().getNorthEast()),i=e.getProjection().fromLatLngToPoint(e.getBounds().getSouthWest()),o=Math.pow(2,e.getZoom()),a=new google.maps.Point(t.x/o+i.x,t.y/o+n.y),s=e.getProjection().fromPointToLatLng(a);return{lat:s.lat(),lng:s.lng()}}Object.defineProperty(e,"__esModule",{value:!0}),e.latLng2Point=i,e.point2Coords=o},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){this.audio=new DDD.Audio({mar:"http://juancgonzalez.com/dddrwings/audio/mar.mp3"},function(t){this.loaded(t)}.bind(this)),this.playing=!0,this.a={},this.btn=document.createElement("div"),Object.assign(this.btn.style,{position:"absolute",zIndex:9999999,bottom:"20px",left:"20px",cursor:"pointer",backgroundImage:"url(/img/assets/icons/audio.png)",display:"block",width:"28px",height:"25px",backgroundRepeat:"no-repeat",backgroundSize:"cover"}),document.body.appendChild(this.btn),this.btn.onclick=this.toggle.bind(this)};e.default=i,i.prototype.loaded=function(t){this.a=t,t.mar.volume=1,t.mar.loop=!0,t.mar.start(0)},i.prototype.toggle=function(){this.playing?(this.audio.ctx.suspend(),this.btn.style.backgroundPosition="right"):(this.audio.ctx.resume(),this.btn.style.backgroundPosition="left"),this.playing=!this.playing}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){this.container=document.createElement("div"),this.container.id="credits",Object.assign(this.container.style,{position:"absolute",width:"100%",height:"100%",backgroundColor:"white",top:0,left:0,zIndex:999999});var t=document.createElement("h1");t.innerText="Vista al Mar",this.container.appendChild(t),document.body.appendChild(this.container)};e.default=i}]);