!function(e){var t={};function a(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=t,a.d=function(e,t,n){a.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},a.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},a.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="",a(a.s=1)}([,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.animReq=t.year=t.assets=void 0;var n=o(a(17)),s=o(a(16)),i=o(a(15)),r=a(14);function o(e){return e&&e.__esModule?e:{default:e}}var c=new DDD.DataRequest,l=document.getElementById("ddd-container"),f=document.createElement("div"),u=DDD.canvas(null),h=DDD.canvas(l),p=DDD.canvas(l),d=DDD.canvas(l),v=DDD.canvas(l),w=void 0,m=void 0,g=DDD.canvas(l);p.canvas.id="papa";var y=t.assets={};f.className="loading",u.center.y=g.center.y=u.h/1.5|0,l.appendChild(f);var D=t.year=2008,x=[],b=[],R=!1,O=t.animReq=void 0,j=0,k=4,_=0,C=new DDD.Map({zoom:8,width:g.w,height:g.h,center:{lon:-71.999996,lat:4.000002}}),M=(Date.parse(D+"/01/01 00:00:00"),Date.parse(D+1+"/01/01 00:00:00"),0);new n.default(l,function(e){f.innerHTML="",f.style.opacity=1,t.year=D=e,j=0,x=[],b=[],R=!1,0,Date.parse(D+"/01/01 00:00:00")/1e3,Date.parse(D+1+"/01/01 00:00:00")/1e3,g.ctx.clearRect(0,0,g.w,g.h),h.ctx.clearRect(0,0,h.w,h.h),u.ctx.clearRect(0,0,u.w,u.h),P(),q(),console.log(D)},c);function P(){c.json({url:"../../data/monitor/violencia-"+D+".json",container:l,loadingMsg:"Loading Violence Data",loadingEle:f}).then(function(e){b=e.data,R=!0}).catch(function(e){console.error(e)})}function q(){M===r.imgs.length&&R?(f.style.opacity=0,g.ctx.globalCompositeOperation="source-over",g.ctx.fillStyle="rgba(255, 255, 255, 1)",g.ctx.fillRect(0,0,g.w,g.h),A(),X()):t.animReq=O=requestAnimationFrame(q)}function X(){j<b.length-1?(_===k&&(!function(e){var t=b[e];if(t.hasOwnProperty("vTotal")&&t.hasOwnProperty("cat")&&t.cat.indexOf("Homicidio")>=0){var a=b[e].vTotal;if("lon"in t&&"lat"in t)for(var n=C.convertCoordinates(t.lon,t.lat),s=0;s<a;s++)x.push(new i.default(u,n,s))}if(x.length>0){u.ctx.clearRect(0,0,g.w,g.h);for(var r=0;r<x.length;r++)x[r].finished||x[r].draw();g.ctx.globalCompositeOperation="source-over",g.ctx.fillStyle="rgba(255, 255, 255, 0.01)",g.ctx.fillRect(0,0,g.w,g.h),g.ctx.globalCompositeOperation="xor",g.ctx.drawImage(u.canvas,0,0)}}(j),_=0),j++,_++,t.animReq=O=requestAnimationFrame(X)):window.cancelAnimationFrame(O)}var I=1,Y=1;function A(){var e=(I+1)%4,a=e%4==0?1:e,n=y["papa"+I].img,s=y["papa"+a].img;Y-=.005,v.ctx.clearRect(0,0,v.w,v.h),v.ctx.globalAlpha=Y,v.ctx.drawImage(n,p.w/2-w/2-200,p.h/2-m/2,w,m),d.ctx.clearRect(0,0,d.w,d.h),d.ctx.globalAlpha=1-Y,d.ctx.drawImage(s,p.w/2-w/2-200,p.h/2-m/2,w,m),p.ctx.clearRect(0,0,p.w,p.h),p.ctx.drawImage(v.canvas,0,0),p.ctx.drawImage(d.canvas,0,0),Y<=0&&(++I>=4&&(I=1),Y=1),t.animReq=O=requestAnimationFrame(A)}!function(){P();for(var e=0;e<r.imgs.length;e++){var t=new s.default(r.imgs[e].options);t.img.onload=function(){M++},t.img.src=t.src,y[r.imgs[e].key]=t,w=p.h-50,m=p.h-50}q()}()},,,,,,,,,,,,,function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.imgs=[{key:"lines",options:{src:"/img/assets/sprites/lines-01-small.png",w:295,h:150,cols:21,rows:1,offX:4,offY:1}},{key:"shadows",options:{src:"/img/assets/sprites/shadows-sprite.png",w:318,h:300,cols:3,rows:8,offX:55,offY:14}},{key:"levit",options:{src:"/img/assets/sprites/levit.png",w:3279,h:165,cols:30,rows:1,offX:68,offY:161}},{key:"papa1",options:{src:"/img/assets/sprites/papa1.jpg",w:1200,h:1200}},{key:"papa2",options:{src:"/img/assets/sprites/papa2.jpg",w:1200,h:1200}},{key:"papa3",options:{src:"/img/assets/sprites/papa3.jpg",w:1200,h:1200}},{key:"papa4",options:{src:"/img/assets/sprites/papa4.jpg",w:1200,h:1200}}]},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(1);var i=function(){function e(t,a,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.stage=t,this.x=a.x,this.y=a.y,this.frameX=0,this.finished=!1,this.r=-n,this.forward=!0,this.pushY=0,this.count=0}return n(e,[{key:"draw",value:function(){var e=this.stage,t=e.ctx;this.count<2*s.assets.levit.cols?(this.forward||(this.pushY+=s.assets.levit.fh/15),t.save(),t.translate(e.center.x,e.center.y),t.rotate(this.r*Math.PI/20),t.drawImage(s.assets.levit.img,this.frameX*s.assets.levit.fw,0,s.assets.levit.fw,s.assets.levit.fh,this.x-s.assets.levit.offX,this.y-s.assets.levit.offY-this.pushY,s.assets.levit.fw,s.assets.levit.fh),t.restore(),this.forward?this.frameX++:this.frameX--,this.count++,this.frameX===s.assets.levit.cols-1&&(this.forward=!1)):this.del()}},{key:"del",value:function(){this.finished=!0}}]),e}();t.default=i},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.img=new Image,this.src=t.src,this.w=t.w,this.h=t.h,this.cols=t.cols,this.rows=t.rows,this.offX=t.offX,this.offY=t.offY,this.fw=this.w/this.cols|0,this.fh=this.h/this.rows|0}},function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),s=a(1);var i=function(){function e(t,a,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.container=t,this.current,this.reloadStage=a,this.violenceReq=n,this.menu=DDD.yearsMenu(2008,2016,s.year,this.onClick.bind(this),this.menuReady.bind(this))}return n(e,[{key:"menuReady",value:function(e,t){this.container.appendChild(e),this.current=t}},{key:"onClick",value:function(e){e.target!==this.current&&(window.cancelAnimationFrame(s.animReq),DDD.resetCurrent(this.current,e.target),this.violenceReq.abort(),this.current=e.target,this.reloadStage(e.target.textContent))}}]),e}();t.default=i}]);